(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{573:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.setAdBlocked=t.search=t.addJobPostToCart=t.fetchCommentsCount=t.postComment=t.fetchComments=t.resendConfirmation=t.putOrder=t.clearOrder=t.setPaypalToOrder=t.setCCToOrder=t.cancelSubscription=t.subscribe=t.signup=t.initPaymentRequest=t.logout=t.recover=t.verifyEmailChangeToken=t.verifyRecoveryToken=t.verifyConfirmationToken=t.login=t.saveUserMetadata=t.changePassword=t.savePersonalDetails=t.getUser=t.addTicketToCart=t.addToCart=t.setDetailsToOrder=t.emptyCart=t.updateCartProps=t.updateCart=t.calculatePrice=t.fetchCart=t.addCoupon=t.makeDownload=t.fetchDownloads=t.fetchOrders=t.fetchOrder=t.fetchAds=t.fetchJobs=t.setSetting=t.checkRoute=t.index=t.client=t.auth=t.commerce=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=S(r(615)),o=S(r(616)),u=S(r(607)),c=S(r(51)),i=S(r(596)),s=S(r(608)),f=r(113),l=S(r(11)),d=S(r(56)),p=r(586);function S(e){return e&&e.__esModule?e:{default:e}}var _=t.commerce=new a.default({APIUrl:"/.netlify/commerce"}),m=t.auth=new o.default({APIUrl:"/.netlify/identity",setCookie:!0}),E=t.client=(0,s.default)("5RAJI8U6UH","c996d58ec6bf7789719889b76dc89aa1"),C=t.index=E.initIndex("smashingmagazine"),h=function(e){return e.jwt().then(function(t){e._claims=JSON.parse(atob(t.split(".")[1])),e.claims=function(){return e._claims};var r=e.app_metadata||{};return e.plan=r.subscription&&r.subscription.plan,e})},T=(t.checkRoute=function(e){return function(t){return t({type:l.default.CHECK_ROUTE,route:e})}},t.setSetting=function(e){return function(t){return t({type:l.default.SETTINGS_SET,settings:e})}}),y=(t.fetchJobs=function(t,r){var n=r().jobs;return n&&n.items&&0!==n.items.length&&n.isFetching?null:(t({type:l.default.REQUEST_JOBS_START}),e("/jobs/index.json").then(function(e){return e.json()}).then(function(e){return t({type:l.default.REQUEST_JOBS_SUCCESS,jobs:e})}).catch(function(e){return t({type:l.default.REQUEST_JOBS_FAIL,error:(0,f.formatErrorMessage)(e)})}))},function(e,t){t({type:l.default.HISTORY_GO,path:e}),window.history.replaceState({},"","/"+e+"/")}),R=(t.fetchAds=function(){return function(t){return t({type:l.default.REQUEST_ADS_START}),e(d.default.PROXY_URL+"friskies").then(function(e){return e.json()}).then(function(t){return e(d.default.PROXY_URL+"friskies").then(function(e){return e.json()}).then(function(e){return((0,c.default)(t,"ads")||[]).concat((0,c.default)(e,"ads")||[])})}).then(function(e){return t({type:l.default.REQUEST_ADS_SUCCESS,ads:e})}).catch(function(e){return t({type:l.default.REQUEST_ADS_FAIL,error:(0,f.formatErrorMessage)(e)})})}},t.fetchOrder=function(e){return function(t){_.setUser(m.currentUser()),t({type:l.default.REQUEST_ORDER_START}),_.orderDetails(e).then(function(e){return t({type:l.default.REQUEST_ORDER_SUCCESS,order:e})}).catch(function(e){return t({type:l.default.REQUEST_ORDER_FAIL,error:(0,f.formatErrorMessage)(e)})})}},t.fetchOrders=function(e){_.setUser(m.currentUser()),e({type:l.default.REQUEST_ORDERS_START}),_.orderHistory().then(function(t){return e({type:l.default.REQUEST_ORDERS_SUCCESS,orders:t.orders})}).catch(function(t){return e({type:l.default.REQUEST_ORDERS_FAIL,error:(0,f.formatErrorMessage)(t)})})},t.fetchDownloads=function(e){_.setUser(m.currentUser()),e({type:l.default.REQUEST_DOWNLOADS_START}),_.downloads().then(function(t){return e({type:l.default.REQUEST_DOWNLOADS_SUCCESS,downloads:t.downloads})}).catch(function(t){return e({type:l.default.REQUEST_DOWNLOADS_FAIL,error:(0,f.formatErrorMessage)(t)})})},t.makeDownload=function(e){return function(){_.downloadURL(e).then(function(e){var t=document.createElement("a");t.download=!0,t.href=e,document.body.appendChild(t),t.click(),t.remove()}).catch(function(){})}},t.addCoupon=function(e){return function(t){return t({type:l.default.ADD_COUPON_START}),_.setCoupon(e).then(function(r){t({type:l.default.ADD_COUPON_SUCCESS,code:e,coupon:r}),t({type:l.default.REQUEST_CART_SUCCESS,cart:_.getCart()})}).catch(function(e){return t({type:l.default.ADD_COUPON_FAIL,error:(0,f.formatErrorMessage)(e)})})}}),A=(t.fetchCart=function(e,t){var r=t(),n=r.cart,a=m.currentUser();if(e({type:l.default.REQUEST_CART_START}),!n||!n.isFetching){if((0,c.default)(r.order,"details.billingAddress.country")){var o=(0,c.default)(r.order,"details.billingAddress.country");o.includes("Czech")&&(o="Czech"),_.setCountry(o),_.setCurrency((0,f.currencyFromCountry)(o)||"USD")}n=_.getCart(),(0,c.default)(r.order,"coupon.code")&&n&&Object.keys(n.items).length>0&&e(R((0,c.default)(r.order,"coupon.code"))),a?h(a).then(function(t){e({type:l.default.GET_USER_SUCCESS,user:t}),_.setUser(t);var r=t.user_metadata||{};r.shippingAddress&&r.shippingAddress.country&&_.setCountry(r.shippingAddress.country),r.shippingAddress&&r.shippingAddress.country&&_.setCurrency((0,f.currencyFromCountry)(r.shippingAddress.country)||"USD"),e({type:l.default.REQUEST_CART_SUCCESS,cart:_.getCart()})}).catch(function(t){return e({type:l.default.REQUEST_CART_FAIL,error:(0,f.formatErrorMessage)(t)})}):(e({type:l.default.GET_USER_SUCCESS,user:null}),e({type:l.default.REQUEST_CART_SUCCESS,cart:_.getCart()}))}},t.calculatePrice=function(e,t){return function(r){return _.loadSettings().then(function(){return r({type:l.default.CALCULATE_MEMBER_PRICE_SUCCESS,price:_.calculatePrice(e,t?{app_metadata:{subscription:{plan:t}}}:null),item:e})})}},t.updateCart=function(e,t){return function(r){_.updateCart(e,t),r({type:l.default.UPDATE_CART_SUCCESS,cart:_.getCart(),item:{sku:e,quantity:t}})}},t.updateCartProps=function(e){return function(t){if(!e)return null;e.includes("Czech")&&(e="Czech"),_.setCountry(e),_.setCurrency((0,f.currencyFromCountry)(e)||"USD"),t({type:l.default.REQUEST_CART_SUCCESS,cart:_.getCart()})}},t.emptyCart=function(e){_.clearCart(),e({type:l.default.EMPTY_CART_SUCCESS,cart:_.getCart()})}),U=t.setDetailsToOrder=function(e,t){return function(r){r({type:l.default.ORDER_SET_DETAILS_SUCCESS,details:e}),t||y("checkout/payment",r)}},O=(t.addToCart=function(e){return function(t,r){var n=r().cart;(!n.items.hasOwnProperty(e.sku)||(0,f.adjustableQuantity)(n.items[e.sku].type))&&(t({type:l.default.ADD_TO_CART_START}),_.addToCart(e).then(function(r){t({type:l.default.ADD_TO_CART_SUCCESS,cart:r,item:e})}).catch(function(r){return t({type:l.default.ADD_TO_CART_FAIL,error:(0,f.formatErrorMessage)(r),item:e})}))}},t.addTicketToCart=function(e,t,r,n){return function(a,o){var u=o().auth,i=t.title.match(/\+/)?"combo":"conference";t.title.match(/Workshop/)&&(i="workshop");var s={path:e.path,sku:t.sku,quantity:r.length,meta:{event:e,attendees:r,type:i}};if(!u.user){var d=r[0],p=(0,c.default)(d,"email"),S=(0,c.default)(d,"firstname"),m=(0,c.default)(d,"lastname");a(U({email:p,shippingAddress:{firstname:S,lastname:m,firstName:S,lastName:m},billingAddress:{firstname:S,lastname:m,firstName:S,lastName:m}},1))}cart.items&&cart.items[t.sku]&&!n&&(s.meta.attendees=r.concat(cart.items[t.sku].meta&&cart.items[t.sku].meta.attendees||[]),s.quantity=s.meta.attendees.length,_.updateCart(t.sku,0)),n&&_.updateCart(t.sku,0),a({type:l.default.ADD_TO_CART_START}),_.addToCart(s).then(function(e){setTimeout(function(){a({type:l.default.ADD_TO_CART_SUCCESS,item:s,cart:e}),document.location.href="/checkout"},300)}).catch(function(e){return a({type:l.default.ADD_TO_CART_FAIL,error:(0,f.formatErrorMessage)(e),item:s})})}},t.getUser=function(e){var t=m.currentUser();if(t)return e({type:l.default.GET_USER_START}),h(t).then(function(t){return e({type:l.default.GET_USER_SUCCESS,user:t})}).catch(function(t){return e({type:l.default.GET_USER_FAIL,error:(0,f.formatErrorMessage)(t)})});e({type:l.default.GET_USER_FAIL,user:null})},t.savePersonalDetails=function(e){return function(t){var r=m.currentUser(),n={data:{}};return t({type:l.default.UPDATE_USER_START}),r.email!==e.email&&(n.email=e.email),n.data.twitter=e.twitter,n.data.firstname=e.firstname,n.data.lastname=e.lastname,r.update(n).then(function(e){return t({type:l.default.UPDATE_USER_SUCCESS,user:e,emailChanged:!!n.email})}).catch(function(e){return t({type:l.default.UPDATE_USER_FAIL,error:(0,f.formatErrorMessage)(e)})})}},t.changePassword=function(e){return function(t){var r=m.currentUser();return t({type:l.default.UPDATE_PASSWORD_START}),r.update(e).then(function(e){return t({type:l.default.UPDATE_PASSWORD_SUCCESS,user:e})}).catch(function(e){return t({type:l.default.UPDATE_PASSWORD_FAIL,error:(0,f.formatErrorMessage)(e)})})}},t.saveUserMetadata=function(e){return function(t){var r=m.currentUser();return t({type:l.default.UPDATE_USER_METADATA_START}),r.update({data:(0,i.default)(e,["email","confirmed"])}).then(function(e){return t({type:l.default.UPDATE_USER_METADATA_SUCCESS,user:e})}).catch(function(e){return t({type:l.default.UPDATE_USER_METADATA_FAIL,error:(0,f.formatErrorMessage)(e)})})}}),g=function(e,t){_.setUser(e);var r=localStorage.getItem("auth.return_to")||"/membership/";localStorage.removeItem("auth.return_to"),_.claimOrders().then(function(){return!t&&window.location.replace(r)}).catch(function(){return!t&&window.location.replace(r)})},I=(t.login=function(e){return function(t){t({type:l.default.LOGIN_START}),m.login(e.email,e.password,!0).then(function(e){t({type:l.default.LOGIN_SUCCESS,user:e}),g(e)}).catch(function(e){return t({type:l.default.LOGIN_FAIL,error:(0,f.formatErrorMessage)(e)})})}},t.verifyConfirmationToken=function(e){return function(t){t({type:l.default.VERIFICATION_START}),m.confirm(e).then(function(e){g(e),t({type:l.default.VERIFICATION_SUCCESS,user:e})}).catch(function(e){return t({type:l.default.VERIFICATION_FAIL,error:e})})}},t.verifyRecoveryToken=function(e){return function(t){t({type:l.default.VERIFICATION_START}),localStorage.setItem("auth.return_to","/membership/recover-password"),m.recover(e,!0).then(function(e){g(e),t({type:l.default.VERIFICATION_SUCCESS,user:e})}).catch(function(e){return t({type:l.default.VERIFICATION_FAIL,error:(0,f.formatErrorMessage)(e)})})}},t.verifyEmailChangeToken=function(e){return function(t){var r=m.currentUser();t({type:l.default.VERIFICATION_START}),r?r.update({email_change_token:e}).then(function(e){g(e),t({type:l.default.VERIFICATION_SUCCESS,user:e})}).catch(function(e){return t({type:l.default.VERIFICATION_FAIL,error:(0,f.formatErrorMessage)(e)})}):(localStorage.setItem("auth.return_to",document.location.pathname),window.location.replace("/auth/"))}},t.recover=function(e){return function(t){t({type:l.default.RECOVER_START}),m.requestPasswordRecovery(e.email).then(function(){window.location.replace("/auth/confirmation/?email="+e.email),t({type:l.default.RECOVER_SUCCESS})}).catch(function(e){return t({type:l.default.RECOVER_FAIL,error:(0,f.formatErrorMessage)(e)})})}},t.logout=function(e){var t=m.currentUser();e({type:l.default.LOGOUT_START}),t.logout().then(function(){return e({type:l.default.LOGOUT_SUCCESS,user:null})}).catch(function(t){return e({type:l.default.LOGOUT_FAIL,error:(0,f.formatErrorMessage)(t)})})},function(e){return p.stripe.createToken(p.cardElement,{name:e.name}).then(function(e){return(0,c.default)(e,"error")?Promise.reject(e.error):(0,c.default)(e,"token.id")}).catch(function(e){return(0,f.processStripeError)(e)})}),D=(t.initPaymentRequest=function(e,t){var r=t(),n=r.cart,a=r.order,o=(0,c.default)(a.details,"billingAddress.country")||(0,c.default)(a.details,"shippingAddress.country"),u=Object.keys(n.items).map(function(e){var t=n.items[e];return{label:""+t.title,amount:t.price.cents}});(0,c.default)(n,"memberDiscount.cents")&&u.push({label:"Membership discount 🦁",amount:-(0,c.default)(n,"memberDiscount.cents")}),(0,c.default)(n,"couponDiscount.cents")&&u.push({label:"Coupon discount",amount:-(0,c.default)(n,"couponDiscount.cents")});try{var i=p.stripe.paymentRequest({country:(0,f.countryToCode)(o)||"US",currency:(0,c.default)(n,"total.currency").toLowerCase(),total:{label:"Total",amount:(0,c.default)(n,"total.cents")},displayItems:u});return i.on("token",function(t){var r=(0,c.default)(t,"token.id");return r?(e({type:l.default.ORDER_SET_CC_SUCCESS,key:r}),y("checkout/confirmation",e),t.complete("success")):t.complete("fail")}),i.canMakePayment().then(function(e){if(e){var t=document.querySelector(".stripe-button");t&&(t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),i.show()}),t.classList.remove("hidden"))}return e})}catch(e){}},function(e,t,r){var n=new u.default("");return e.jwt().then(function(a){return n.request("/.netlify/functions/membership",{headers:{Authorization:"Bearer "+a},method:"POST",body:JSON.stringify({plan:t,stripe_token:r})}).then(function(){return e.jwt(!0)}).then(function(){return e.getUserData()})})}),b=(t.signup=function(e,t,r,n){return function(a){a({type:l.default.SIGNUP_START}),m.signup(e,t,r||{}).then(function(){return m.login(e,t,!0).then(function(e){g(e),a({type:l.default.SIGNUP_SUCCESS,user:e}),n&&window.location.replace("/membership")})}).catch(function(e){return a({type:l.default.SIGNUP_FAIL,error:(0,f.formatErrorMessage)(e)})})}},t.subscribe=function(e){return function(t){var r=m.currentUser(),n=localStorage.getItem("auth.return_to")||null;return t({type:l.default.SUBSCRIBE_START}),I(e.cc).then(function(t){return r?D(r,e.plan,t):function(e,t){return m.login(e.email,e.password,!0).then(function(e){return g(e,!0),e}).catch(function(t){var r=(0,c.default)(t,"message")||(0,c.default)(t,"description")||(0,c.default)(t,"error_description");if(r&&r.match(/No user/))return m.signup(e.email,e.password,{firstname:e.firstname,lastname:e.lastname}).then(function(){return m.login(e.email,e.password,!0).then(function(e){return g(e,!0),e})});throw t})}(e).then(function(r){return D(r,e.plan,t)})}).then(function(){n&&(localStorage.removeItem("auth.return_to"),window.location.replace(n)),t({type:l.default.SUBSCRIBE_SUCCESS,plan:e.plan})}).catch(function(e){return t({type:l.default.SUBSCRIBE_FAIL,error:(0,f.formatErrorMessage)(e)})})}},t.cancelSubscription=function(e){var t=m.currentUser();e({type:l.default.SUBSCRIPTION_CANCELLATION_START});var r=new u.default("");return t.jwt().then(function(n){return r.request("/.netlify/functions/membership",{headers:{Authorization:"Bearer "+n},method:"DELETE",body:"{}"}).then(function(){return t.getUserData()}).then(function(){return e({type:l.default.SUBSCRIPTION_CANCELLATION_SUCCESS,plan:null})})}).catch(function(t){return e({type:l.default.SUBSCRIPTION_CANCELLATION_FAIL,error:(0,f.formatErrorMessage)(t)})})},t.setCCToOrder=function(e){return function(t){return t({type:l.default.ORDER_SET_CC_START,cc:e}),I(e).then(function(e){t({type:l.default.ORDER_SET_CC_SUCCESS,key:e}),y("checkout/confirmation",t)}).catch(function(e){return t({type:l.default.ORDER_SET_CC_FAIL,error:(0,f.formatErrorMessage)(e)})})}},t.setPaypalToOrder=function(e){return function(t){t({type:l.default.ORDER_SET_PAYPAL_SUCCESS,paypal:e}),y("checkout/confirmation",t)}},t.clearOrder=function(e){return e({type:l.default.ORDER_CLEAR})}),v=(t.putOrder=function(e,t){var r=t(),n=r.order,a=r.cart,o=r.auth;e({type:l.default.ORDER_CONFIRM_START}),_.order({email:n.details.email,shipping_address:(0,f.formatAddress)(n.details.shippingAddress),billing_address:(0,f.formatAddress)(n.details.billingAddress)}).then(function(t){return _.payment({order_id:t.order.id,amount:t.cart.total.cents,provider:n.paypal?"paypal":"stripe",stripe_token:n.key,paypal_payment_id:n.paypal&&n.paypal.paymentID,paypal_user_id:n.paypal&&n.paypal.payerID}).then(function(r){o.user&&e(O(n.details)),e(A),e(b),e({type:l.default.ORDER_CONFIRM_SUCCESS,transaction:Object.assign({},r,{order:t.order}),cart:a}),y("checkout/confirmation/"+(0,c.default)(t,"order.id"),e)})}).catch(function(t){return e({type:l.default.ORDER_CONFIRM_FAIL,error:(0,f.formatErrorMessage)(t)})})},t.resendConfirmation=function(e,t){return function(r){r({type:l.default.ORDER_RESEND_CONFIRMATION_START}),_.resendConfirmation(e,t).then(function(e){return r({type:l.default.ORDER_RESEND_CONFIRMATION_SUCCESS,result:e})}).catch(function(e){return r({type:l.default.ORDER_RESEND_CONFIRMATION_FAIL,error:(0,f.formatErrorMessage)(e)})})}},function(t,r){var n=(0,f.buildCommentsPath)(t);return r&&(n=n.replace(/\.json$/,".count.json")),e(n).then(function(e){return e.ok?e.json():Promise.reject(e)})});t.fetchComments=function(e){return function(t){t({type:l.default.COMMENTS_FETCH_START}),v(e).then(function(r){return t({type:l.default.COMMENTS_FETCH_SUCCESS,comments:r,thread:e})}).catch(function(e){return t({type:l.default.COMMENTS_FETCH_FAIL,error:(0,f.formatErrorMessage)(e)})})}},t.postComment=function(t){return function(r){r({type:l.default.COMMENTS_SUBMIT_START});var n=m.currentUser(),a=n?n.jwt().catch(null):Promise.resolve(null);return r(T({name:t.name,twitter:t.twitter})),a.then(function(a){var o={"Content-Type":"application/json"};a&&(o.Authorization="Bearer "+a),e("/gotell"+t.thread,{method:"POST",headers:o,body:JSON.stringify({author:t.name,body:t.message,twitter:t.twitter,email:n&&n.email,parent:t.parent})}).then(function(e){return e.ok?e.json():Promise.reject(e)}).then(function(){return v(t.thread)}).then(function(e){return r({type:l.default.COMMENTS_SUBMIT_SUCCESS,comments:e,thread:t.thread})}).catch(function(e){return r({type:l.default.COMMENTS_SUBMIT_FAIL,error:(0,f.formatErrorMessage)(e)})})})}},t.fetchCommentsCount=function(e){return function(t){t({type:l.default.COMMENTS_COUNT_START}),v(e,1).then(function(r){return t({type:l.default.COMMENTS_COUNT_SUCCESS,count:r.count,thread:e})}).catch(function(e){return t({type:l.default.COMMENTS_COUNT_FAIL,error:(0,f.formatErrorMessage)(e)})})}},t.addJobPostToCart=function(e){return function(t){var r=[];e.featured_addon&&r.push("featured"),e.tweet_addon&&r.push("tweet"),e.facebook_addon&&r.push("facebook");var a="full-time"===e.commitment?"job-posting-fulltime":"job-posting-freelance",o=n({},e);delete o.errors;var u={path:e.path,sku:a,quantity:1,meta:o,addons:r};return t({type:l.default.ADD_TO_CART_START}),_.addToCart(u).then(function(){window.location.replace("/checkout")}).catch(function(e){return t({type:l.default.ADD_TO_CART_FAIL,item:u,error:(0,f.formatErrorMessage)(e)})})}},t.search=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r){r({type:l.default.SEARCH_START,query:e}),C.search(e,{hitsPerPage:15*(t+1),page:0},function(e,n){if(e)return r({type:l.default.SEARCH_FAIL,error:(0,f.formatErrorMessage)(e)});r({type:l.default.SEARCH_SUCCESS,results:n,page:t})})}},t.setAdBlocked=function(){return function(e){return e({type:l.default.AD_BLOCKED})}}}).call(this,r(174))},586:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null,a=null,o=null;window.Stripe&&(t.stripe=n=Stripe("pk_live_4a6o5tXVqFE97apgZblp0VXX"),t.stripeElements=a=n.elements({fonts:[{family:"Elena",src:'local("Elena"), local("elena"), url(https://d33wubrfki0l68.cloudfront.net/a978f759fa0230c1e590d1bdb5a1c03ceb538cec/fed6b/fonts/elenawebregular/elenawebregular.woff2)'},{family:"Mija",src:'local("Mija"), local("Mija"), url(https://d33wubrfki0l68.cloudfront.net/b324ee03d5048d2d1831100e323b0b6336ffce68/0445e/fonts/mijaregular/mija_regular-webfont.woff2)'}]}),t.cardElement=o=a.create("card",{hidePostalCode:!0,style:{base:{fontFamily:"Mija",fontSize:"18px","::placeholder":{color:"#aaa",fontFamily:"Elena",fontWeight:300,letterSpacing:"-0.25px",fontSize:"16px"}},complete:{fontWeight:"bold",color:"#20a12c"},invalid:{color:"#CC3428"}},classes:{base:"form__field__input",complete:"success",focus:"focused",invalid:"error",empty:"empty"}})),t.stripe=n,t.stripeElements=a,t.cardElement=o}}]);