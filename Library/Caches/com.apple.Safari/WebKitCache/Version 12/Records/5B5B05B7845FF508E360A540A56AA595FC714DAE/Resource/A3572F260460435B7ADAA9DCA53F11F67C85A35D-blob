function isHorizontal(){return"300x250"==_g.doc.size||"728x90"==_g.doc.size||"1024x768"==_g.doc.size||"480x320"==_g.doc.size||"768x1024"==_g.doc.size||"320x480"==_g.doc.size}function begin(){function e(){return"1024x768"==_g.doc.size||"320x480"==_g.doc.size||"480x320"==_g.doc.size||"768x1024"==_g.doc.size}_g.feedConfig=getFeed("Config"),_g.feedKeys=getFeed("Keys"),_g.feedCar=getFeed("Car"),_g.feedColors=getFeed("Colors"),initSetup(),checkFeedForSize(_g.feedCar,["modelText"]),checkFeedForSize(_g.feedColors,["backgroundImage"]),_g.version.model=_g.feedCar.fileNameSuffix,_g.exit=_g.feedColors.exit.Url.split("vehicle").join(getClickTagVehicleName()),_g.fileNameModel=_g.version.model;var a=isHorizontal()?"":"160x600_";_g.fileNameSizeModel=a+_g.fileNameModel;var s;if(-1!=_g.feedColors.backgroundImage.indexOf("://")){var t=_g.feedColors.backgroundImage.split("/");t[t.length-1]=_g.doc.size+"_"+t[t.length-1],s=t.join("/")}else s="imagesLocal|"+_g.doc.size+"_"+_g.feedColors.backgroundImage;_g.assets.background_image={optRetina:!1,src:s},"alt"==queryStr&&(_g.feedCar.modelText="<b>Highlander Hybrid</b>"),buildInterfaceDefaultPrep({cta:{text:_g.feedColors.cta}}),_g.assets.headline={text:"",color:_g.assets.model_text.color,fontSize:12.5,x:30,y:50},_g.assets.swatches={x:10,y:174,width:280,spacing:{x:26,y:18},select:{width:26,height:2,spacing:{y:-2}}},_g.assets.swatches.color_label={optRetina:!1,fontSize:8.25,color:"#FFFFFF",x:20,y:158,width:_g.doc.width,spacing:{x:0,y:14}},_g.assets.swatchCheck={src:"imagesLocal|swatchCheck.png"},_g.extras=_g.feedCar.extras?JSON.parse(_g.feedCar.extras):{},_g.extras.hasOwnProperty("persistent_disclaimer_fontColor")&&(_g.assets.persistent_disclaimer.color=_g.extras.persistent_disclaimer_color),"#FFFFFF"==_g.assets.persistent_disclaimer.color&&(_g.assets.persistent_disclaimer.color="#cdcdcd"),_g.extras.hasOwnProperty("alt")&&"C"==_g.extras.alt&&(_g.assets.swatches.src="swatchSheetV.png"),_g.extras=extend(_g.extras,_g.feedColors.extras?JSON.parse(_g.feedColors.extras):{}),_g.swatches=JSON.parse(_g.feedColors.colors),_g.assets.model_animation={src:"imagesModels|"+_g.fileNameSizeModel+"_"+_g.swatches.colors[0].id+".png",x:150,y:110,origin:{x:"center",y:"center"},boundingBox:{x:32,y:62,width:236,height:104}},_g.assets.model_animation.glare={src:"imagesModels|"+_g.fileNameSizeModel+"_Glare.png"},_g.assets.model_animation.hub={src:"imagesModels|"+_g.fileNameSizeModel+"_Hub.png",a:{x:111,y:68,scalingX:.65,scalingY:1},b:{x:208,y:60,scalingX:.42,scalingY:.84}},_g.assets.model_animation.start={amp:200,angle:-2,scale:.75},_g.assets.model_animation.glareMask={optRetina:!1,src:"car_glare_mask.png"},_g.extras.hasOwnProperty("disclaimer")&&(_g.assets.rollover_disclaimer.text=(""==_g.assets.rollover_disclaimer.text?"":_g.assets.rollover_disclaimer.text+"<br /><br />")+_g.extras.disclaimer),_g.assets.swatchTwoTone={arr:[]};for(var i=0;i<_g.swatches.colors.length;i++){if(_g.swatches.colors[i].hasOwnProperty("isTwoTone")){var r={};-1!=_g.swatches.colors[i].isTwoTone.indexOf(".png")?_g.assets["swatchTwoTone"+i]={src:"imagesLocal|"+_g.swatches.colors[i].isTwoTone}:_g.assets["swatchTwoTone"+i]={src:"imagesLocal|swatchTwoTone.png"},_g.assets.swatchTwoTone.arr.push(_g.assets["swatchTwoTone"+i])}else _g.assets.swatchTwoTone.arr.push(null);if(!_g.extras.hasOwnProperty("disclaimer")&&_g.swatches.colors[i].hasOwnProperty("disclaimer")){if(_g.swatches.colors[i].disclaimer=_g.swatches.colors[i].disclaimer.split(".<br />[2]").join(".<br /><br /><br />[2]"),-1!=_g.assets.rollover_disclaimer.text.indexOf(_g.swatches.colors[i].disclaimer))continue;_g.assets.rollover_disclaimer.text=(""==_g.assets.rollover_disclaimer.text?"":_g.assets.rollover_disclaimer.text+"<br /><br /><br />")+_g.swatches.colors[i].disclaimer}}switch(_g.extras.hasOwnProperty("addtDisclaimer")&&(_g.assets.rollover_disclaimer.text=_g.extras.addtDisclaimer+(""==_g.assets.rollover_disclaimer.text?"":"<br /><br />"+_g.assets.rollover_disclaimer.text)),setPersistentDisclaimer(_g.assets.persistent_disclaimer,["text"]),_g.swatches.intro=[2,5,0],_g.swatches.colors.length<6&&(_g.swatches.intro[1]=_g.swatches.colors.length-1),e()&&(_g.assets.headline.text="Click to change color"),_g.doc.size){case"300x250":case"728x90":case"480x320":case"320x480":case"1024x768":case"768x1024":break;default:break}switch(_g.doc.size){case"728x90":_g.assets.swatches.x=104,_g.assets.swatches.width=236,_g.assets.swatches.y=58,_g.assets.model_text.fontSize=30.5,_g.assets.model_text.x=104,_g.assets.model_text.y=20,_g.assets.headline.x=124,_g.assets.headline.y=46,_g.assets.headline.width=230,_g.assets.model_animation.x=534,_g.assets.model_animation.y=51,_g.assets.model_animation.boundingBox={x:370,y:6,width:172,height:82},_g.assets.swatches.color_label.fontSize=8.25;break;case"160x600":_g.assets.model_animation.glareMask={optRetina:!1,src:"car_glare_mask_v.png"},_g.assets.model_animation.x=140,_g.assets.model_animation.y=256,_g.assets.model_animation.boundingBox={x:4,y:152,width:268,height:216},_g.assets.swatches.x=7,_g.assets.swatches.width=146,_g.assets.swatches.y=383,_g.assets.cta.x="center",_g.assets.cta.bottom=190,_g.assets.headline.fontSize=12,_g.assets.headline.x=12,_g.assets.headline.y=78,_g.assets.headline.width=134,_g.assets.lockup.src="lgpLockup_alt_white.svg",_g.assets.lockup.x="center",_g.assets.lockup.bottom=136,_g.assets.persistent_disclaimer.rel="stacked",_g.assets.persistent_disclaimer.align="center",delete _g.assets.model_animation.hub;break;case"300x600":_g.assets.model_animation.glareMask={optRetina:!1,src:"car_glare_mask_v.png"},_g.assets.swatches.spacing.y=28,_g.assets.model_animation.x=150,_g.assets.model_animation.y=265,_g.assets.model_animation.boundingBox={x:15,y:152,width:268,height:216},_g.assets.swatches.x=10,_g.assets.swatches.y=376,_g.assets.swatches.width=280,_g.assets.lockup.src="lgpLockup_alt_white.svg",_g.assets.cta.x="center",_g.assets.cta.bottom=188,_g.assets.headline.x=30,_g.assets.headline.y=78,_g.assets.headline.width=240,delete _g.assets.model_animation.hub,_g.assets.swatches.spacing.x=10*_g.assets.swatches.spacing.x/_g.swatches.colors.length;break;default:_g.assets.headline.width=_g.doc.width-2*_g.assets.headline.x;break}switch(_g.assets.swatches.color_label.x=_g.assets.swatches.x,_g.assets.swatches.color_label.y=_g.assets.swatches.y-_g.assets.swatches.color_label.spacing.y,_g.extras.hasOwnProperty("adj")&&(_g.extras.adj.hasOwnProperty(_g.doc.size)&&(_g.extras.adj[_g.doc.size].hasOwnProperty("scaling")&&(_g.assets.model_animation.scaling=Number(_g.extras.adj[_g.doc.size].scaling)),_g.extras.adj[_g.doc.size].hasOwnProperty("x")&&(_g.assets.model_animation.x+=Number(_g.extras.adj[_g.doc.size].x)),_g.extras.adj[_g.doc.size].hasOwnProperty("y")&&(_g.assets.model_animation.y+=Number(_g.extras.adj[_g.doc.size].y))),_g.extras.adj.hasOwnProperty("x")&&(_g.assets.model_animation.x+=Number(_g.extras.adj.x)),_g.extras.adj.hasOwnProperty("y")&&(_g.assets.model_animation.y+=Number(_g.extras.adj.y))),_g.extras.hasOwnProperty("isNight")&&(_g.assets.model_animation.src=_g.assets.model_animation.src.split(".").join("_Night.")),_g.doc.size){case"300x250":case"728x90":case"480x320":case"1024x768":case"768x1024":case"320x480":setupCarProperties({bypassTallCarOffset:!0});break;case"160x600":_g.version.model.length;case"300x600":_g.assets.model_animation.glareMask={optRetina:!1,src:"car_glare_mask_v.png"};break;default:break}console.log("ASDF: "),console.log(_g.assets.model_text),_g.disableFullAnimation&&delete _g.assets.model_animation.hub,checkForRetina();var o=[],n=[];prependBaseUrls(_g.assets,JSON.parse(_g.feedConfig.resources),o),preloadAssets(o,ready,null,!0)}function ready(){initMain(),TweenLite.ticker.addEventListener("tick",draw)}function initMain(){canvas=oCanvas.create({canvas:"#canvas"}),canvas.display.register("canvas",{shapeType:"rectangular"},function(e){e.drawImage(this.buffer,0,0)}),_g.layers.layer0=canvas.display.rectangle({}),canvas.addChild(_g.layers.layer0),_g.layers.layer1=canvas.display.rectangle({}),canvas.addChild(_g.layers.layer1);var e=makeImage(_g.assets.background_image,_g.layers.layer0);if(e.width=_g.doc.scaled_width,e.height=_g.doc.scaled_height,_g.assets.hasOwnProperty("imageSideTintGradient")){var a=makeImage(_g.assets.imageSideTintGradient,_g.layers.layer0);a.width=_g.doc.scaled_width,a.height=_g.doc.scaled_height}var s=makeCarAlt(_g.assets.model_animation);if(_g.car=s,_g.layers.layer0.addChild(s),s.animate(),"728x90"==_g.doc.size&&(console.log(_g.swatches.colors.length),_g.swatches.colors.length>9&&(console.log("EXTEND"),s.x+=20)),"160x600"==_g.doc.size&&!_g.hasOwnProperty("carAdjustForLabel")){for(var t=0;t<_g.swatches.colors.length;t++)if(console.log(_g.swatches.colors[t].text),-1!=_g.swatches.colors[t].text.indexOf("&nbsp;")){_g.car.y-=15;break}_g.carAdjustForLabel=!0}var i=s.children[0],r=canvas.display.canvas({buffer:makeCarGlare({car:_g.assets.model_animation.glare,mask:_g.assets.model_animation.glareMask}),opacity:.7});TweenLite.to(r,.5,{opacity:0,ease:Quad.easeInOut,delay:.5}),isHorizontal()?(r.x=.5*-i.width,r.y=.5*-i.height):(r.x=.5*-s.width,r.y=.5*-s.height),i.addChild(r),buildInterfaceDefault({addClickTagArea:!1});var o=makeClickTagArea();_g.layers.layer0.addChild(o);var n=makeSwatches();canvas.addChild(n),showSwatch(_g.swatches.intro[_g.swatches.intro.length-1],!1,!0),_g.swatchCurrentIndex=0,TweenLite.delayedCall(1,setSwatchLabel,[0]);var c=addHtmlText(_g.assets.model_text);if(Math.round(parseInt(c.offsetHeight)/parseInt(c.style.lineHeight))>1&&(_g.assets.headline.y+=parseInt(c.style.lineHeight)),""!=_g.assets.headline.text){var g=addHtmlText(_g.assets.headline);TweenLite.from(g,1,{opacity:0,ease:Quad.easeInOut,delay:1})}if("728x90"==_g.doc.size){var l=n.width/_g.scaleForDensity*1.02,h=c.clientHeight;if(c.clientWidth>l)for(;c.clientWidth>l;)c.style.fontSize=.98*parseFloat(c.style.fontSize)+"px";var d=c.clientHeight;c.style.top=parseFloat(c.style.top)+.5*(h-d)+"px"}TweenLite.from(c,.75,{opacity:0,ease:Quad.easeInOut,delay:0}),fade(!0,{speed:.33,ease:Quad.easeOut,width:_g.doc.scaled_width,height:_g.doc.scaled_height}),makeDisclaimerDiv(_g.assets.rollover_disclaimer),intro(),initSwipe({left:function(){showSwatch("prev")},right:function(){showSwatch("next")}}),_g.callBeforeExit=function(){Enabler.counter("Exit on color: "+_g.swatches.colors[_g.swatchCurrentIndex].text)}}function intro(){TweenLite.delayedCall(3,showSwatch,[_g.swatches.intro[0],!0]),TweenLite.delayedCall(4.5,showSwatch,[_g.swatches.intro[1],!0]),TweenLite.delayedCall(6,showSwatch,[_g.swatches.intro[2],!0])}function draw(){canvas.draw.redraw()}function makeCarGlare(e){function a(){o.clearRect(0,0,r.width,r.height),o.globalCompositeOperation="source-over",s?o.drawImage(i,n.x,n.y,t.width,i.height):o.drawImage(i,n.x,n.y,i.width,t.height),o.globalCompositeOperation="source-in",o.drawImage(t,0,0)}var s=!1;switch(_g.doc.size){case"300x600":case"160x600":s=!0;break;default:break}var t=new Image;"object"==typeof e.car.src?t=e.car.src:t.src=e.car.src;var i=new Image;"object"==typeof e.mask.src?i=e.mask.src:i.src=e.mask.src;var r=document.createElement("canvas");r.width=t.width,r.height=t.height;var o=r.getContext("2d"),n;n=s?{x:0,y:r.height}:{x:-i.width,y:0};var c=s?3:4;return TweenLite.to(n,c,{x:0==n.x?0:r.width,y:0==n.y?0:-i.height,onUpdate:a,ease:Quint.easeOut}),r}function makeCarCanvas(e,a){var s=makeImage(e),t=s.width,i=s.height,r=document.createElement("canvas");r.width=t,r.height=i;var o=r.getContext("2d");a?(o.drawImage(e.hasOwnProperty("body")?e.body.src:e.src,0,0),o.globalCompositeOperation="destination-out",removePixels(r,"a > 254")):(o.drawImage(e.hasOwnProperty("body")?e.body.src:e.src,0,0),o.globalCompositeOperation="destination-out",removePixels(r,"a < 255"));var n=canvas.display.canvas({buffer:r});return n.x-=.5*t,n.y-=.5*i,n}function makeCarAlt(e){function a(e){return{x:t.x,y:t.y,width:t.width*e,height:t.height*e}}var s=e,t=canvas.display.rectangle({});t.opacity=0,s.hasOwnProperty("scaling")&&(t.scalingX=t.scalingY=s.scaling);var i,r;switch(!isHorizontal()){case!0:var o=makeCarCanvas(s,!0),n=makeCarCanvas(s),c=n,g=makeImage(s);t.width=g.width,t.height=g.height;var l=canvas.display.rectangle({width:c.width,height:c.height,origin:{x:"center",y:"center"}}),r=makeImage(s);if(s.hasOwnProperty("shadow")){s.shadow.origin={x:"center",y:"center"};var o=makeImage(s.shadow);r.addChild(o)}r.addChild(o),r.addChild(l),l.addChild(c),_g.carBody=l,_g.carShapeTemp=c,i=function(){t.opacity=1,_g.disableFullAnimation||TweenLite.from(r,2,{opacity:1,scalingX:.8,scalingY:.8,ease:Quint.easeOut}),m&&(m.frame=1,m.startAnimation())},r.x=.5*r.width,r.y=.5*r.height,t.addChild(r);break;default:r=makeImage(s);var o=makeCarCanvas(s,!0),n=makeCarCanvas(s),c=n,g=makeImage(s);t.width=g.width,t.height=g.height;var l=canvas.display.rectangle({width:c.width,height:c.height,origin:{x:"center",y:"center"}});if(r.addChild(o),r.addChild(l),l.addChild(c),_g.carBody=l,_g.carShapeTemp=c,s.hasOwnProperty("hub")){s.hub.origin={x:"center",y:"center"};var h=makeImage(s.hub),d=canvas.display.rectangle({x:s.hub.a.x,y:s.hub.a.y,scalingX:s.hub.a.hasOwnProperty("scalingX")?s.hub.a.scalingX:1,scalingY:s.hub.a.hasOwnProperty("scalingY")?s.hub.a.scalingY:1,origin:{x:"center",y:"center"}});d.x-=.5*r.width,d.y-=.5*r.height,d.addChild(h),r.addChild(d);var _=makeImage(s.hub),w=canvas.display.rectangle({x:s.hub.b.x,y:s.hub.b.y,scalingX:s.hub.b.hasOwnProperty("scalingX")?s.hub.b.scalingX:1,scalingY:s.hub.b.hasOwnProperty("scalingY")?s.hub.b.scalingY:1,origin:{x:"center",y:"center"}});w.x-=.5*r.width,w.y-=.5*r.height,w.addChild(_),r.addChild(w)}r.x=.5*r.width,r.y=.5*r.height,t.addChild(r),i=function(){var e=2.75,a={y:2,rotation:-.33};t.opacity=1;var i=s.start.amp,o=s.start.angle*Math.PI/180,n={x:r.x+Math.cos(o)*i,y:r.y+Math.sin(o)*i},c=s.start.scale,g={x:l.x,y:l.y},d=s.hasOwnProperty("scaling")?s.scaling:1;r.scalingX=r.scalingY=d,_g.disableFullAnimation||(TweenLite.to(l,2.75*.55,{y:g.y+a.y,rotation:a.rotation,ease:Quad.easeInOut,delay:0}),TweenLite.to(l,.6875,{y:g.y,rotation:0,ease:Quad.easeInOut,delay:2.75*.55}),TweenLite.from(r,2.75,{x:n.x,y:n.y,scalingX:c*d,scalingY:c*d,ease:Quint.easeOut}),TweenLite.from(h,2.8875,{rotation:360,ease:Quint.easeOut}),TweenLite.from(_,2.8875,{rotation:360,ease:Quint.easeOut}),TweenLite.to([h,_],2,{opacity:0,ease:Quad.easeInOut,delay:2.475})),m&&(m.frame=1,m.startAnimation())};break}var m;if(s.hasOwnProperty("shine")&&(m=canvas.display.sprite({x:0,y:0,origin:{x:"center",y:"center"},image:s.shine.src,generate:!0,width:r.width,height:r.height,direction:"x",duration:s.shine.duration,numFrames:s.shine.numFrames,loop:!1,opacity:.15}),r.addChild(m)),s.hasOwnProperty("night")){var y=makeImage(s.night,r);y.x-=.5*r.width,y.y-=.5*r.height,m&&(m.opacity=.08)}if(s.hasOwnProperty("boundingBox")){var x=1,p=s.boundingBox,u=a(x),f=p.width/u.width;t.scalingX=t.scalingY=x*f,x=f,u=a(x),u.height>p.height&&(f=p.height/u.height,x*=f,t.scalingX=t.scalingY=x),u=a(x),TweenLite.set(t,{x:p.x+.5*p.width-.5*u.width,y:p.y+.5*p.height-.5*u.height}),t.scaling=x}return t.animate=i,t}function srcTypeImageFrom(e){var a=new Image;return"object"==typeof e?a=e:a.src=e,a}function makeCarColorLayer(e){var a=_g.assets,s=makeImageTinted(a.model_shape.src,_g.swatches.colors[e].car),t=srcTypeImageFrom(a.model_overlay.src),i=srcTypeImageFrom(a.model_screen.src),r=document.createElement("canvas");r.width=a.model.width,r.height=a.model.height;var o=document.createElement("canvas");o.width=a.model.width,o.height=a.model.height,r.getContext("2d").drawImage(t,0,0),o.getContext("2d").drawImage(i,0,0);var n=document.createElement("canvas");n.width=a.model.width,n.height=a.model.height;var c=n.getContext("2d");return c.drawImage(s,0,0),o.getContext("2d").blendOnto(c,"screen"),r.getContext("2d").blendOnto(c,"overlay"),canvas.display.imageTinted({buffer:n,width:a.model.width,height:a.model.height,x:.5*-a.model.width,y:.5*-a.model.height})}function makeHub(e,a){var s=_g.assets,t=a||1,i=canvas.display.image({origin:{x:"center",y:"center"},image:s.model.hub.src}),r=canvas.display.rectangle({origin:{x:"center",y:"center"},x:e.x*t,y:e.y*t,width:s.model.hub.width,height:s.model.hub.height,scalingX:e.scalingX*t,scalingY:e.scalingY*t});return r.addChild(i),r}function setCarColor(e,a){var s=_g.assets,t=_g.carShapeTemp,i;i=canvas.display.rectangle({}),i.opacity=0,_g.carBody.addChild(i),_g.carShapeTemp=i;var r=JSON.parse(_g.feedConfig.resources).imagesModels+_g.fileNameSizeModel+"_"+_g.swatches.colors[e].id+(_g.isHighDensity?"_Retina":"")+".png";_g.extras.hasOwnProperty("isNight")&&(r=_g.isHighDensity?r.split("_Retina.").join("_Night_Retina."):r.split(".").join("_Night."));var o=new Image;o.src=r,o.onload=function(){_g.assets.model_animation.hasOwnProperty("mask")?(_g.assets.model_animation.src=this,i.addChild(makeCarCanvas(_g.assets.model_animation))):i.addChild(makeImage({src:this,origin:{x:"center",y:"center"}})),t?(TweenLite.to(i,.5,{opacity:1,ease:Quad.easeInOut}),TweenLite.to(t,.5,{opacity:0,ease:Quad.easeInOut,onComplete:removeChildProxy,onCompleteParams:[t],delay:.25})):TweenLite.to(i,"none"==a?0:.5,{opacity:1,ease:Quad.easeInOut})}}function showSwatch(e,a,s){var t=e;if("next"==t?(t=_g.swatchCurrentIndex+1)>=_g.swatches.array.length&&(t=0):"prev"==t&&(t=_g.swatchCurrentIndex-1)<0&&(t=_g.swatches.array.length-1),a||TweenLite.killDelayedCallsTo(showSwatch),t!=_g.swatchCurrentIndex){var i=_g.assets;_g.hasOwnProperty("swatchSet"),setCarColor(t),_g.hasOwnProperty("swatchCurrent")&&(TweenLite.to(_g.swatchCurrent.select,.5,{opacity:0,y:_g.swatchCurrent.select.orig.y+_g.swatchCurrent.select.height,ease:Quint.easeOut}),TweenLite.to(_g.swatchCurrent.selectRed,.5,{opacity:0,y:0,ease:Quint.easeOut})),_g.swatchCurrent=_g.swatches.array[t],_g.swatchCurrentIndex=t,TweenLite.to(_g.swatchCurrent.select,.25,{opacity:1,y:_g.swatchCurrent.select.orig.y,startAt:{opacity:0,y:_g.swatchCurrent.select.orig.y+_g.swatchCurrent.select.height},ease:Quint.easeOut}),TweenLite.to(_g.swatchCurrent.selectRed,.25,{opacity:1,y:_g.swatchCurrent.selectRed.orig.y,startAt:{opacity:0,y:0},ease:Quint.easeOut}),s||setSwatchLabel(t)}}function setSwatchLabel(e){var a=_g.swatches.labelContainer,s=_g.swatchLabelTemp,t=addHtmlText({x:_g.assets.swatches.color_label.x,y:_g.assets.swatches.color_label.y,width:_g.assets.swatches.color_label.width,fontSize:_g.assets.swatches.color_label.fontSize,text:_g.swatches.colors[e].text.toUpperCase().split("&NBSP;").join("&nbsp;"),color:_g.assets.swatches.color_label.color,opacity:0,parent:_g.layers.div1,fontWeight:"bold"});Math.round(parseInt(t.offsetHeight)/parseInt(t.style.fontSize))>1&&TweenLite.set(t,{y:"-="+String(Math.round(1*parseInt(t.style.fontSize)))}),TweenLite.from(t,.5,{opacity:0,ease:Quad.easeInOut}),s&&TweenLite.to(s,.5,{opacity:0,ease:Quad.easeInOut}),_g.swatchLabelTemp=t}function makeSwatches(){function e(e){e.intro.startAnimation()}function a(e){removeChildProxy(e.intro),e.children[1].fill=e.children[1].fillTemp}_g.swatches.array=[];var s=canvas.display.rectangle({});s.x=_g.assets.swatches.x,s.y=_g.assets.swatches.y;var t={x:0,y:0};if("160x600"==_g.doc.size)switch(_g.swatches.colors.length){case 4:_g.assets.swatches.spacing.x=_g.assets.swatches.width/4;break;case 6:_g.assets.swatches.spacing.x=_g.assets.swatches.width/4;break;default:break}else if("728x90"==_g.doc.size)switch(_g.swatches.colors.length){case 3:_g.assets.swatches.spacing.x=_g.assets.swatches.width/3;break;default:break}_g.assets.swatches.spacing.x=_g.assets.swatches.width/_g.swatches.colors.length;for(var i=0;i<_g.swatches.colors.length;i++){switch(_g.doc.size){case"160x600":var r=5;switch(_g.swatches.colors.length){case 6:r=4;break;default:break}i==r&&(t.x=0,t.y=1);break;default:break}var o=makeSwatch(i);o.x=t.x*_g.assets.swatches.spacing.x,o.y=t.y*(30*_g.scaleForDensity),s.addChild(o),_g.swatches.array.push(o);var n=.75+.05*i;if(_g.extras.hasOwnProperty("alt")){switch(_g.extras.alt){case"A":break;case"B":case"C":TweenLite.from(o.children[2],.5,{opacity:0,ease:Quad.easeInOut,delay:n+.33}),TweenLite.delayedCall(n,e,[o]),TweenLite.delayedCall(n+.4,a,[o]);break;default:break}TweenLite.from(o,.66,{opacity:0,x:o.x+_g.doc.width,ease:Quint.easeOut,delay:n})}else TweenLite.from(o,.66,{opacity:0,y:o.y+o.height,ease:Quint.easeInOut,delay:n});t.x++}s.width=_g.swatches.colors.length*_g.assets.swatches.spacing.x;var c=canvas.display.rectangle({x:0,y:0,opacity:0});return TweenLite.to(c,.25,{opacity:1,ease:Quad.easeInOut,delay:1}),_g.layers.layer0.addChild(c),_g.swatches.labelContainer=c,s}function makeSwatch(e){var a={width:_g.assets.swatches.spacing.x,height:_g.assets.swatches.spacing.y},s=canvas.display.rectangle({width:a.width,height:a.height,clipChildren:!1}),t=canvas.display.rectangle({width:a.width,height:a.height});if(t.fillTemp="#"+_g.swatches.colors[e].swatch,_g.extras.hasOwnProperty("alt"))switch(_g.extras.alt){case"A":t.fill=t.fillTemp;break;case"B":case"C":var i=new Image;i.src=makeImageTinted(_g.assets.swatches.src,_g.swatches.colors[e].swatch).toDataURL("image/png",1);var r=canvas.display.sprite({x:-15,y:-15,origin:{x:0,y:0},image:i,generate:!0,width:82,height:66,direction:"x",duration:20,numFrames:25,loop:!1});t.addChild(r),s.intro=r;break;default:break}else t.fill=t.fillTemp;var o;_g.assets.swatches.hasOwnProperty("bevel")&&(o=canvas.display.rectangle({width:a.width,height:_g.assets.swatches.bevel.height,fill:"#000000",opacity:.2,y:t.height-_g.assets.swatches.bevel.height}));var n=canvas.display.rectangle({width:a.width,height:_g.assets.swatches.select.height,opacity:0,y:_g.assets.swatches.select.spacing.y,fill:"#ed0000"});n.orig={y:_g.assets.swatches.select.spacing.y};var c=makeImage(_g.assets.swatchCheck);if(c.opacity=0,c.x=.5*s.width-.5*c.width,c.y=.5*s.height-.5*c.height,c.orig={x:c.x,y:c.y},s.addChild(t),s.select=c,s.selectRed=n,o&&s.addChild(o),_g.swatches.colors[e].hasOwnProperty("isTwoTone")){var g=makeImage(_g.assets["swatchTwoTone"+e],s);g.width=s.width,g.height=s.height}return s.addChild(c),s.addChild(n),s.bind("mouseenter tap",function(){Enabler.counter("Manual Color Swap",!0),showSwatch(e),canvas.mouse.cursor("pointer")}),s.bind("mouseleave",function(){canvas.mouse.cursor("default")}),s}var _g={disableFullAnimation:!0,version:{},assets:{},layers:{}},canvas,preloader={},isDev=!1,feed;