/** the below license covers all three libraries: dgrid, dstore, dojo
The "New" BSD License
*********************

Copyright (c) 2010-2016, The Dojo Foundation
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

  * Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
  * Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.
  * Neither the name of the Dojo Foundation nor the names of its contributors
    may be used to endorse or promote products derived from this software
    without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

define("dojo/has",["require","module"],function(e,t){var n=e.has||function(){};if(!n("dojo-has-api")){var r="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document,i=function(){return this}(),o=r&&document,s=o&&o.createElement("DiV"),a=t.config&&t.config()||{};n=function(e){return"function"==typeof a[e]?a[e]=a[e](i,o,s):a[e]},n.cache=a,n.add=function(e,t,r,i){return("undefined"==typeof a[e]||i)&&(a[e]=t),r&&n(e)},n.add("host-browser",r),n.add("host-node","object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8),n.add("host-rhino","function"==typeof load&&("function"==typeof Packages||"object"==typeof Packages)),n.add("dom",r),n.add("dojo-dom-ready-api",1),n.add("dojo-sniff",1)}if(n("host-browser")){n.add("dom-addeventlistener",!!document.addEventListener),n.add("touch","ontouchstart"in document||"onpointerdown"in document&&navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints),n.add("touch-events","ontouchstart"in document),n.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window),n.add("MSPointer",window.navigator.msPointerEnabled),n.add("device-width",screen.availWidth||innerWidth);var l=document.createElement("form");n.add("dom-attributes-explicit",0==l.attributes.length),n.add("dom-attributes-specified-flag",l.attributes.length>0&&l.attributes.length<40)}return n.clearElement=function(e){return e.innerHTML="",e},n.normalize=function(e,t){var r=e.match(/[\?:]|[^:\?]*/g),i=0,o=function(e){var t=r[i++];return":"==t?0:"?"==r[i++]?!e&&n(t)?o():(o(!0),o(e)):t||0};return e=o(),e&&t(e)},n.load=function(e,t,n){e?t([e],n):n()},n}),define("dojo/_base/config",["../has","require"],function(e,t){var n={};if(e("dojo-config-api")){var r,i=t.rawConfig;for(r in i)n[r]=i[r]}else{var o=function(t,n,i){for(r in t)"has"!=r&&e.add(n+r,t[r],0,i)},s=function(){return this}();n=e("dojo-loader")?t.rawConfig:s.dojoConfig||s.djConfig||{},o(n,"config",1),o(n.has,"",1)}if(!n.locale&&"undefined"!=typeof navigator){var a=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage;a&&(n.locale=a.toLowerCase())}return n}),define("dojo/_base/kernel",["../has","./config","require","module"],function(e,t,n,r){var i,o,s,a=function(){return this}(),l={},u={},d={config:t,global:a,dijit:l,dojox:u},c={dojo:["dojo",d],dijit:["dijit",l],dojox:["dojox",u]},f=n.map&&n.map[r.id.match(/[^\/]+/)[0]];for(o in f)c[o]?c[o][0]=f[o]:c[o]=[f[o],{}];for(o in c)s=c[o],s[1]._scopeName=s[0],t.noGlobals||(a[s[0]]=s[1]);d.scopeMap=c,d.baseUrl=d.config.baseUrl=n.baseUrl,d.isAsync=!e("dojo-loader")||n.async,d.locale=t.locale;var h="$Rev: 91fa0cb $".match(/[0-9a-f]{7,}/);if(d.version={major:1,minor:11,patch:2,flag:"",revision:h?h[0]:NaN,toString:function(){var e=d.version;return e.major+"."+e.minor+"."+e.patch+e.flag+" ("+e.revision+")"}},e.add("extend-dojo",1),e("csp-restrictions")||Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(d),e("host-rhino")?d.exit=function(e){quit(e)}:d.exit=function(){},e("host-webworker")||e.add("dojo-guarantee-console",1),e("dojo-guarantee-console")){e.add("console-as-object",function(){return Function.prototype.bind&&console&&"object"==typeof console.log}),"undefined"!=typeof console||(console={});var p,g=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];for(i=0;p=g[i++];)console[p]?e("console-as-object")&&(console[p]=Function.prototype.bind.call(console[p],console)):!function(){var e=p+"";console[e]="log"in console?function(){var t=Array.prototype.slice.call(arguments);t.unshift(e+":"),console.log(t.join(" "))}:function(){},console[e]._fake=!0}()}if(e.add("dojo-debug-messages",!!t.isDebug),d.deprecated=d.experimental=function(){},e("dojo-debug-messages")&&(d.deprecated=function(e,t,n){var r="DEPRECATED: "+e;t&&(r+=" "+t),n&&(r+=" -- will be removed in version: "+n),console.warn(r)},d.experimental=function(e,t){var n="EXPERIMENTAL: "+e+" -- APIs subject to change without notice.";t&&(n+=" "+t),console.warn(n)}),e.add("dojo-modulePaths",1),e("dojo-modulePaths")&&t.modulePaths){d.deprecated("dojo.modulePaths","use paths configuration");var m={};for(o in t.modulePaths)m[o.replace(/\./g,"/")]=t.modulePaths[o];n({paths:m})}return e.add("dojo-moduleUrl",1),e("dojo-moduleUrl")&&(d.moduleUrl=function(e,t){d.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var r=null;return e&&(r=n.toUrl(e.replace(/\./g,"/")+(t?"/"+t:"")+"/*.*").replace(/\/\*\.\*/,"")+(t?"":"/")),r}),d._hasResource={},d}),define("dojo/sniff",["./has"],function(e){if(e("host-browser")){var t=navigator,n=t.userAgent,r=t.appVersion,i=parseFloat(r);if(e.add("air",n.indexOf("AdobeAIR")>=0),e.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),e.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),e.add("khtml",r.indexOf("Konqueror")>=0?i:void 0),e.add("edge",parseFloat(n.split("Edge/")[1])||void 0),e.add("opr",parseFloat(n.split("OPR/")[1])||void 0),e.add("webkit",!e("wp")&&!e("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),e.add("chrome",!e("edge")&&!e("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),e.add("android",!e("wp")&&parseFloat(n.split("Android ")[1])||void 0),e.add("safari",!(r.indexOf("Safari")>=0)||e("wp")||e("chrome")||e("android")||e("edge")||e("opr")?void 0:parseFloat(r.split("Version/")[1])),e.add("mac",r.indexOf("Macintosh")>=0),e.add("quirks","BackCompat"==document.compatMode),!e("wp")&&n.match(/(iPhone|iPod|iPad)/)){var o=RegExp.$1.replace(/P/,"p"),s=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",a=parseFloat(s.replace(/_/,".").replace(/_/g,""));e.add(o,a),e.add("ios",a)}if(e.add("bb",(n.indexOf("BlackBerry")>=0||n.indexOf("BB10")>=0)&&parseFloat(n.split("Version/")[1])||void 0),e.add("trident",parseFloat(r.split("Trident/")[1])||void 0),e.add("svg","undefined"!=typeof SVGAngle),!e("webkit")){if(n.indexOf("Opera")>=0&&e.add("opera",i>=9.8?parseFloat(n.split("Version/")[1])||i:i),!(n.indexOf("Gecko")>=0)||e("wp")||e("khtml")||e("trident")||e("edge")||e.add("mozilla",i),e("mozilla")&&e.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0),document.all&&!e("opera")){var l=parseFloat(r.split("MSIE ")[1])||void 0,u=document.documentMode;u&&5!=u&&Math.floor(l)!=u&&(l=u),e.add("ie",l)}e.add("wii","undefined"!=typeof opera&&opera.wiiremote)}}return e}),define("dojo/_base/lang",["./kernel","../has","../sniff"],function(e,t){t.add("bug-for-in-skips-shadowed",function(){for(var e in{toString:1})return 0;return 1});var n=t("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],r=n.length,i=function(t,n,r){r||(r=t[0]&&e.scopeMap[t[0]]?e.scopeMap[t.shift()][1]:e.global);try{for(var i=0;i<t.length;i++){var o=t[i];if(!(o in r)){if(!n)return;r[o]={}}r=r[o]}return r}catch(s){}},o=Object.prototype.toString,s=function(e,t,n){return(n||[]).concat(Array.prototype.slice.call(e,t||0))},a=/\{([^\}]+)\}/g,l={_extraNames:n,_mixin:function(e,i,o){var s,a,l,u={};for(s in i)a=i[s],s in e&&(e[s]===a||s in u&&u[s]===a)||(e[s]=o?o(a):a);if(t("bug-for-in-skips-shadowed")&&i)for(l=0;r>l;++l)s=n[l],a=i[s],s in e&&(e[s]===a||s in u&&u[s]===a)||(e[s]=o?o(a):a);return e},mixin:function(e,t){e||(e={});for(var n=1,r=arguments.length;r>n;n++)l._mixin(e,arguments[n]);return e},setObject:function(e,t,n){var r=e.split("."),o=r.pop(),s=i(r,!0,n);return s&&o?s[o]=t:void 0},getObject:function(e,t,n){return e?i(e.split("."),t,n):n},exists:function(e,t){return void 0!==l.getObject(e,!1,t)},isString:function(e){return"string"==typeof e||e instanceof String},isArray:Array.isArray||function(e){return"[object Array]"==o.call(e)},isFunction:function(e){return"[object Function]"===o.call(e)},isObject:function(e){return void 0!==e&&(null===e||"object"==typeof e||l.isArray(e)||l.isFunction(e))},isArrayLike:function(e){return!!e&&!l.isString(e)&&!l.isFunction(e)&&!(e.tagName&&"form"==e.tagName.toLowerCase())&&(l.isArray(e)||isFinite(e.length))},isAlien:function(e){return e&&!l.isFunction(e)&&/\{\s*\[native code\]\s*\}/.test(String(e))},extend:function(e,t){for(var n=1,r=arguments.length;r>n;n++)l._mixin(e.prototype,arguments[n]);return e},_hitchArgs:function(t,n){var r=l._toArray(arguments,2),i=l.isString(n);return function(){var o=l._toArray(arguments),s=i?(t||e.global)[n]:n;return s&&s.apply(t||this,r.concat(o))}},hitch:function(t,n){if(arguments.length>2)return l._hitchArgs.apply(e,arguments);if(n||(n=t,t=null),l.isString(n)){if(t=t||e.global,!t[n])throw['lang.hitch: scope["',n,'"] is null (scope="',t,'")'].join("");return function(){return t[n].apply(t,arguments||[])}}return t?function(){return n.apply(t,arguments||[])}:n},delegate:function(){function e(){}return function(t,n){e.prototype=t;var r=new e;return e.prototype=null,n&&l._mixin(r,n),r}}(),_toArray:t("ie")?function(){function e(e,t,n){for(var r=n||[],i=t||0;i<e.length;i++)r.push(e[i]);return r}return function(t){return(t.item?e:s).apply(this,arguments)}}():s,partial:function(t){var n=[null];return l.hitch.apply(e,n.concat(l._toArray(arguments)))},clone:function(e){if(!e||"object"!=typeof e||l.isFunction(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);var t,n,r;if(l.isArray(e))for(t=[],n=0,r=e.length;r>n;++n)n in e&&(t[n]=l.clone(e[n]));else t=e.constructor?new e.constructor:{};return l._mixin(t,e,l.clone)},trim:String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(e,t,n){return e.replace(n||a,l.isFunction(t)?t:function(e,n){return l.getObject(n,!1,t)})}};return t("extend-dojo")&&l.mixin(e,l),l}),define("dojo/_base/declare",["./kernel","../has","./lang"],function(e,t,n){function r(e,t){throw new Error("declare"+(t?" "+t:"")+": "+e)}function i(e,t){for(var n,i,o,s,a,l,u,d,c=[],f=[{cls:0,refs:[]}],h={},p=1,g=e.length,m=0;g>m;++m){for(o=e[m],o?"[object Function]"!=C.call(o)&&r("mixin #"+m+" is not a callable constructor.",t):r("mixin #"+m+" is unknown. Did you use dojo.require to pull it in?",t),i=o._meta?o._meta.bases:[o],s=0,n=i.length-1;n>=0;--n)a=i[n].prototype,a.hasOwnProperty("declaredClass")||(a.declaredClass="uniqName_"+S++),u=a.declaredClass,h.hasOwnProperty(u)||(h[u]={count:0,refs:[],cls:i[n]},++p),l=h[u],s&&s!==l&&(l.refs.push(s),++s.count),s=l;++s.count,f[0].refs.push(s)}for(;f.length;){for(s=f.pop(),c.push(s.cls),--p;d=s.refs,1==d.length;){if(s=d[0],!s||--s.count){s=0;break}c.push(s.cls),--p}if(s)for(m=0,g=d.length;g>m;++m)s=d[m],--s.count||f.push(s)}return p&&r("can't build consistent linearization",t),o=e[0],c[0]=o?o._meta&&o===c[c.length-o._meta.bases.length]?o._meta.bases.length:1:0,c}function o(e,t,n){var i,o,s,a,l,u,d,c,f,h=this._inherited=this._inherited||{};if("string"==typeof e&&(i=e,e=t,t=n),n=0,a=e.callee,i=i||a.nom,i||r("can't deduce a name to call inherited()",this.declaredClass),l=this.constructor._meta,s=l.bases,f=h.p,i!=N){if(h.c!==a&&(f=0,u=s[0],l=u._meta,l.hidden[i]!==a)){o=l.chains,o&&"string"==typeof o[i]&&r("calling chained method with inherited: "+i,this.declaredClass);do if(l=u._meta,d=u.prototype,l&&(d[i]===a&&d.hasOwnProperty(i)||l.hidden[i]===a))break;while(u=s[++f]);f=u?f:-1}if(u=s[++f])if(d=u.prototype,u._meta&&d.hasOwnProperty(i))n=d[i];else{c=x[i];do if(d=u.prototype,n=d[i],n&&(u._meta?d.hasOwnProperty(i):n!==c))break;while(u=s[++f])}n=u&&n||x[i]}else{if(h.c!==a&&(f=0,l=s[0]._meta,l&&l.ctor!==a)){for(o=l.chains,o&&"manual"===o.constructor||r("calling chained constructor with inherited",this.declaredClass);(u=s[++f])&&(l=u._meta,!l||l.ctor!==a););f=u?f:-1}for(;(u=s[++f])&&(l=u._meta,!(n=l?l.ctor:u)););n=u&&n}return h.c=n,h.p=f,n?t===!0?n:n.apply(this,t||e):void 0}function s(e,t){return"string"==typeof e?this.__inherited(e,t,!0):this.__inherited(e,!0)}function a(e,t,n){var r=this.getInherited(e,t);return r?r.apply(this,n||t||e):void 0}function l(e){for(var t=this.constructor._meta.bases,n=0,r=t.length;r>n;++n)if(t[n]===e)return!0;return this instanceof e}function u(e,r){for(var i in r)i!=N&&r.hasOwnProperty(i)&&(e[i]=r[i]);if(t("bug-for-in-skips-shadowed"))for(var o=n._extraNames,s=o.length;s;)i=o[--s],i!=N&&r.hasOwnProperty(i)&&(e[i]=r[i])}function d(e,r){var i,o;for(i in r)o=r[i],o===x[i]&&i in x||i==N||("[object Function]"==C.call(o)&&(o.nom=i),e[i]=o);if(t("bug-for-in-skips-shadowed")&&r)for(var s=n._extraNames,a=s.length;a;)i=s[--a],o=r[i],o===x[i]&&i in x||i==N||("[object Function]"==C.call(o)&&(o.nom=i),e[i]=o);return e}function c(e){return _.safeMixin(this.prototype,e),this}function f(e,t){return e instanceof Array||"function"==typeof e||(t=e,e=void 0),t=t||{},e=e||[],_([this].concat(e),t)}function h(e,t){return function(){var n,r,i,o,s=arguments,a=s,l=s[0],u=e.length;if(!(this instanceof s.callee))return y(s);if(t&&(l&&l.preamble||this.preamble))for(o=new Array(e.length),o[0]=s,r=0;l=s[0],l&&(n=l.preamble,n&&(s=n.apply(this,s)||s)),n=e[r].prototype,n=n.hasOwnProperty("preamble")&&n.preamble,n&&(s=n.apply(this,s)||s),++r!=u;)o[r]=s;for(r=u-1;r>=0;--r)n=e[r],i=n._meta,n=i?i.ctor:n,n&&n.apply(this,o?o[r]:s);n=this.postscript,n&&n.apply(this,a)}}function p(e,t){return function(){var n,r=arguments,i=r,o=r[0];return this instanceof r.callee?(t&&(o&&(n=o.preamble,n&&(i=n.apply(this,i)||i)),n=this.preamble,n&&n.apply(this,i)),e&&e.apply(this,r),n=this.postscript,void(n&&n.apply(this,r))):y(r)}}function g(e){return function(){var t,n,r=arguments,i=0;if(!(this instanceof r.callee))return y(r);for(;t=e[i];++i)if(n=t._meta,t=n?n.ctor:t){t.apply(this,r);break}t=this.postscript,t&&t.apply(this,r)}}function m(e,t,n){return function(){var r,i,o,s=0,a=1;for(n&&(s=t.length-1,a=-1);r=t[s];s+=a)i=r._meta,o=(i?i.hidden:r.prototype)[e],o&&o.apply(this,arguments)}}function v(e){b.prototype=e.prototype;var t=new b;return b.prototype=null,t}function y(e){var t=e.callee,n=v(t);return t.apply(n,e),n}function _(e,t,a){"string"!=typeof e&&(a=t,t=e,e=""),a=a||{};var d,y,b,S,T,E,I,P=1,k=t;if("[object Array]"==C.call(t)?(E=i(t,e),b=E[0],P=E.length-b,t=E[P]):(E=[0],t?"[object Function]"==C.call(t)?(b=t._meta,E=E.concat(b?b.bases:t)):r("base class is not a callable constructor.",e):null!==t&&r("unknown base class. Did you use dojo.require to pull it in?",e)),t)for(y=P-1;d=v(t),y;--y)b=E[y],(b._meta?u:w)(d,b.prototype),S=new Function,S.superclass=t,S.prototype=d,t=d.constructor=S;else d={};for(_.safeMixin(d,a),b=a.constructor,b!==x.constructor&&(b.nom=N,d.constructor=b),y=P-1;y;--y)b=E[y]._meta,b&&b.chains&&(I=w(I||{},b.chains));if(d["-chains-"]&&(I=w(I||{},d["-chains-"])),b=!I||!I.hasOwnProperty(N),E[0]=S=I&&"manual"===I.constructor?g(E):1==E.length?p(a.constructor,b):h(E,b),S._meta={bases:E,hidden:a,chains:I,parents:k,ctor:a.constructor},S.superclass=t&&t.prototype,S.extend=c,S.createSubclass=f,S.prototype=d,d.constructor=S,d.getInherited=s,d.isInstanceOf=l,d.inherited=j,d.__inherited=o,e&&(d.declaredClass=e,n.setObject(e,S)),I)for(T in I)d[T]&&"string"==typeof I[T]&&T!=N&&(b=d[T]=m(T,E,"after"===I[T]),b.nom=T);return S}var b,w=n.mixin,x=Object.prototype,C=x.toString,S=0,N="constructor";b=t("csp-restrictions")?function(){}:new Function;var j=e.config.isDebug?a:o;return e.safeMixin=_.safeMixin=d,e.declare=_,_}),define("dojo/_base/window",["./kernel","./lang","../sniff"],function(e,t,n){var r={global:e.global,doc:e.global.document||null,body:function(t){return t=t||e.doc,t.body||t.getElementsByTagName("body")[0]},setContext:function(t,n){e.global=r.global=t,e.doc=r.doc=n},withGlobal:function(t,n,i,o){var s=e.global;try{return e.global=r.global=t,r.withDoc.call(null,t.document,n,i,o)}finally{e.global=r.global=s}},withDoc:function(t,i,o,s){var a,l,u,d=r.doc,c=n("quirks"),f=n("ie");try{return e.doc=r.doc=t,e.isQuirks=n.add("quirks","BackCompat"==e.doc.compatMode,!0,!0),n("ie")&&(u=t.parentWindow)&&u.navigator&&(a=parseFloat(u.navigator.appVersion.split("MSIE ")[1])||void 0,l=t.documentMode,l&&5!=l&&Math.floor(a)!=l&&(a=l),e.isIE=n.add("ie",a,!0,!0)),o&&"string"==typeof i&&(i=o[i]),i.apply(o,s||[])}finally{e.doc=r.doc=d,e.isQuirks=n.add("quirks",c,!0,!0),e.isIE=n.add("ie",f,!0,!0)}}};return n("extend-dojo")&&t.mixin(e,r),r}),define("dojo/dom",["./sniff","./_base/window","./_base/kernel"],function(e,t,n){if(e("ie")<=7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(r){}var i={};e("ie")?i.byId=function(e,n){if("string"!=typeof e)return e;var r=n||t.doc,i=e&&r.getElementById(e);if(i&&(i.attributes.id.value==e||i.id==e))return i;var o=r.all[e];(!o||o.nodeName)&&(o=[o]);for(var s=0;i=o[s++];)if(i.attributes&&i.attributes.id&&i.attributes.id.value==e||i.id==e)return i}:i.byId=function(e,n){return("string"==typeof e?(n||t.doc).getElementById(e):e)||null};var o=n.global.document||null;e.add("dom-contains",!(!o||!o.contains)),i.isDescendant=e("dom-contains")?function(e,t){return!(!(t=i.byId(t))||!t.contains(i.byId(e)))}:function(e,t){try{for(e=i.byId(e),t=i.byId(t);e;){if(e==t)return!0;e=e.parentNode}}catch(n){}return!1},e.add("css-user-select",function(e,t,n){if(!n)return!1;var r=n.style,i=["Khtml","O","Moz","Webkit"],o=i.length,s="userSelect";do if("undefined"!=typeof r[s])return s;while(o--&&(s=i[o]+"UserSelect"));return!1});var s=e("css-user-select");return i.setSelectable=s?function(e,t){i.byId(e).style[s]=t?"":"none"}:function(e,t){e=i.byId(e);var n=e.getElementsByTagName("*"),r=n.length;if(t)for(e.removeAttribute("unselectable");r--;)n[r].removeAttribute("unselectable");else for(e.setAttribute("unselectable","on");r--;)n[r].setAttribute("unselectable","on")},i}),define("dojo/dom-style",["./sniff","./dom"],function(e,t){function n(e,t,n){if(t=t.toLowerCase(),"auto"==n){if("height"==t)return e.offsetHeight;if("width"==t)return e.offsetWidth}if("fontweight"==t)switch(n){case 700:return"bold";case 400:default:return"normal"}return t in d||(d[t]=c.test(t)),d[t]?o(e,n):n}var r,i={};r=e("webkit")?function(e){var t;if(1==e.nodeType){var n=e.ownerDocument.defaultView;t=n.getComputedStyle(e,null),!t&&e.style&&(e.style.display="",t=n.getComputedStyle(e,null))}return t||{}}:e("ie")&&(e("ie")<9||e("quirks"))?function(e){return 1==e.nodeType&&e.currentStyle?e.currentStyle:{}}:function(e){return 1==e.nodeType?e.ownerDocument.defaultView.getComputedStyle(e,null):{}},i.getComputedStyle=r;var o;o=e("ie")?function(e,t){if(!t)return 0;if("medium"==t)return 4;if(t.slice&&"px"==t.slice(-2))return parseFloat(t);var n=e.style,r=e.runtimeStyle,i=e.currentStyle,o=n.left,s=r.left;r.left=i.left;try{n.left=t,t=n.pixelLeft}catch(a){t=0}return n.left=o,r.left=s,t}:function(e,t){return parseFloat(t)||0},i.toPixelValue=o;var s="DXImageTransform.Microsoft.Alpha",a=function(e,t){try{return e.filters.item(s)}catch(n){return t?{}:null}},l=e("ie")<9||e("ie")<10&&e("quirks")?function(e){try{return a(e).Opacity/100}catch(t){return 1}}:function(e){return r(e).opacity},u=e("ie")<9||e("ie")<10&&e("quirks")?function(e,t){""===t&&(t=1);var n=100*t,r=1===t;if(r?(e.style.zoom="",a(e)&&(e.style.filter=e.style.filter.replace(new RegExp("\\s*progid:"+s+"\\([^\\)]+?\\)","i"),""))):(e.style.zoom=1,a(e)?a(e,1).Opacity=n:e.style.filter+=" progid:"+s+"(Opacity="+n+")",a(e,1).Enabled=!0),"tr"==e.tagName.toLowerCase())for(var i=e.firstChild;i;i=i.nextSibling)"td"==i.tagName.toLowerCase()&&u(i,t);return t}:function(e,t){return e.style.opacity=t},d={left:!0,top:!0},c=/margin|padding|width|height|max|min|offset/,f={cssFloat:1,styleFloat:1,"float":1};return i.get=function(e,r){var o=t.byId(e),s=arguments.length,a="opacity"==r;if(2==s&&a)return l(o);r=f[r]?"cssFloat"in o.style?"cssFloat":"styleFloat":r;var u=i.getComputedStyle(o);return 1==s?u:n(o,r,u[r]||o.style[r])},i.set=function(e,n,r){var o=t.byId(e),s=arguments.length,a="opacity"==n;if(n=f[n]?"cssFloat"in o.style?"cssFloat":"styleFloat":n,3==s)return a?u(o,r):o.style[n]=r;for(var l in n)i.set(e,l,n[l]);return i.getComputedStyle(o)},i}),define("dojo/aspect",[],function(){"use strict";function e(e,t,n,r){var i,o=e[t],s="around"==t;if(s){var a=n(function(){return o.advice(this,arguments)});i={remove:function(){a&&(a=e=n=null)},advice:function(e,t){return a?a.apply(e,t):o.advice(e,t)}}}else i={remove:function(){if(i.advice){var r=i.previous,o=i.next;o||r?(r?r.next=o:e[t]=o,o&&(o.previous=r)):delete e[t],e=n=i.advice=null}},id:e.nextId++,advice:n,receiveArguments:r};if(o&&!s)if("after"==t){for(;o.next&&(o=o.next););o.next=i,i.previous=o}else"before"==t&&(e[t]=i,i.next=o,o.previous=i);else e[t]=i;return i}function t(t){return function(r,i,o,s){var a,l=r[i];l&&l.target==r||(r[i]=a=function(){for(var e=a.nextId,t=arguments,r=a.before;r;)r.advice&&(t=r.advice.apply(this,t)||t),r=r.next;if(a.around)var i=a.around.advice(this,t);for(var o=a.after;o&&o.id<e;){if(o.advice)if(o.receiveArguments){var s=o.advice.apply(this,t);i=s===n?i:s}else i=o.advice.call(this,i,t);o=o.next}return i},l&&(a.around={advice:function(e,t){return l.apply(e,t)}}),a.target=r,a.nextId=a.nextId||0);var u=e(a||l,t,o,s);return o=null,u}}var n,r=t("after"),i=t("before"),o=t("around");return{before:i,around:o,after:r}}),define("dojo/on",["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(e,t,n){"use strict";function r(e,t,r,i,o){var s=t.match(/(.*):(.*)/);if(s)return t=s[2],s=s[1],a.selector(s,t).call(o,e,r);if(n("touch")&&(l.test(t)&&(r=C(r)),n("event-orientationchange")||"orientationchange"!=t||(t="resize",e=window,r=C(r))),h&&(r=h(r)),e.addEventListener){var u=t in c,d=u?c[t]:t;return e.addEventListener(d,r,u),{remove:function(){e.removeEventListener(d,r,u)}}}if(t="on"+t,v&&e.attachEvent)return v(e,t,r);throw new Error("Target must be an event emitter")}function i(){this.cancelable=!1,this.defaultPrevented=!0}function o(){this.bubbles=!1}if(n("dom")){var s=window.ScriptEngineMajorVersion;n.add("jscript",s&&s()+ScriptEngineMinorVersion()/10),n.add("event-orientationchange",n("touch")&&!n("android")),n.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation),n.add("event-focusin",function(e,t,n){return"onfocusin"in n}),n("touch")&&n.add("touch-can-modify-event-delegate",function(){var e=function(){};e.prototype=document.createEvent("MouseEvents");try{var t=new e;return t.target=null,null===t.target}catch(n){return!1}})}var a=function(e,t,n,i){return"function"!=typeof e.on||"function"==typeof t||e.nodeType?a.parse(e,t,n,r,i,this):e.on(t,n)};a.pausable=function(e,t,n,r){var i,o=a(e,t,function(){return i?void 0:n.apply(this,arguments)},r);return o.pause=function(){i=!0},o.resume=function(){i=!1},o},a.once=function(e,t,n,r){var i=a(e,t,function(){return i.remove(),n.apply(this,arguments)});return i},a.parse=function(e,t,n,r,i,o){var s;if(t.call)return t.call(o,e,n);if(t instanceof Array?s=t:t.indexOf(",")>-1&&(s=t.split(/\s*,\s*/)),s){for(var l,u=[],d=0;l=s[d++];)u.push(a.parse(e,l,n,r,i,o));return u.remove=function(){for(var e=0;e<u.length;e++)u[e].remove()},u}return r(e,t,n,i,o)};var l=/^touch/;a.matches=function(e,n,r,i,o){for(o=o&&"function"==typeof o.matches?o:t.query,i=i!==!1,1!=e.nodeType&&(e=e.parentNode);!o.matches(e,n,r);)if(e==r||i===!1||!(e=e.parentNode)||1!=e.nodeType)return!1;return e},a.selector=function(e,t,n){return function(r,i){function o(t){return a.matches(t,e,r,n,s)}var s="function"==typeof e?{matches:e}:this,l=t.bubble;return l?a(r,l(o),i):a(r,t,function(e){var t=o(e.target);return t?(e.selectorTarget=t,i.call(t,e)):void 0})}};var u=[].slice,d=a.emit=function(e,t,n){var r=u.call(arguments,2),s="on"+t;if("parentNode"in e){var a=r[0]={};for(var l in n)a[l]=n[l];a.preventDefault=i,a.stopPropagation=o,a.target=e,a.type=t,n=a}do e[s]&&e[s].apply(e,r);while(n&&n.bubbles&&(e=e.parentNode));return n&&n.cancelable&&n},c=n("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!n("event-stopimmediatepropagation"))var f=function(){this.immediatelyStopped=!0,this.modified=!0},h=function(e){return function(t){return t.immediatelyStopped?void 0:(t.stopImmediatePropagation=f,e.apply(this,arguments))}};if(n("dom-addeventlistener"))a.emit=function(e,t,n){if(e.dispatchEvent&&document.createEvent){var r=e.ownerDocument||document,i=r.createEvent("HTMLEvents");i.initEvent(t,!!n.bubbles,!!n.cancelable);for(var o in n)o in i||(i[o]=n[o]);return e.dispatchEvent(i)&&i}return d.apply(a,arguments)};else{a._fixEvent=function(e,t){if(!e){var n=t&&(t.ownerDocument||t.document||t).parentWindow||window;e=n.event}if(!e)return e;try{p&&e.type==p.type&&e.srcElement==p.target&&(e=p)}catch(r){}if(!e.target)switch(e.target=e.srcElement,e.currentTarget=t||e.srcElement,"mouseover"==e.type&&(e.relatedTarget=e.fromElement),"mouseout"==e.type&&(e.relatedTarget=e.toElement),e.stopPropagation||(e.stopPropagation=_,e.preventDefault=b),e.type){case"keypress":var i="charCode"in e?e.charCode:e.keyCode;10==i?(i=0,e.keyCode=13):13==i||27==i?i=0:3==i&&(i=99),e.charCode=i,y(e)}return e};var p,g=function(e){this.handle=e};g.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var m=function(e){return function(t){t=a._fixEvent(t,this);var n=e.call(this,t);return t.modified&&(p||setTimeout(function(){p=null}),p=t),n}},v=function(t,r,i){if(i=m(i),((t.ownerDocument?t.ownerDocument.parentWindow:t.parentWindow||t.window||window)!=top||n("jscript")<5.8)&&!n("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var o=t[r];if(!o||!o.listeners){var s=o;o=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}"),o.listeners=[],t[r]=o,o.global=this,s&&o.listeners.push(_dojoIEListeners_.push(s)-1)}var a;return o.listeners.push(a=o.global._dojoIEListeners_.push(i)-1),new g(a)}return e.after(t,r,i,!0)},y=function(e){e.keyChar=e.charCode?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode},_=function(){this.cancelBubble=!0},b=a._preventDefault=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(e){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(n("touch"))var w=function(){},x=window.orientation,C=function(e){return function(t){var r=t.corrected;if(!r){var i=t.type;try{delete t.type}catch(o){}if(t.type){if(n("touch-can-modify-event-delegate"))w.prototype=t,r=new w;else{r={};for(var s in t)r[s]=t[s]}r.preventDefault=function(){t.preventDefault()},r.stopPropagation=function(){t.stopPropagation()}}else r=t,r.type=i;if(t.corrected=r,"resize"==i)return x==window.orientation?null:(x=window.orientation,r.type="orientationchange",e.call(this,r));"rotation"in r||(r.rotation=0,r.scale=1);var a=r.changedTouches[0];for(var l in a)delete r[l],r[l]=a[l]}return e.call(this,r)}};return a}),define("dojo/Evented",["./aspect","./on"],function(e,t){"use strict";function n(){}var r=e.after;return n.prototype={on:function(e,n){return t.parse(this,e,n,function(e,t){return r(e,"on"+t,n,!0)})},emit:function(e,n){var r=[this];return r.push.apply(r,arguments),t.emit.apply(t,r)}},n}),define("dojo/topic",["./Evented"],function(e){var t=new e;return{publish:function(e,n){return t.emit.apply(t,arguments)},subscribe:function(e,n){return t.on.apply(t,arguments)}}}),define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(e,t,n,r){function i(e,t,n,r,i,o){o=o||"px";var s=e.style;isNaN(t)||(s.left=t+o),isNaN(n)||(s.top=n+o),r>=0&&(s.width=r+o),i>=0&&(s.height=i+o)}function o(e){return"button"==e.tagName.toLowerCase()||"input"==e.tagName.toLowerCase()&&"button"==(e.getAttribute("type")||"").toLowerCase()}function s(e){return"border-box"==a.boxModel||"table"==e.tagName.toLowerCase()||o(e)}var a={};a.boxModel="content-box",e("ie")&&(a.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),a.getPadExtents=function(e,t){e=n.byId(e);var i=t||r.getComputedStyle(e),o=r.toPixelValue,s=o(e,i.paddingLeft),a=o(e,i.paddingTop),l=o(e,i.paddingRight),u=o(e,i.paddingBottom);return{l:s,t:a,r:l,b:u,w:s+l,h:a+u}};var l="none";a.getBorderExtents=function(e,t){e=n.byId(e);var i=r.toPixelValue,o=t||r.getComputedStyle(e),s=o.borderLeftStyle!=l?i(e,o.borderLeftWidth):0,a=o.borderTopStyle!=l?i(e,o.borderTopWidth):0,u=o.borderRightStyle!=l?i(e,o.borderRightWidth):0,d=o.borderBottomStyle!=l?i(e,o.borderBottomWidth):0;return{l:s,t:a,r:u,b:d,w:s+u,h:a+d}},a.getPadBorderExtents=function(e,t){e=n.byId(e);var i=t||r.getComputedStyle(e),o=a.getPadExtents(e,i),s=a.getBorderExtents(e,i);return{l:o.l+s.l,t:o.t+s.t,r:o.r+s.r,b:o.b+s.b,w:o.w+s.w,h:o.h+s.h}},a.getMarginExtents=function(e,t){e=n.byId(e);var i=t||r.getComputedStyle(e),o=r.toPixelValue,s=o(e,i.marginLeft),a=o(e,i.marginTop),l=o(e,i.marginRight),u=o(e,i.marginBottom);return{l:s,t:a,r:l,b:u,w:s+l,h:a+u}},a.getMarginBox=function(t,i){t=n.byId(t);var o,s=i||r.getComputedStyle(t),u=a.getMarginExtents(t,s),d=t.offsetLeft-u.l,c=t.offsetTop-u.t,f=t.parentNode,h=r.toPixelValue;if(e("mozilla")){var p=parseFloat(s.left),g=parseFloat(s.top);isNaN(p)||isNaN(g)?f&&f.style&&(o=r.getComputedStyle(f),"visible"!=o.overflow&&(d+=o.borderLeftStyle!=l?h(t,o.borderLeftWidth):0,c+=o.borderTopStyle!=l?h(t,o.borderTopWidth):0)):(d=p,c=g)}else(e("opera")||8==e("ie")&&!e("quirks"))&&f&&(o=r.getComputedStyle(f),d-=o.borderLeftStyle!=l?h(t,o.borderLeftWidth):0,c-=o.borderTopStyle!=l?h(t,o.borderTopWidth):0);return{l:d,t:c,w:t.offsetWidth+u.w,h:t.offsetHeight+u.h}},a.getContentBox=function(t,i){t=n.byId(t);var o,s=i||r.getComputedStyle(t),l=t.clientWidth,u=a.getPadExtents(t,s),d=a.getBorderExtents(t,s);return l?(o=t.clientHeight,d.w=d.h=0):(l=t.offsetWidth,o=t.offsetHeight),e("opera")&&(u.l+=d.l,u.t+=d.t),{l:u.l,t:u.t,w:l-u.w-d.w,h:o-u.h-d.h}},a.setContentSize=function(e,t,r){e=n.byId(e);var o=t.w,l=t.h;if(s(e)){var u=a.getPadBorderExtents(e,r);o>=0&&(o+=u.w),l>=0&&(l+=u.h)}i(e,NaN,NaN,o,l)};var u={l:0,t:0,w:0,h:0};return a.setMarginBox=function(t,l,d){t=n.byId(t);var c=d||r.getComputedStyle(t),f=l.w,h=l.h,p=s(t)?u:a.getPadBorderExtents(t,c),g=a.getMarginExtents(t,c);if(e("webkit")&&o(t)){var m=t.style;f>=0&&!m.width&&(m.width="4px"),h>=0&&!m.height&&(m.height="4px")}f>=0&&(f=Math.max(f-p.w-g.w,0)),h>=0&&(h=Math.max(h-p.h-g.h,0)),i(t,l.l,l.t,f,h)},a.isBodyLtr=function(e){return e=e||t.doc,"ltr"==(t.body(e).dir||e.documentElement.dir||"ltr").toLowerCase()},a.docScroll=function(n){n=n||t.doc;var r=t.doc.parentWindow||t.doc.defaultView;return"pageXOffset"in r?{x:r.pageXOffset,y:r.pageYOffset}:(r=e("quirks")?t.body(n):n.documentElement)&&{x:a.fixIeBiDiScrollLeft(r.scrollLeft||0,n),y:r.scrollTop||0}},a.getIeDocumentElementOffset=function(e){return{x:0,y:0}},a.fixIeBiDiScrollLeft=function(n,r){r=r||t.doc;var i=e("ie");if(i&&!a.isBodyLtr(r)){var o=e("quirks"),s=o?t.body(r):r.documentElement,l=t.global;return 6==i&&!o&&l.frameElement&&s.scrollHeight>s.clientHeight&&(n+=s.clientLeft),8>i||o?n+s.clientWidth-s.scrollWidth:-n}return n},a.position=function(r,i){r=n.byId(r);var o=t.body(r.ownerDocument),s=r.getBoundingClientRect();if(s={x:s.left,y:s.top,w:s.right-s.left,h:s.bottom-s.top},e("ie")<9&&(s.x-=e("quirks")?o.clientLeft+o.offsetLeft:0,s.y-=e("quirks")?o.clientTop+o.offsetTop:0),i){var l=a.docScroll(r.ownerDocument);s.x+=l.x,s.y+=l.y}return s},a.getMarginSize=function(e,t){e=n.byId(e);var i=a.getMarginExtents(e,t||r.getComputedStyle(e)),o=e.getBoundingClientRect();return{w:o.right-o.left+i.w,h:o.bottom-o.top+i.h}},a.normalizeEvent=function(t){if("layerX"in t||(t.layerX=t.offsetX,t.layerY=t.offsetY),!("pageX"in t)){var n=t.target,r=n&&n.ownerDocument||document,i=e("quirks")?r.body:r.documentElement;t.pageX=t.clientX+a.fixIeBiDiScrollLeft(i.scrollLeft||0,r),t.pageY=t.clientY+(i.scrollTop||0)}},a}),define("dojo/_base/event",["./kernel","../on","../has","../dom-geometry"],function(e,t,n,r){if(t._fixEvent){var i=t._fixEvent;t._fixEvent=function(e,t){return e=i(e,t),e&&r.normalizeEvent(e),
e}}var o={fix:function(e,n){return t._fixEvent?t._fixEvent(e,n):e},stop:function(e){n("dom-addeventlistener")||e&&e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e=e||window.event,e.cancelBubble=!0,t._preventDefault.call(e))}};return n("extend-dojo")&&(e.fixEvent=o.fix,e.stopEvent=o.stop),o}),define("dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(e,t,n,r,i){function o(e,n){var i=function(i,o){return t(i,e,function(e){return n?n(e,o):r.isDescendant(e.relatedTarget,i)?void 0:o.call(this,e)})};return i.bubble=function(t){return o(e,function(e,n){var r=t(e.target),i=e.relatedTarget;return r&&r!=(i&&1==i.nodeType&&t(i))?n.call(r,e):void 0})},i}n.add("dom-quirks",i.doc&&"BackCompat"==i.doc.compatMode),n.add("events-mouseenter",i.doc&&"onmouseenter"in i.doc.createElement("div")),n.add("events-mousewheel",i.doc&&"onmousewheel"in i.doc);var s;s=n("dom-quirks")&&n("ie")||!n("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(e,t){return e.button&t},isLeft:function(e){return 1&e.button},isMiddle:function(e){return 4&e.button},isRight:function(e){return 2&e.button}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,t){return e.button==t},isLeft:function(e){return 0==e.button},isMiddle:function(e){return 1==e.button},isRight:function(e){return 2==e.button}},e.mouseButtons=s;var a;return a=n("events-mousewheel")?"mousewheel":function(e,n){return t(e,"DOMMouseScroll",function(e){e.wheelDelta=-e.detail,n.call(this,e)})},{_eventHandler:o,enter:o("mouseover"),leave:o("mouseout"),wheel:a,isLeft:s.isLeft,isMiddle:s.isMiddle,isRight:s.isRight}}),define("dojo/_base/sniff",["./kernel","./lang","../sniff"],function(e,t,n){return n("host-browser")?(e._name="browser",t.mixin(e,{isBrowser:!0,isFF:n("ff"),isIE:n("ie"),isKhtml:n("khtml"),isWebKit:n("webkit"),isMozilla:n("mozilla"),isMoz:n("mozilla"),isOpera:n("opera"),isSafari:n("safari"),isChrome:n("chrome"),isMac:n("mac"),isIos:n("ios"),isAndroid:n("android"),isWii:n("wii"),isQuirks:n("quirks"),isAir:n("air")}),n):n}),define("dojo/keys",["./_base/kernel","./sniff"],function(e,t){return e.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:t("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:t("mac")&&!t("air")?t("safari")?91:224:17}}),define("dojo/_base/connect",["./kernel","../on","../topic","../aspect","./event","../mouse","./sniff","./lang","../keys"],function(e,t,n,r,i,o,s,a){function l(n,i,s,l,u){if(l=a.hitch(s,l),!n||!n.addEventListener&&!n.attachEvent)return r.after(n||e.global,i,l,!0);if("string"==typeof i&&"on"==i.substring(0,2)&&(i=i.substring(2)),n||(n=e.global),!u)switch(i){case"keypress":i=d;break;case"mouseenter":i=o.enter;break;case"mouseleave":i=o.leave}return t(n,i,l,u)}function u(e){e.keyChar=e.charCode?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode}s.add("events-keypress-typed",function(){var e={charCode:0};try{e=document.createEvent("KeyboardEvent"),(e.initKeyboardEvent||e.initKeyEvent).call(e,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(t){}return 0==e.charCode&&!s("opera")});var d,c={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},f=s("mac")?"metaKey":"ctrlKey",h=function(e,t){var n=a.mixin({},e,t);return u(n),n.preventDefault=function(){e.preventDefault()},n.stopPropagation=function(){e.stopPropagation()},n};if(s("events-keypress-typed")){var p=function(e,t){try{return e.keyCode=t}catch(e){return 0}};d=function(e,n){var r=t(e,"keydown",function(e){var t=e.keyCode,r=13!=t&&32!=t&&(27!=t||!s("ie"))&&(48>t||t>90)&&(96>t||t>111)&&(186>t||t>192)&&(219>t||t>222)&&229!=t;if(r||e.ctrlKey){var i=r?0:t;if(e.ctrlKey){if(3==t||13==t)return n.call(e.currentTarget,e);i>95&&106>i?i-=48:!e.shiftKey&&i>=65&&90>=i?i+=32:i=c[i]||i}var o=h(e,{type:"keypress",faux:!0,charCode:i});n.call(e.currentTarget,o),s("ie")&&p(e,o.keyCode)}}),i=t(e,"keypress",function(e){var t=e.charCode;return t=t>=32?t:0,e=h(e,{charCode:t,faux:!0}),n.call(this,e)});return{remove:function(){r.remove(),i.remove()}}}}else d=s("opera")?function(e,n){return t(e,"keypress",function(e){var t=e.which;return 3==t&&(t=99),t=32>t&&!e.shiftKey?0:t,e.ctrlKey&&!e.shiftKey&&t>=65&&90>=t&&(t+=32),n.call(this,h(e,{charCode:t}))})}:function(e,n){return t(e,"keypress",function(e){return u(e),n.call(this,e)})};var g={_keypress:d,connect:function(e,t,n,r,i){var o=arguments,s=[],a=0;s.push("string"==typeof o[0]?null:o[a++],o[a++]);var u=o[a+1];s.push("string"==typeof u||"function"==typeof u?o[a++]:null,o[a++]);for(var d=o.length;d>a;a++)s.push(o[a]);return l.apply(this,s)},disconnect:function(e){e&&e.remove()},subscribe:function(e,t,r){return n.subscribe(e,a.hitch(t,r))},publish:function(e,t){return n.publish.apply(n,[e].concat(t))},connectPublisher:function(e,t,n){var r=function(){g.publish(e,arguments)};return n?g.connect(t,n,r):g.connect(t,r)},isCopyKey:function(e){return e[f]}};return g.unsubscribe=g.disconnect,s("extend-dojo")&&a.mixin(e,g),g}),define("dojo/dom-prop",["exports","./_base/kernel","./sniff","./_base/lang","./dom","./dom-style","./dom-construct","./_base/connect"],function(e,t,n,r,i,o,s,a){function l(e){for(var t,n="",r=e.childNodes,i=0;t=r[i];i++)8!=t.nodeType&&(n+=1==t.nodeType?l(t):t.nodeValue);return n}var u={},d=1,c=t._scopeName+"attrid";n.add("dom-textContent",function(e,t,n){return"textContent"in n}),e.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"},e.get=function(t,r){t=i.byId(t);var o=r.toLowerCase(),s=e.names[o]||r;return"textContent"!=s||n("dom-textContent")?t[s]:l(t)},e.set=function(t,l,f){t=i.byId(t);var h=arguments.length;if(2==h&&"string"!=typeof l){for(var p in l)e.set(t,p,l[p]);return t}var g=l.toLowerCase(),m=e.names[g]||l;if("style"==m&&"string"!=typeof f)return o.set(t,f),t;if("innerHTML"==m)return n("ie")&&t.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(s.empty(t),t.appendChild(s.toDom(f,t.ownerDocument))):t[m]=f,t;if("textContent"==m&&!n("dom-textContent"))return s.empty(t),t.appendChild(t.ownerDocument.createTextNode(f)),t;if(r.isFunction(f)){var v=t[c];v||(v=d++,t[c]=v),u[v]||(u[v]={});var y=u[v][m];if(y)a.disconnect(y);else try{delete t[m]}catch(_){}return f?u[v][m]=a.connect(t,m,f):t[m]=null,t}return t[m]=f,t}}),define("dojo/dom-attr",["exports","./sniff","./_base/lang","./dom","./dom-style","./dom-prop"],function(e,t,n,r,i,o){function s(e,t){var n=e.getAttributeNode&&e.getAttributeNode(t);return!!n&&n.specified}var a={innerHTML:1,textContent:1,className:1,htmlFor:t("ie"),value:1},l={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};e.has=function(e,t){var n=t.toLowerCase();return a[o.names[n]||t]||s(r.byId(e),l[n]||t)},e.get=function(e,t){e=r.byId(e);var i=t.toLowerCase(),u=o.names[i]||t,d=a[u],c=e[u];if(d&&"undefined"!=typeof c)return c;if("textContent"==u)return o.get(e,u);if("href"!=u&&("boolean"==typeof c||n.isFunction(c)))return c;var f=l[i]||t;return s(e,f)?e.getAttribute(f):null},e.set=function(t,s,u){if(t=r.byId(t),2==arguments.length){for(var d in s)e.set(t,d,s[d]);return t}var c=s.toLowerCase(),f=o.names[c]||s,h=a[f];return"style"==f&&"string"!=typeof u?(i.set(t,u),t):h||"boolean"==typeof u||n.isFunction(u)?o.set(t,s,u):(t.setAttribute(l[c]||s,u),t)},e.remove=function(e,t){r.byId(e).removeAttribute(l[t.toLowerCase()]||t)},e.getNodeProp=function(e,t){e=r.byId(e);var n=t.toLowerCase(),i=o.names[n]||t;if(i in e&&"href"!=i)return e[i];var a=l[n]||t;return s(e,a)?e.getAttribute(a):null}}),define("dojo/dom-construct",["exports","./_base/kernel","./sniff","./_base/window","./dom","./dom-attr"],function(e,t,n,r,i,o){function s(e,t){var n=t.parentNode;n&&n.insertBefore(e,t)}function a(e,t){var n=t.parentNode;n&&(n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling))}function l(e){if("innerHTML"in e)try{return void(e.innerHTML="")}catch(t){}for(var n;n=e.lastChild;)e.removeChild(n)}function u(e,t){e.firstChild&&l(e),t&&(n("ie")&&t.canHaveChildren&&"removeNode"in e?e.removeNode(!1):t.removeChild(e))}var d={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w\:]+)/,f={},h=0,p="__"+t._scopeName+"ToDomId";for(var g in d)if(d.hasOwnProperty(g)){var m=d[g];m.pre="option"==g?'<select multiple="multiple">':"<"+m.join("><")+">",m.post="</"+m.reverse().join("></")+">"}var v;n("ie")<=8&&(v=function(e){e.__dojo_html5_tested="yes";var t=y("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},e.body);1!==t.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(t){e.createElement(t)}),_(t)}),e.toDom=function(e,t){t=t||r.doc;var i=t[p];i||(t[p]=i=++h+"",f[i]=t.createElement("div")),n("ie")<=8&&!t.__dojo_html5_tested&&t.body&&v(t),e+="";var o,s,a,l,u=e.match(c),g=u?u[1].toLowerCase():"",m=f[i];if(u&&d[g])for(o=d[g],m.innerHTML=o.pre+e+o.post,s=o.length;s;--s)m=m.firstChild;else m.innerHTML=e;if(1==m.childNodes.length)return m.removeChild(m.firstChild);for(l=t.createDocumentFragment();a=m.firstChild;)l.appendChild(a);return l},e.place=function(t,n,r){if(n=i.byId(n),"string"==typeof t&&(t=/^\s*</.test(t)?e.toDom(t,n.ownerDocument):i.byId(t)),"number"==typeof r){var o=n.childNodes;!o.length||o.length<=r?n.appendChild(t):s(t,o[0>r?0:r])}else switch(r){case"before":s(t,n);break;case"after":a(t,n);break;case"replace":n.parentNode.replaceChild(t,n);break;case"only":e.empty(n),n.appendChild(t);break;case"first":if(n.firstChild){s(t,n.firstChild);break}default:n.appendChild(t)}return t};var y=e.create=function(t,n,s,a){var l=r.doc;return s&&(s=i.byId(s),l=s.ownerDocument),"string"==typeof t&&(t=l.createElement(t)),n&&o.set(t,n),s&&e.place(t,s,a),t};e.empty=function(e){l(i.byId(e))};var _=e.destroy=function(e){e=i.byId(e),e&&u(e,e.parentNode)}}),define("dojo/_base/array",["./kernel","../has","./lang"],function(e,t,n){function r(e){return a[e]=new Function("item","index","array",e)}function i(e){var t=!e;return function(n,i,o){var s,l=0,u=n&&n.length||0;if(u&&"string"==typeof n&&(n=n.split("")),"string"==typeof i&&(i=a[i]||r(i)),o){for(;u>l;++l)if(s=!i.call(o,n[l],l,n),e^s)return!s}else for(;u>l;++l)if(s=!i(n[l],l,n),e^s)return!s;return t}}function o(e){var t=1,n=0,r=0;return e||(t=n=r=-1),function(i,o,a,u){if(u&&t>0)return l.lastIndexOf(i,o,a);var d,c=i&&i.length||0,f=e?c+r:n;for(a===s?d=e?n:c+r:0>a?(d=c+a,0>d&&(d=n)):d=a>=c?c+r:a,c&&"string"==typeof i&&(i=i.split(""));d!=f;d+=t)if(i[d]==o)return d;return-1}}var s,a={},l={every:i(!1),some:i(!0),indexOf:o(!0),lastIndexOf:o(!1),forEach:function(e,t,n){var i=0,o=e&&e.length||0;if(o&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=a[t]||r(t)),n)for(;o>i;++i)t.call(n,e[i],i,e);else for(;o>i;++i)t(e[i],i,e)},map:function(e,t,n,i){var o=0,s=e&&e.length||0,l=new(i||Array)(s);if(s&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=a[t]||r(t)),n)for(;s>o;++o)l[o]=t.call(n,e[o],o,e);else for(;s>o;++o)l[o]=t(e[o],o,e);return l},filter:function(e,t,n){var i,o=0,s=e&&e.length||0,l=[];if(s&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=a[t]||r(t)),n)for(;s>o;++o)i=e[o],t.call(n,i,o,e)&&l.push(i);else for(;s>o;++o)i=e[o],t(i,o,e)&&l.push(i);return l},clearCache:function(){a={}}};return t("extend-dojo")&&n.mixin(e,l),l}),define("dojo/dom-class",["./_base/lang","./_base/array","./dom"],function(e,t,n){function r(e){if("string"==typeof e||e instanceof String){if(e&&!s.test(e))return a[0]=e,a;var n=e.split(s);return n.length&&!n[0]&&n.shift(),n.length&&!n[n.length-1]&&n.pop(),n}return e?t.filter(e,function(e){return e}):[]}var i,o="className",s=/\s+/,a=[""],l={};return i={contains:function(e,t){return(" "+n.byId(e)[o]+" ").indexOf(" "+t+" ")>=0},add:function(e,t){e=n.byId(e),t=r(t);var i,s=e[o];s=s?" "+s+" ":" ",i=s.length;for(var a,l=0,u=t.length;u>l;++l)a=t[l],a&&s.indexOf(" "+a+" ")<0&&(s+=a+" ");i<s.length&&(e[o]=s.substr(1,s.length-2))},remove:function(t,i){t=n.byId(t);var s;if(void 0!==i){i=r(i),s=" "+t[o]+" ";for(var a=0,l=i.length;l>a;++a)s=s.replace(" "+i[a]+" "," ");s=e.trim(s)}else s="";t[o]!=s&&(t[o]=s)},replace:function(e,t,r){e=n.byId(e),l[o]=e[o],i.remove(l,r),i.add(l,t),e[o]!==l[o]&&(e[o]=l[o])},toggle:function(e,t,o){if(e=n.byId(e),void 0===o){t=r(t);for(var s,a=0,l=t.length;l>a;++a)s=t[a],i[i.contains(e,s)?"remove":"add"](e,s)}else i[o?"add":"remove"](e,t);return o}}}),define("dgrid/util/misc",["dojo/has"],function(e){function t(e){var t,i,s=o[e];if(void 0!==s)for(n[r](s),o[e]=void 0,t=e+1,i=o.length;i>t;t++)o[t]>s&&o[t]--}e.add("dom-contains",function(e,t,n){return!!n.contains});var n,r,i,o=[],s=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,a={defaultDelay:15,throttle:function(e,t,n){var r=!1;return n=n||a.defaultDelay,function(){r||(r=!0,e.apply(t,arguments),setTimeout(function(){r=!1},n))}},throttleDelayed:function(e,t,n){var r=!1;return n=n||a.defaultDelay,function(){if(!r){r=!0;var i=arguments;setTimeout(function(){r=!1,e.apply(t,i)},n)}}},debounce:function(e,t,n){var r;return n=n||a.defaultDelay,function(){r&&(clearTimeout(r),r=null);var i=arguments;r=setTimeout(function(){e.apply(t,i)},n)}},each:function(e,t,n){var r,i;if(e)if("number"==typeof e.length)for(r=0,i=e.length;i>r;r++)t.call(n,e[r],r,e);else for(r in e)t.call(n,e[r],r,e)},addCssRule:function(e,s){n||(n=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(n),n=n.sheet||n.styleSheet,r=n.deleteRule?"deleteRule":"removeRule",i=n.cssRules?"cssRules":"rules");var a=o.length;return o[a]=(n.cssRules||n.rules).length,n.addRule?n.addRule(e,s):n.insertRule(e+"{"+s+"}",o[a]),{get:function(e){return n[i][o[a]].style[e]},set:function(e,t){"undefined"!=typeof o[a]&&(n[i][o[a]].style[e]=t)},remove:function(){t(a)}}},escapeCssIdentifier:function(e,t){return"string"==typeof e?e.replace(s,t||"\\$1"):e}};return a}),define("dgrid/List",["dojo/_base/declare","dojo/_base/lang","dojo/dom-construct","dojo/dom-class","dojo/on","dojo/has","./util/misc","dojo/_base/sniff"],function(e,t,n,r,i,o,s){function a(e){return document.getElementById(e)}function l(e){e.className="",e.parentNode&&document.body.removeChild(e)}function u(e,t){e.className="dgrid-scrollbar-measure",document.body.appendChild(e);var n=e["offset"+t]-e["client"+t];return l(e),n}function d(){return b.autoIdPrefix+y++}function c(e){r.replace(this.domNode,e,this._class||""),this._class=e}function f(){return this._class}var h=[];o("mozilla")&&h.push("has-mozilla"),o("touch")&&h.push("has-touch"),r.add(document.documentElement,h),o.add("pointer",function(e){return"PointerEvent"in e?"pointer":"MSPointerEvent"in e?"MSPointer":!1});var p,g,m="dgrid-row-odd",v="dgrid-row-even";o.add("dom-scrollbar-width",function(e,t,n){return u(n,"Width")}),o.add("dom-scrollbar-height",function(e,t,n){return u(n,"Height")}),o.add("dom-rtl-scrollbar-left",function(e,t,r){var i,s=document.createElement("div");return r.className="dgrid-scrollbar-measure",r.setAttribute("dir","rtl"),r.appendChild(s),document.body.appendChild(r),i=!!o("ie")||!!o("trident")||/\bEdge\//.test(navigator.userAgent)||s.offsetLeft>=o("dom-scrollbar-width"),l(r),n.destroy(s),r.removeAttribute("dir"),i});var y=0,_=function(){this._started&&this.resize()},b=e(null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,addUiClasses:!0,highlightDuration:250,resizeThrottleDelay:s.defaultDelay,resizeThrottleMethod:"throttleDelayed",postscript:function(e,t){var n=this;(this._Row=function(e,t,n){this.id=e,this.data=t,this.element=n}).prototype.remove=function(){n.removeRow(this.element)},t&&(this.srcNodeRef=t=t.nodeType?t:a(t)),this.create(e,t)},listType:"list",create:function(t,n){var r,i=this.domNode=n||document.createElement("div");t&&(this.params=t,e.safeMixin(this,t),r=t["class"]||t.className||i.className),this.sort=this.sort||[],this._listeners=[],this._rowIdToObject={},this.postMixInProperties&&this.postMixInProperties(),this.id=i.id=i.id||this.id||d(),this.buildRendering(),r&&c.call(this,r),this.postCreate(),delete this.srcNodeRef,this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var e,a,l,u,d,c=this.domNode,f=this.addUiClasses,h=this;u=this.isRTL="rtl"===(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase(),c.className="",c.setAttribute("role","grid"),r.add(c,"dgrid dgrid-"+this.listType+(f?" ui-widget":"")),e=this.headerNode=n.create("div",{className:"dgrid-header dgrid-header-row"+(f?" ui-widget-header":"")+(this.showHeader?"":" dgrid-header-hidden")},c),a=this.bodyNode=n.create("div",{className:"dgrid-scroller"},c),o("ff")&&(a.tabIndex=-1),this.headerScrollNode=n.create("div",{className:"dgrid-header dgrid-header-scroll dgrid-scrollbar-width"+(f?" ui-widget-header":"")},c),l=this.footerNode=n.create("div",{className:"dgrid-footer"+(this.showFooter?"":" dgrid-footer-hidden")},c),u&&(c.className+=" dgrid-rtl"+(o("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":"")),i(a,"scroll",function(t){h.showHeader&&(e.scrollLeft=t.scrollLeft||a.scrollLeft),t.stopPropagation(),i.emit(c,"scroll",{scrollTarget:a})}),this.configStructure(),this.renderHeader(),this.contentNode=this.touchNode=n.create("div",{className:"dgrid-content"+(f?" ui-widget-content":"")},this.bodyNode),"string"==typeof this.resizeThrottleMethod&&s[this.resizeThrottleMethod]?d=s[this.resizeThrottleMethod](_,this,this.resizeThrottleDelay):"function"==typeof this.resizeThrottleMethod?d=this.resizeThrottleMethod(t.hitch(this,_),this.resizeThrottleDelay):(console.warn("Invalid value specified for resizeThrottleMethod:  "+this.resizeThrottleMethod),d=s.throttleDelayed(_,this,this.resizeThrottleDelay)),this._resizeHandle=i(window,"resize",d),this._listeners.push(this._resizeHandle)},postCreate:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this.sort))},configStructure:function(){},resize:function(){var e=this.bodyNode,t=this.headerNode,n=this.footerNode,r=t.offsetHeight,i=this.showFooter?n.offsetHeight:0;this.headerScrollNode.style.height=e.style.marginTop=r+"px",e.style.marginBottom=i+"px",p||(p=o("dom-scrollbar-width"),g=o("dom-scrollbar-height"),o("ie")&&(p++,g++),s.addCssRule(".dgrid-scrollbar-width","width: "+p+"px"),s.addCssRule(".dgrid-scrollbar-height","height: "+g+"px"),17!==p&&(s.addCssRule(".dgrid-header-row","right: "+p+"px"),s.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+p+"px")))},addCssRule:function(e,t){var n=s.addCssRule(e,t);return this.cleanAddedRules&&this._listeners.push(n),n},on:function(e,t){var n=i(this.domNode,e,t);return o("dom-addeventlistener")||this._listeners.push(n),n},cleanup:function(){var e;for(e in this._rowIdToObject)if(this._rowIdToObject[e]!==this.columns){var t=a(e);t&&this.removeRow(t,!0)}},destroy:function(){if(this._listeners){for(var e=this._listeners.length;e--;)this._listeners[e].remove();this._listeners=null}this._started=!1,this.cleanup(),n.destroy(this.domNode)},refresh:function(){this.cleanup(),this._rowIdToObject={},this._autoRowId=0,this.contentNode.innerHTML="",this.scrollTo({x:0,y:0})},highlightRow:function(e,t){var n="dgrid-highlight"+(this.addUiClasses?" ui-state-highlight":"");e=e.element||e,r.add(e,n),setTimeout(function(){r.remove(e,n)},t||this.highlightDuration)},adjustRowIndices:function(e){var t=e,n=t.rowIndex;if(n>-1)do t.rowIndex>-1&&(this.maintainOddEven&&r.contains(t,"dgrid-row")&&r.replace(t,n%2===1?m:v,n%2===0?m:v),t.rowIndex=n++);while((t=t.nextSibling)&&t.rowIndex!==n)},renderArray:function(e,t,n){n=n||{};var r,i=this,o=n.start||0,s=document.createDocumentFragment(),a=[],l=0,u=e.length;for(t||(this._lastCollection=e);u>l;)a[l]=this.insertRow(e[l],s,null,o++,n),l++;return r=t?t.parentNode:i.contentNode,r&&r.parentNode&&(r!==i.contentNode||u)&&(r.insertBefore(s,t||null),u&&i.adjustRowIndices(a[u-1])),a},renderHeader:function(){},_autoRowId:0,insertRow:function(e,t,n,r,i){var o=this.id+"-row-"+(this.collection&&this.collection.getIdentity?this.collection.getIdentity(e):this._autoRowId++),s=a(o),l=s&&s.previousSibling;return s&&(s===n&&(n=(n.connected||n).nextSibling),this.removeRow(s,!1,i)),s=this.renderRow(e,i),s.className=(s.className||"")+" dgrid-row "+(r%2===1?m:v)+(this.addUiClasses?" ui-state-default":""),this._rowIdToObject[s.id=o]=e,t.insertBefore(s,n||null),s.rowIndex=r,l&&l.rowIndex!==s.rowIndex-1&&this.adjustRowIndices(l),s},renderRow:function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t},removeRow:function(e,t){e=e.element||e,delete this._rowIdToObject[e.id],t||n.destroy(e)},row:function(e){var t;if(e instanceof this._Row)return e;e.target&&e.target.nodeType&&(e=e.target);{if(!e.nodeType)return"object"==typeof e?t=this.collection.getIdentity(e):(t=e,e=this._rowIdToObject[this.id+"-row-"+t]),new this._Row(t,e,a(this.id+"-row-"+t));var n;do{var r=e.id;if(n=this._rowIdToObject[r])return new this._Row(r.substring(this.id.length+5),n,e);e=e.parentNode}while(e&&e!==this.domNode)}},cell:function(e){return{row:this.row(e)}},_move:function(e,t,n,r){var i,o,s;s=o=e.element,t=t||1;do if(i=o[0>t?"previousSibling":"nextSibling"]){do if(o=i,o&&(o.className+" ").indexOf(n+" ")>-1){s=o,t+=0>t?1:-1;break}while(i=(!r||!o.hidden)&&o[0>t?"lastChild":"firstChild"])}else if(o=o.parentNode,!o||o===this.bodyNode||o===this.headerNode)break;while(t);return s},up:function(e,t,n){return e.element||(e=this.row(e)),this.row(this._move(e,-(t||1),"dgrid-row",n))},down:function(e,t,n){return e.element||(e=this.row(e)),this.row(this._move(e,t||1,"dgrid-row",n))},scrollTo:function(e){"undefined"!=typeof e.x&&(this.bodyNode.scrollLeft=e.x),"undefined"!=typeof e.y&&(this.bodyNode.scrollTop=e.y)},getScrollPosition:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},get:function(e){var t="_get"+e.charAt(0).toUpperCase()+e.slice(1);return"function"==typeof this[t]?this[t].apply(this,[].slice.call(arguments,1)):(o("dojo-built")||"function"!=typeof this[t+"Attr"]||console.warn("dgrid: Use "+t+" instead of "+t+"Attr for getting "+e),this[e])},set:function(e,t){if("object"==typeof e)for(var n in e)this.set(n,e[n]);else{var r="_set"+e.charAt(0).toUpperCase()+e.slice(1);"function"==typeof this[r]?this[r].apply(this,[].slice.call(arguments,1)):(o("dojo-built")||"function"!=typeof this[r+"Attr"]||console.warn("dgrid: Use "+r+" instead of "+r+"Attr for setting "+e),this[e]=t)}return this},_getClass:f,_setClass:c,_getClassName:f,_setClassName:c,_setSort:function(e,t){this.sort="string"!=typeof e?e:[{property:e,descending:t}],this._applySort()},_applySort:function(){if(this.refresh(),this._lastCollection){var e=this.sort;if(e&&e.length>0){var t=e[0].property,n=!!e[0].descending;this._lastCollection.sort(function(e,r){var i=e[t],o=r[t];return void 0===i&&(i=""),void 0===o&&(o=""),i===o?0:i>o!==n?1:-1})}this.renderArray(this._lastCollection)}},_setShowHeader:function(e){var t=this.headerNode;this.showHeader=e,r.toggle(t,"dgrid-header-hidden",!e),this.renderHeader(),this.resize(),e&&(t.scrollLeft=this.getScrollPosition().x)},_setShowFooter:function(e){this.showFooter=e,r.toggle(this.footerNode,"dgrid-footer-hidden",!e),this.resize()}});return b.autoIdPrefix="dgrid_",b}),define("dgrid/Grid",["dojo/_base/declare","dojo/_base/lang","dojo/dom-construct","dojo/dom-class","dojo/on","dojo/has","./List","./util/misc","dojo/_base/sniff"],function(e,t,n,r,i,o,s,a){function l(e,t){t&&t.nodeType&&e.appendChild(t)}function u(e){return a.escapeCssIdentifier(e,"-")}var d=e(s,{columns:null,hasNeutralSort:!1,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(e){return"object"!=typeof e?this.columns[e]:this.cell(e).column},listType:"grid",cell:function(e,t){if(e.column&&e.element)return e;e.target&&e.target.nodeType&&(e=e.target);var n;if(e.nodeType)do{if(this._rowIdToObject[e.id])break;var r=e.columnId;if(r){t=r,n=e;break}e=e.parentNode}while(e&&e!==this.domNode);if(!n&&"undefined"!=typeof t){var i=this.row(e),o=i&&i.element;if(o)for(var s=o.getElementsByTagName("td"),a=0;a<s.length;a++)if(s[a].columnId===t){n=s[a];break}}return null!=e?{row:i||this.row(e),column:t&&this.column(t),element:n}:void 0},createRowCells:function(e,t,r,i,s){var a,l,d,c,f,h,p,g,m,v,y,_,b,w=n.create("table",{className:"dgrid-row-table",role:"presentation"}),x=o("ie")<9?n.create("tbody",null,w):w;for(r=r||this.subRows,l=0,d=r.length;d>l;l++)for(h=r[l],a=n.create("tr",null,x),h.className&&(a.className=h.className),c=0,f=h.length;f>c;c++)p=h[c],g=p.id,m=p.field?" field-"+u(p.field):"",v="function"==typeof p.className?p.className(i):p.className,v&&(m+=" "+v),y=n.create(e,{className:"dgrid-cell"+(g?" dgrid-column-"+u(g):"")+m,role:"th"===e?"columnheader":"gridcell"}),y.columnId=g,_=p.colSpan,_&&(y.colSpan=_),b=p.rowSpan,b&&(y.rowSpan=b),t(y,p,i,s),a.appendChild(y);return w},_createBodyRowCell:function(e,t,n,r){var i=n;t.get?i=t.get(n):"field"in t&&"_item"!==t.field&&(i=n[t.field]),t.renderCell?l(e,t.renderCell(n,i,e,r)):this._defaultRenderCell.call(t,n,i,e,r)},_createHeaderRowCell:function(e,t){var n=t.headerNode=e,r=t.field;r&&(e.field=r),t.renderHeaderCell?l(n,t.renderHeaderCell(n)):("label"in t||t.field)&&n.appendChild(document.createTextNode("label"in t?t.label:t.field)),t.sortable!==!1&&r&&"_item"!==r&&(e.sortable=!0,e.className+=" dgrid-sortable")},left:function(e,t){return e.element||(e=this.cell(e)),this.cell(this._move(e,-(t||1),"dgrid-cell"))},right:function(e,t){return e.element||(e=this.cell(e)),this.cell(this._move(e,t||1,"dgrid-cell"))},_defaultRenderCell:function(e,t,n){if(this.formatter){var r=this.formatter,i=this.grid.formatterScope;n.innerHTML="string"==typeof r&&i?i[r](t,e):this.formatter(t,e)}else null!=t&&n.appendChild(document.createTextNode(t))},renderRow:function(e,r){var i=this.createRowCells("td",t.hitch(this,"_createBodyRowCell"),r&&r.subRows,e,r),o=n.create("div",{role:"row"});return o.appendChild(i),o},renderHeader:function(){var e=this,r=this.headerNode;r.setAttribute("role","row"),n.empty(r);var s=this.createRowCells("th",t.hitch(this,"_createHeaderRowCell"),this.subRows&&this.subRows.headerRows);this._rowIdToObject[s.id=this.id+"-header"]=this.columns,r.appendChild(s),this._sortListener&&this._sortListener.remove(),this._sortListener=i(s,"click,keydown",function(t){if("click"===t.type||32===t.keyCode||!o("opera")&&13===t.keyCode){var n,s,a,l,u=t.target;do if(u.sortable){n=u.field||u.columnId,s=e.sort[0],a=e.hasNeutralSort&&s&&s.property===n&&s.descending?[]:[{property:n,descending:s&&s.property===n&&!s.descending}],l={bubbles:!0,cancelable:!0,grid:e,parentType:t.type,sort:a},i.emit(t.target,"dgrid-sort",l)&&(e._sortNode=u,e.set("sort",a));break}while((u=u.parentNode)&&u!==r)}})},resize:function(){var e,t=this.headerNode.firstChild,n=this.contentNode;this.inherited(arguments),n.style.width="",n&&t&&(e=t.offsetWidth)>n.offsetWidth&&(n.style.width=e+"px")},destroy:function(){this._destroyColumns(),this._sortListener&&this._sortListener.remove(),this.inherited(arguments)},_setSort:function(){this.inherited(arguments),this.updateSortArrow(this.sort)},_findSortArrowParent:function(e){var t=this.columns;for(var n in t){var r=t[n];if(r.field===e)return r.headerNode}},updateSortArrow:function(e,t){if(this._lastSortedArrow&&(r.remove(this._lastSortedArrow.parentNode,"dgrid-sort-up dgrid-sort-down"),n.destroy(this._lastSortedArrow),delete this._lastSortedArrow),t&&(this.sort=e),e[0]){var i,o=e[0].property,s=e[0].descending,a=this._sortNode||this._findSortArrowParent(o);delete this._sortNode,a&&(a=a.contents||a,i=this._lastSortedArrow=n.create("div",{className:"dgrid-sort-arrow ui-icon",innerHTML:"&nbsp;",role:"presentation"},a,"first"),r.add(a,"dgrid-sort-"+(s?"down":"up")),this.resize())}},styleColumn:function(e,t){return this.addCssRule("#"+a.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+u(e),t)},_configColumns:function(e,t){function n(n,o){"string"==typeof n&&(t[o]=n={label:n}),i||n.field||(n.field=o),o=n.id=n.id||(isNaN(o)?o:e+o),this._configColumn&&(this._configColumn(n,t,e),o=n.id),i&&(this.columns[o]=n),n.grid=this,r.push(n)}var r=[],i=t instanceof Array;return a.each(t,n,this),i?t:r},_destroyColumns:function(){this.cleanup()},configStructure:function(){var e=this.subRows,t=this._columns=this.columns;if(this.columns=!t||t instanceof Array?{}:t,e)for(var n=0;n<e.length;n++)e[n]=this._configColumns(n+"-",e[n]);else this.subRows=[this._configColumns("",t)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(e){this._destroyColumns(),this.subRows=null,this.columns=e,this._updateColumns()},_setSubRows:function(e){this._destroyColumns(),this.subRows=e,this._updateColumns()},_updateColumns:function(){this.configStructure(),this.renderHeader(),this.refresh(),this._lastCollection&&this.renderArray(this._lastCollection),this._started&&(this.sort.length?(this._lastSortedArrow=null,this.updateSortArrow(this.sort)):this.resize())}});return d.appendIfNode=l,d}),define("dojo/errors/create",["../_base/lang"],function(e){return function(t,n,r,i){r=r||Error;var o=function(e){if(r===Error){Error.captureStackTrace&&Error.captureStackTrace(this,o);var t,i=Error.call(this,e);for(t in i)i.hasOwnProperty(t)&&(this[t]=i[t]);this.message=e,this.stack=i.stack}else r.apply(this,arguments);n&&n.apply(this,arguments)};return o.prototype=e.delegate(r.prototype,i),o.prototype.name=t,o.prototype.constructor=o,o}}),define("dojo/errors/CancelError",["./create"],function(e){return e("CancelError",null,null,{dojoType:"cancel"})}),define("dojo/promise/Promise",["../_base/lang"],function(e){"use strict";function t(){throw new TypeError("abstract")}return e.extend(function(){},{then:function(e,n,r){t()},cancel:function(e,n){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},always:function(e){return this.then(e,e)},otherwise:function(e){return this.then(null,e)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})}),define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError","./promise/Promise","./has!config-deferredInstrumentation?./promise/instrumentation"],function(e,t,n,r,i){"use strict";var o=0,s=1,a=2,l="This deferred has already been fulfilled.",u=Object.freeze||function(){},d=function(t,n,r,i,o){e("config-deferredInstrumentation")&&n===a&&p.instrumentRejected&&0===t.length&&p.instrumentRejected(r,!1,i,o);for(var s=0;s<t.length;s++)c(t[s],n,r,i)},c=function(t,n,r,i){var l=t[n],u=t.deferred;if(l)try{var d=l(r);if(n===o)"undefined"!=typeof d&&h(u,n,d);else{if(d&&"function"==typeof d.then)return t.cancel=d.cancel,void d.then(f(u,s),f(u,a),f(u,o));h(u,s,d)}}catch(c){h(u,a,c)}else h(u,n,r);e("config-deferredInstrumentation")&&n===a&&p.instrumentRejected&&p.instrumentRejected(r,!!l,i,u.promise)},f=function(e,t){return function(n){h(e,t,n)}},h=function(e,t,n){if(!e.isCanceled())switch(t){case o:e.progress(n);break;case s:e.resolve(n);break;case a:e.reject(n)}},p=function(t){var i,f,h,g=this.promise=new r,m=this,v=!1,y=[];e("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(m,p),Error.captureStackTrace(g,p)),
this.isResolved=g.isResolved=function(){return i===s},this.isRejected=g.isRejected=function(){return i===a},this.isFulfilled=g.isFulfilled=function(){return!!i},this.isCanceled=g.isCanceled=function(){return v},this.progress=function(e,t){if(i){if(t===!0)throw new Error(l);return g}return d(y,o,e,null,m),g},this.resolve=function(e,t){if(i){if(t===!0)throw new Error(l);return g}return d(y,i=s,f=e,null,m),y=null,g};var _=this.reject=function(t,n){if(i){if(n===!0)throw new Error(l);return g}return e("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(h={},_),d(y,i=a,f=t,h,m),y=null,g};this.then=g.then=function(e,t,n){var r=[n,e,t];return r.cancel=g.cancel,r.deferred=new p(function(e){return r.cancel&&r.cancel(e)}),i&&!y?c(r,i,f,h):y.push(r),r.deferred.promise},this.cancel=g.cancel=function(e,r){if(i){if(r===!0)throw new Error(l)}else{if(t){var o=t(e);e="undefined"==typeof o?e:o}if(v=!0,!i)return"undefined"==typeof e&&(e=new n),_(e),e;if(i===a&&f===e)return e}},u(g)};return p.prototype.toString=function(){return"[object Deferred]"},i&&i(p),p}),define("dojo/when",["./Deferred","./promise/Promise"],function(e,t){"use strict";return function(n,r,i,o){var s=n&&"function"==typeof n.then,a=s&&n instanceof t;if(!s)return arguments.length>1?r?r(n):n:(new e).resolve(n);if(!a){var l=new e(n.cancel);n.then(l.resolve,l.reject,l.progress),n=l.promise}return r||i||o?n.then(r,i,o):n}}),define("dgrid/_StoreMixin",["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","dojo/aspect","dojo/dom-construct","dojo/has","dojo/on","dojo/when"],function(e,t,n,r,i,o,s,a){function l(e){if("object"!=typeof e)e=new Error(e);else if("cancel"===e.dojoType)return;var t=s.emit(this.domNode,"dgrid-error",{grid:this,error:e,cancelable:!0,bubbles:!0});t&&console.error(e)}return e(null,{collection:null,_renderedCollection:null,_rows:null,_observerHandle:null,shouldTrackCollection:!0,getBeforePut:!0,noDataMessage:"",loadingMessage:"",_total:0,constructor:function(){this.dirty={},this._updating={},this._columnsWithSet={},r.before(this,"configStructure",t.hitch(this,function(){this._columnsWithSet={}}))},destroy:function(){this.inherited(arguments),this._renderedCollection&&this._cleanupCollection(),this._refreshTimeout&&clearTimeout(this._refreshTimeout)},_configColumn:function(e){e.set&&(this._columnsWithSet[e.field]=e),this.inherited(arguments)},_setCollection:function(e){if(this._renderedCollection&&(this.cleanup(),this._cleanupCollection({shouldRevert:!e||e.storage!==this._renderedCollection.storage})),this.collection=e,this._started){if(e){var t=e;this.sort&&this.sort.length>0&&(t=e.sort(this.sort)),t.track&&this.shouldTrackCollection&&(t=t.track(),this._rows=[],this._observerHandle=this._observeCollection(t,this.contentNode,{rows:this._rows})),this._renderedCollection=t}this.refresh()}},_setStore:function(){this.collection||console.debug("set('store') call detected, but you probably meant set('collection')")},_getTotal:function(){return this._total},_cleanupCollection:function(e){e=e||{},this._renderedCollection.tracking&&this._renderedCollection.tracking.remove(),this._observerHandle&&(this._observerHandle.remove(),this._observerHandle=this._rows=null),e.shouldRevert!==!1&&(this.dirty={}),this._renderedCollection=this.collection=null},_applySort:function(){this.collection?this.set("collection",this.collection):this.store&&console.debug("_StoreMixin found store property but not collection; this is often the sign of a mistake during migration from 0.3 to 0.4")},_emitRefreshComplete:function(){var e=this;this._refreshTimeout=setTimeout(function(){s.emit(e.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:e}),e._refreshTimeout=null},0)},_insertNoDataNode:function(e){e=e||this.contentNode;var t=this.noDataNode=i.create("div",{className:"dgrid-no-data",innerHTML:this.noDataMessage});return e.insertBefore(t,this._getFirstRowSibling&&this._getFirstRowSibling(e)),t},row:function(){var e=this.inherited(arguments);return e&&e.data&&"undefined"!=typeof e.id&&(e.id=this.collection.getIdentity(e.data)),e},refresh:function(){var e=this.inherited(arguments);return this.collection||this._insertNoDataNode(),e},refreshCell:function(e){if(!this.collection||!this._createBodyRowCell)throw new Error("refreshCell requires a Grid with a collection.");return this.inherited(arguments),this.collection.get(e.row.id).then(t.hitch(this,"_refreshCellFromItem",e))},_refreshCellFromItem:function(e,n,r){var o=e.element;i.empty(o);var s=this.dirty&&this.dirty[e.row.id];s&&(n=t.delegate(n,s)),this._createBodyRowCell(o,e.column,n,r)},renderArray:function(){var e=this.inherited(arguments);return this.collection||e.length&&this.noDataNode&&i.destroy(this.noDataNode),e},insertRow:function(e,n,r,o,s){var a,l,u=this.collection,d=this.dirty,c=u&&u.getIdentity(e);return c in d&&!(c in this._updating)&&(a=d[c]),a&&(e=t.delegate(e,a)),l=this.inherited(arguments),s&&s.rows&&(s.rows[o]=l),this.noDataNode&&(i.destroy(this.noDataNode),this.noDataNode=null),l},updateDirty:function(e,t,n){var r=this.dirty,i=r[e];i||(i=r[e]={}),i[t]=n},save:function(){function e(e,n){return function(o){var a,l,u=t._columnsWithSet,d=t._updating;if("function"==typeof o.set)o.set(n);else for(a in n)o[a]=n[a];for(a in u)l=u[a].set(o),void 0!==l&&(o[a]=l);return d[e]=!0,r.put(o).then(function(t){return delete i[e],delete d[e],s[e]=t,s})}}var t=this,r=this.collection,i=this.dirty,o=new n,s={},a=function(e){var n;return t.getBeforePut||!(n=t.row(e).data)?function(){return r.get(e)}:function(){return n}},l=o.then(function(){return s});for(var u in i){var d=e(u,i[u]);l=l.then(a(u)).then(d)}return o.resolve(),l},revert:function(){this.dirty={},this.refresh()},_trackError:function(e){"string"==typeof e&&(e=t.hitch(this,e));var r,i=this;try{r=a(e())}catch(o){var s=new n;s.reject(o),r=s.promise}return r.otherwise(function(e){l.call(i,e)}),r},removeRow:function(e,t,n){var r={element:e};t||this.up(r).element!==e||this.down(r).element!==e||this._insertNoDataNode();var i=n&&n.rows||this._rows;return i&&delete i[e.rowIndex],this.inherited(arguments)},renderQueryResults:function(e,n,r){r=t.mixin({rows:this._rows},r);var i=this;return o("dojo-built")||e.totalLength.then(function(e){null==e&&console.warn("Store reported null or undefined totalLength. Make sure your store (and service, if applicable) are reporting total correctly!")}),e.then(function(e){var t=i.renderArray(e,n,r);return delete i._lastCollection,t})},_observeCollection:function(e,t,n){var r,i=this,o=n.rows,s=[e.on("delete, update",function(e){var s=e.previousIndex,a=e.index;void 0!==s&&o[s]&&("max"in o&&(void 0===a||a<o.min||a>o.max)&&o.max--,r=o[s],r.parentNode===t&&i.removeRow(r,!1,n),o.splice(s,1),("delete"===e.type||"update"===e.type&&(a>s||void 0===a))&&o[s]&&o[s].rowIndex--),"delete"===e.type&&(r=null)}),e.on("add, update",function(e){function s(){a=(a.connected||a).nextSibling}var a,l=e.previousIndex,u=e.index;void 0===u||"max"in o&&!(u>=o.min&&u<=o.max)||("max"in o&&(void 0===l||l<o.min||l>o.max)&&o.max++,o.length?(a=o[u],a||(a=o[u-1],a&&s())):a=i._getFirstRowSibling&&i._getFirstRowSibling(t),r&&a&&r.id===a.id&&s(),a&&!a.parentNode&&(a=document.getElementById(a.id)),o.splice(u,0,void 0),r=i.insertRow(e.target,t,a,u,n),i.highlightRow(r)),r=null}),e.on("add, delete, update",function(t){var n="undefined"!=typeof t.previousIndex?t.previousIndex:1/0,r="undefined"!=typeof t.index?t.index:1/0,s=Math.min(n,r);n!==r&&o[s]&&i.adjustRowIndices(o[s]),n!==1/0&&i._processScroll&&(o[n]||o[n-1])&&i._processScroll(),i._onNotification(o,t,e),e===i._renderedCollection&&"totalLength"in t&&(i._total=t.totalLength)})];return{remove:function(){for(;s.length>0;)s.pop().remove()}}},_onNotification:function(){}})}),define("dgrid/OnDemandList",["./List","./_StoreMixin","dojo/_base/declare","dojo/_base/lang","dojo/dom-construct","dojo/on","dojo/when","./util/misc"],function(e,t,n,r,i,o,s,a){return n([e,t],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:1/0,bufferRows:10,farOffRemoval:2e3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:a.defaultDelay,keepScrollPosition:!1,rowHeight:0,postCreate:function(){this.inherited(arguments);var e=this;o(this.bodyNode,"scroll",a[this.pagingMethod](function(t){e._processScroll(t)},null,this.pagingDelay))},renderQuery:function(e,t){var n,o=this,a=t&&t.container||this.contentNode,l={query:e,count:0},u=this.preload,d={node:i.create("div",{className:"dgrid-preload",style:{height:"0"}},a),count:0,query:e,next:l};d.node.rowIndex=0,l.node=n=i.create("div",{className:"dgrid-preload"},a),l.previous=d,n.rowIndex=this.minRowsPerPage,u?((l.next=u.next)&&n.offsetTop>=u.node.offsetTop?l.previous=u:(l.next=u,l.previous=u.previous),l.previous.next=l,l.next.previous=l):this.preload=l;var c=i.create("div",{className:"dgrid-loading"},n,"before"),f=i.create("div",{className:"dgrid-below"},c);return f.innerHTML=this.loadingMessage,t=r.mixin({start:0,count:this.minRowsPerPage},"level"in e?{queryLevel:e.level}:null),this._trackError(function(){var r=e(t);return o.renderQueryResults(r,n,t).then(function(e){return r.totalLength.then(function(r){var a=e.length,u=n.parentNode;return o._rows&&(o._rows.min=0,o._rows.max=a===r?1/0:a-1),i.destroy(c),"queryLevel"in t||(o._total=r),0===r&&u&&(o.noDataNode&&i.destroy(o.noDataNode),o._insertNoDataNode(u)),o._calcAverageRowHeight(e),r-=a,l.count=r,n.rowIndex=a,r?n.style.height=Math.min(r*o.rowHeight,o.maxEmptySpace)+"px":n.style.display="none",o._previousScrollPosition&&(o.scrollTo(o._previousScrollPosition),delete o._previousScrollPosition),s(o._processScroll()).then(function(){return e})})}).otherwise(function(e){throw i.destroy(c),e})})},refresh:function(e){var t=this,n=e&&e.keepScrollPosition;return"undefined"==typeof n&&(n=this.keepScrollPosition),n&&(this._previousScrollPosition=this.getScrollPosition()),this.inherited(arguments),this._renderedCollection?this.renderQuery(function(e){return t._renderedCollection.fetchRange({start:e.start,end:e.start+e.count})}).then(function(){t._emitRefreshComplete()}):void 0},resize:function(){this.inherited(arguments),this.rowHeight||this._calcAverageRowHeight(this.contentNode.getElementsByClassName("dgrid-row")),this._processScroll()},cleanup:function(){this.inherited(arguments),this.preload=null},renderQueryResults:function(e){var t=this.inherited(arguments),n=this._renderedCollection;return n&&n.releaseRange&&t.then(function(t){t[0]&&!t[0].parentNode.tagName&&e.totalLength.then(function(){n.releaseRange(t[0].rowIndex,t[t.length-1].rowIndex+1)})}),t},_getFirstRowSibling:function(e){return e.lastChild},_calcRowHeight:function(e){var t=e.nextSibling;return t&&!/\bdgrid-preload\b/.test(t.className)?t.offsetTop-e.offsetTop:e.offsetHeight},_calcAverageRowHeight:function(e){for(var t=e.length,n=0,r=0;t>r;r++)n+=this._calcRowHeight(e[r]);t&&n&&(this.rowHeight=n/t)},lastScrollTop:0,_processScroll:function(e){function t(e,t,r,o){var s=l.farOffRemoval,a=e.node;if(t>2*s){for(var u,d,c=a[r],f=0,h=0,p=[],g=c&&c.rowIndex;u=c;){var m=l._calcRowHeight(u);if(f+m+s>t||c.className.indexOf("dgrid-row")<0&&c.className.indexOf("dgrid-loading")<0)break;c=u[r],f+=m,h+=u.count||1,l.removeRow(u,!0),p.push(u),"rowIndex"in u&&(d=u.rowIndex)}l._renderedCollection.releaseRange&&"number"==typeof g&&"number"==typeof d&&(o?l._renderedCollection.releaseRange(d,g+1):l._renderedCollection.releaseRange(g,d+1),l._rows[o?"max":"min"]=d,l._rows.max>=l._total-1&&(l._rows.max=1/0)),e.count+=h,o?(a.rowIndex-=h,n(e)):a.style.height=a.offsetHeight+f+"px";for(var v=document.createElement("div"),y=p.length;y--;)v.appendChild(p[y]);setTimeout(function(){i.destroy(v)},1)}}function n(e,t){e.node.style.height=Math.min(e.count*l.rowHeight,t?1/0:l.maxEmptySpace)+"px"}function r(e,t){do e=t?e.next:e.previous;while(e&&!e.node.offsetWidth);return e}if(this.rowHeight){var o,s,a,l=this,u=l.bodyNode,d=e&&e.scrollTop||this.getScrollPosition().y,c=u.offsetHeight+d,f=l.preload,h=l.lastScrollTop,p=l.bufferRows*l.rowHeight,g=p-l.rowHeight,m=!0,v=1;for(l.lastScrollTop=d;f&&!f.node.offsetWidth;)f=f.previous;for(;f&&f!==o;){o=l.preload,l.preload=f,s=f.node;var y,_=s.offsetTop;if(_>c+v+g)f=r(f,m=!1);else if(d-v-g>_+(y=s.offsetHeight))f=r(f,m=!0);else{var b=((s.rowIndex?d-p:c)-_)/l.rowHeight,w=(c-d+2*p)/l.rowHeight,x=Math.max(Math.min((d-h)*l.rowHeight,l.maxRowsPerPage/2),l.maxRowsPerPage/-2);if(w+=Math.min(Math.abs(x),10),0===s.rowIndex&&(b-=w),b=Math.max(b,0),10>b&&b>0&&w+b<l.maxRowsPerPage&&(w+=Math.max(0,b),b=0),w=Math.min(Math.max(w,l.minRowsPerPage),l.maxRowsPerPage,f.count),0===w){f=r(f,m);continue}w=Math.ceil(w),b=Math.min(Math.floor(b),f.count-w);var C={};f.count-=w;var S,N=s,j=l.queryRowsOverlap,T=(s.rowIndex>0||s.offsetTop>d)&&f;if(T){var E=f.previous;E&&(t(E,d-(E.node.offsetTop+E.node.offsetHeight),"nextSibling"),b>0&&E.node===s.previousSibling?(b=Math.min(f.count,b),f.previous.count+=b,n(f.previous,!0),s.rowIndex+=b,j=0):w+=b,f.count-=b),C.start=s.rowIndex-j,C.count=Math.min(w+j,l.maxRowsPerPage),s.rowIndex=C.start+C.count}else f.next&&(t(f.next,f.next.node.offsetTop-c,"previousSibling",!0),N=s.nextSibling,N===f.next.node?(f.next.count+=f.count-b,f.next.node.rowIndex=b+w,n(f.next),f.count=b,j=0):S=!0),C.start=f.count,C.count=Math.min(w+j,l.maxRowsPerPage);if(S&&N&&N.offsetWidth&&(S=N.offsetTop),n(f),"level"in f.query&&(C.queryLevel=f.query.level),!("queryLevel"in C)&&(C.start>l._total||C.count<0))continue;var I=i.create("div",{className:"dgrid-loading",style:{height:w*l.rowHeight+"px"}},N,"before");i.create("div",{className:"dgrid-"+(T?"below":"above"),innerHTML:l.loadingMessage},I),I.count=w,l._trackError(function(){!function(e,t,r){var o=f.query(C);a=l.renderQueryResults(o,e,C).then(function(s){var a=l._rows;if(!a||"queryLevel"in C||!s.length||(t?(a.max<=a.min&&(a.min=s[0].rowIndex),a.max=s[s.length-1].rowIndex):(a.max<=a.min&&(a.max=s[s.length-1].rowIndex),a.min=s[0].rowIndex)),N=e.nextSibling,i.destroy(e),r&&N&&N.offsetWidth){var u=l.getScrollPosition();l.scrollTo({x:u.x,y:u.y+N.offsetTop-r,preserveMomentum:!0})}return o.totalLength.then(function(e){"queryLevel"in C||(l._total=e,l._rows&&l._rows.max>=l._total-1&&(l._rows.max=1/0)),t&&(t.count=e-t.node.rowIndex,n(t))}),l._processScroll(),s},function(t){throw i.destroy(e),t})}(I,T,S)}),f=f.previous}}return a}}})}),define("dgrid/OnDemandGrid",["dojo/_base/declare","./Grid","./OnDemandList"],function(e,t,n){return e([t,n],{})}),define("dgrid/Keyboard",["dojo/_base/declare","dojo/aspect","dojo/dom-class","dojo/on","dojo/_base/lang","dojo/has","./util/misc","dojo/_base/sniff"],function(e,t,n,r,i,o,s){function a(e){e.preventDefault()}var l={checkbox:1,radio:1,button:1},u=/\bdgrid-cell\b/,d=/\bdgrid-row\b/,c=e(null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments),this.keyMap||(this.keyMap=i.mixin({},c.defaultKeyMap)),this.headerKeyMap||(this.headerKeyMap=i.mixin({},c.defaultHeaderKeyMap))},postCreate:function(){function e(e){var t=e.target;return t.type&&(!l[t.type]||32===e.keyCode)}function n(n){function o(){if(i._focusedHeaderNode&&(i._focusedHeaderNode.tabIndex=-1),i.showHeader){if(a){for(var e,t=i.headerNode.getElementsByTagName("th"),n=0;e=t[n];++n)if(l.test(e.className)){i._focusedHeaderNode=f=e;break}}else i._focusedHeaderNode=f=i.headerNode;f&&(f.tabIndex=i.tabIndex)}}function s(){var e=i._focusedNode||f;if(!l.test(e.className)||!n.contains(e)){for(var t,r=n.getElementsByTagName("*"),o=0;t=r[o];++o)if(l.test(t.className)){e=i._focusedNode=t;break}f.tabIndex=-1,e.tabIndex=i.tabIndex}}var a=i.cellNavigation,l=a?u:d,c=n===i.headerNode,f=n;c?(o(),t.after(i,"renderHeader",o,!0)):(t.after(i,"renderArray",s,!0),t.after(i,"_onNotification",function(e,t){0===t.totalLength?n.tabIndex=0:1===t.totalLength&&"add"===t.type&&s()},!0)),i._listeners.push(r(n,"mousedown",function(t){e(t)||i._focusOnNode(t.target,c,t)})),i._listeners.push(r(n,"keydown",function(t){if(!t.metaKey&&!t.altKey){var n=i[c?"headerKeyMap":"keyMap"][t.keyCode];n&&!e(t)&&n.call(i,t)}}))}this.inherited(arguments);var i=this;this.tabableHeader&&(n(this.headerNode),r(this.headerNode,"dgrid-cellfocusin",function(){i.scrollTo({x:this.scrollLeft})})),n(this.contentNode),this._debouncedEnsureScroll=s.debounce(this._ensureScroll,this)},removeRow:function(e){if(!this._focusedNode)return this.inherited(arguments);var t,n=this,r=document.activeElement===this._focusedNode,i=this[this.cellNavigation?"cell":"row"](this._focusedNode),o=i.row||i;e=e.element||e,e===o.element&&(t=this.down(o,!0),t&&t.element!==e||(t=this.up(o,!0)),this._removedFocus={active:r,rowId:o.id,columnId:i.column&&i.column.id,siblingId:t&&t.element!==e?t.id:void 0},setTimeout(function(){n._removedFocus&&n._restoreFocus(o.id)},0),this._focusedNode=null),this.inherited(arguments)},insertRow:function(){var e=this.inherited(arguments);return this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(e),e},_restoreFocus:function(e){var t,r,i=this._removedFocus;if(e=e&&this.row(e),t=e&&e.element&&e.id===i.rowId?e:"undefined"!=typeof i.siblingId&&this.row(i.siblingId),t&&t.element){if(!t.element.parentNode.parentNode)return void(i.wait=!0);"undefined"!=typeof i.columnId&&(r=this.cell(t,i.columnId),r&&r.element&&(t=r)),i.active&&0!==t.element.offsetHeight?this._focusOnNode(t,!1,null):(n.add(t.element,"dgrid-focus"),t.element.tabIndex=this.tabIndex,this._focusedNode=t.element)}delete this._removedFocus},addKeyHandler:function(e,n,r){return t.after(this[r?"headerKeyMap":"keyMap"],e,n,!0)},_ensureRowScroll:function(e){var t=this.getScrollPosition().y;t>e.offsetTop?this.scrollTo({y:e.offsetTop}):t+this.contentNode.offsetHeight<e.offsetTop+e.offsetHeight&&this.scrollTo({y:e.offsetTop-this.contentNode.offsetHeight+e.offsetHeight})},_ensureColumnScroll:function(e){var t=this.getScrollPosition().x,n=e.offsetLeft;if(t>n)this.scrollTo({x:n});else{var r=this.bodyNode.clientWidth,i=e.offsetWidth,o=n+i;o>t+r&&this.scrollTo({x:r>i?o-r:n})}},_ensureScroll:function(e,t){this.cellNavigation&&(this.columnSets||this.subRows.length>1)&&!t&&this._ensureRowScroll(e.row.element),this.bodyNode.clientWidth<this.contentNode.offsetWidth&&this._ensureColumnScroll(e.element)},_focusOnNode:function(e,t,o){var s,a,l,c,f,h="_focused"+(t?"Header":"")+"Node",p=this[h],g=this.cellNavigation?"cell":"row",m=this[g](e);if(e=m&&m.element){if(this.cellNavigation)for(s=e.getElementsByTagName("input"),f=0,l=s.length;l>f;f++)if(a=s[f],(-1!==a.tabIndex||"_dgridLastValue"in a)&&!a.disabled){a.focus(),c=!0;break}null!==o&&(o=i.mixin({grid:this},o),o.type&&(o.parentType=o.type),o.bubbles||(o.bubbles=!0)),p&&(n.remove(p,"dgrid-focus"),p.removeAttribute("tabindex"),o&&(o[g]=this[g](p),r.emit(p,"dgrid-cellfocusout",o))),p=this[h]=e,o&&(o[g]=m);var v=this.cellNavigation?u:d;!c&&v.test(e.className)&&(e.tabIndex=this.tabIndex,e.focus()),n.add(e,"dgrid-focus"),o&&r.emit(p,"dgrid-cellfocusin",o),this._debouncedEnsureScroll(m,t)}},focusHeader:function(e){this._focusOnNode(e||this._focusedHeaderNode,!0)},focus:function(e){var t=e||this._focusedNode;t?this._focusOnNode(t,!1):(this._removedFocus&&(this._removedFocus.active=!0),this.contentNode.focus())}}),f=c.moveFocusVertical=function(e,t){var n=this.cellNavigation,r=this[n?"cell":"row"](e),i=n&&r.column.id,o=this.down(this._focusedNode,t,!0);n&&(o=this.cell(o,i)),this._focusOnNode(o,!1,e),e.preventDefault()},h=c.moveFocusUp=function(e){f.call(this,e,-1)},p=c.moveFocusDown=function(e){f.call(this,e,1)},g=c.moveFocusPageUp=function(e){f.call(this,e,-this.pageSkip)},m=c.moveFocusPageDown=function(e){f.call(this,e,this.pageSkip)},v=c.moveFocusHorizontal=function(e,t){if(this.cellNavigation){var n=!this.row(e),r=this["_focused"+(n?"Header":"")+"Node"];this._focusOnNode(this.right(r,t),n,e),e.preventDefault()}},y=c.moveFocusLeft=function(e){v.call(this,e,-1)},_=c.moveFocusRight=function(e){v.call(this,e,1)},b=c.moveHeaderFocusEnd=function(e,t){var n;this.cellNavigation&&(n=this.headerNode.getElementsByTagName("th"),this._focusOnNode(n[t?0:n.length-1],!0,e)),e.preventDefault()},w=c.moveHeaderFocusHome=function(e){b.call(this,e,!0)},x=c.moveFocusEnd=function(e,n){var r,s=this.cellNavigation,a=this.contentNode,l=n?0:a.scrollHeight,u=a.scrollTop+l,d=a[n?"firstChild":"lastChild"],c=d.className.indexOf("dgrid-preload")>-1,f=c?d[(n?"next":"previous")+"Sibling"]:d;if(e.preventDefault(),this.scrollTo({y:u}),c){for(;f&&f.className.indexOf("dgrid-row")<0;)f=f[(n?"next":"previous")+"Sibling"];if(!f)return}!c||d.offsetHeight<1?(s&&(f=this.cell(f,this.cell(e).column.id)),this._focusOnNode(f,!1,e)):(o("dom-addeventlistener")||(e=i.mixin({},e)),r=t.after(this,"renderArray",function(t){var i=t[n?0:t.length-1];return s&&(i=this.cell(i,this.cell(e).column.id)),this._focusOnNode(i,!1,e),r.remove(),t}))},C=c.moveFocusHome=function(e){x.call(this,e,!0)};return c.defaultKeyMap={32:a,33:g,34:m,35:x,36:C,37:y,38:h,39:_,40:p},c.defaultHeaderKeyMap={32:a,35:b,36:w,37:y,39:_},c}),define("dojo/selector/_loader",["../has","require"],function(e,t){if("undefined"!=typeof document){var n=document.createElement("div");e.add("dom-qsa2.1",!!n.querySelectorAll),e.add("dom-qsa3",function(){try{return n.innerHTML="<p class='TEST'></p>",1==n.querySelectorAll(".TEST:empty").length}catch(e){}})}var r,i="./acme",o="./lite";return{load:function(n,s,a,l){if(l&&l.isBuild)return void a();var u=t;if(n="default"==n?e("config-selectorEngine")||"css3":n,n="css2"==n||"lite"==n?o:"css2.1"==n?e("dom-qsa2.1")?o:i:"css3"==n?e("dom-qsa3")?o:i:"acme"==n?i:(u=s)&&n,"?"==n.charAt(n.length-1)){n=n.substring(0,n.length-1);var d=!0}return d&&(e("dom-compliant-qsa")||r)?a(r):void u([n],function(e){"./lite"!=n&&(r=e),a(e)})}}}),define("dojo/query",["./_base/kernel","./has","./dom","./on","./_base/array","./_base/lang","./selector/_loader","./selector/_loader!default"],function(e,t,n,r,i,o,s,a){"use strict";function l(e,t){var r=function(r,i){if("string"==typeof i&&(i=n.byId(i),!i))return new t([]);var o="string"==typeof r?e(r,i):r?r.end&&r.on?r:[r]:[];return o.end&&o.on?o:new t(o)};if(r.matches=e.match||function(e,t,n){return r.filter([e],t,n).length>0},r.filter=e.filter||function(e,t,n){return r(t,n).filter(function(t){return i.indexOf(e,t)>-1})},"function"!=typeof e){var o=e.search;e=function(e,t){return o(t||document,e)}}return r}t.add("array-extensible",function(){return 1==o.delegate([],{length:1}).length&&!t("bug-for-in-skips-shadowed")});var u=Array.prototype,d=u.slice,c=u.concat,f=i.forEach,h=function(e,t,n){var r=new(n||this._NodeListCtor||b)(e);return t?r._stash(t):r},p=function(t,n,r){return n=[0].concat(d.call(n,0)),r=r||e.global,function(e){return n[0]=e,t.apply(r,n)}},g=function(e,t){return function(){return this.forEach(p(e,arguments,t)),this}},m=function(e,t){return function(){return this.map(p(e,arguments,t))}},v=function(e,t){return function(){return this.filter(p(e,arguments,t))}},y=function(t,n,r){return function(){var i=arguments,o=p(t,i,r);return n.call(r||e.global,i)?this.map(o):(this.forEach(o),this)}},_=function(e){var n=this instanceof b&&t("array-extensible");"number"==typeof e&&(e=Array(e));var r=e&&"length"in e?e:arguments;if(n||!r.sort){for(var i=n?this:[],s=i.length=r.length,a=0;s>a;a++)i[a]=r[a];if(n)return i;r=i}return o._mixin(r,w),r._NodeListCtor=function(e){return b(e)},r},b=_,w=b.prototype=t("array-extensible")?[]:{};b._wrap=w._wrap=h,b._adaptAsMap=m,b._adaptAsForEach=g,b._adaptAsFilter=v,b._adaptWithCondition=y,f(["slice","splice"],function(e){var t=u[e];w[e]=function(){return this._wrap(t.apply(this,arguments),"slice"==e?this:null)}}),f(["indexOf","lastIndexOf","every","some"],function(t){var n=i[t];w[t]=function(){return n.apply(e,[this].concat(d.call(arguments,0)))}}),o.extend(_,{constructor:b,_NodeListCtor:b,toString:function(){return this.join(",")},_stash:function(e){return this._parent=e,this},on:function(e,t){var n=this.map(function(n){return r(n,e,t)});return n.remove=function(){for(var e=0;e<n.length;e++)n[e].remove()},n},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(e){var t=d.call(this,0),n=i.map(arguments,function(e){return d.call(e,0)});return this._wrap(c.apply(t,n),this)},map:function(e,t){return this._wrap(i.map(this,e,t),this)},forEach:function(e,t){return f(this,e,t),this},filter:function(e){var t=arguments,n=this,r=0;if("string"==typeof e){if(n=x._filterResult(this,t[0]),1==t.length)return n._stash(this);r=1}return this._wrap(i.filter(n,t[r],t[r+1]),this)},instantiate:function(e,t){var n=o.isFunction(e)?e:o.getObject(e);return t=t||{},this.forEach(function(e){new n(t,e)})},at:function(){var e=new this._NodeListCtor(0);return f(arguments,function(t){0>t&&(t=this.length+t),this[t]&&e.push(this[t])},this),e._stash(this)}});var x=l(a,_);return e.query=l(a,function(e){return _(e)}),x.load=function(e,t,n){s.load(e,t,function(e){n(l(e,_))})},e._filterQueryResult=x._filterResult=function(e,t,n){return new _(x.filter(e,t,n))},e.NodeList=x.NodeList=_,x}),define("dgrid/Editor",["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","dojo/dom-construct","dojo/dom-class","dojo/on","dojo/has","dojo/query","./Grid","dojo/_base/sniff"],function(e,t,n,r,i,o,s,a,l){return e(null,{constructor:function(){this._editorInstances={},this._editorColumnListeners=[],this._editorCellListeners={},this._editorsPendingStartup=[]},postCreate:function(){var e=this;this.inherited(arguments),this.on(".dgrid-input:focusin",function(){e._focusedEditorCell=e.cell(this)}),this._editorFocusoutHandle=o.pausable(this.domNode,".dgrid-input:focusout",function(){e._focusedEditorCell=null}),this._listeners.push(this._editorFocusoutHandle)},insertRow:function(){this._editorRowListeners={};var e=this.inherited(arguments),t=this.row(e),n=this._editorCellListeners[e.id]=this._editorCellListeners[e.id]||{};for(var r in this._editorRowListeners)n[r]=this._editorRowListeners[r];this._editorRowListeners=null;var i=this._previouslyFocusedEditorCell;return i&&i.row.id===t.id&&this.edit(this.cell(t,i.column.id)),e},refresh:function(){for(var e in this._editorInstances){var t=this._editorInstances[e].domNode;t&&t.parentNode&&t.parentNode.removeChild(t)}this.inherited(arguments)},removeRow:function(e){var t=this,n=this._focusedEditorCell;if(n&&n.row.id===this.row(e).id&&(this._previouslyFocusedEditorCell=n,this._editorFocusoutHandle.pause(),setTimeout(function(){t._editorFocusoutHandle.resume(),t._previouslyFocusedEditorCell=null},0)),this._editorCellListeners[e.id]){for(var r in this._editorCellListeners[e.id])this._editorCellListeners[e.id][r].remove();delete this._editorCellListeners[e.id]}for(var i=this._alwaysOnWidgetColumns.length;i--;){var o=this.cell(e,this._alwaysOnWidgetColumns[i].id).element,s=o&&(o.contents||o).widget;s&&(this._editorFocusoutHandle.pause(),s.destroyRecursive())}return this.inherited(arguments)},renderArray:function(){var e=this.inherited(arguments);return e.length?this._startupPendingEditors():this._editorsPendingStartup=[],e},_onNotification:function(){this.inherited(arguments),this._startupPendingEditors()},_destroyColumns:function(){this._editorStructureCleanup(),this.inherited(arguments)},_editorStructureCleanup:function(){var e=this._editorInstances,t=this._editorColumnListeners;this._editTimer&&clearTimeout(this._editTimer);for(var n in e){var r=e[n];r.domNode&&r.destroyRecursive()}this._editorInstances={};for(var i=t.length;i--;)t[i].remove();for(var o in this._editorCellListeners)for(n in this._editorCellListeners[o])this._editorCellListeners[o][n].remove();for(i=0;i<this._editorColumnListeners.length;i++)this._editorColumnListeners[i].remove();this._editorCellListeners={},this._editorColumnListeners=[],this._editorsPendingStartup=[]},_configColumns:function(){var e=this.inherited(arguments);this._alwaysOnWidgetColumns=[];for(var t=0,n=e.length;n>t;t++)e[t].editor&&this._configureEditorColumn(e[t]);return e},_configureEditorColumn:function(e){var t=e.editor,n=this,r=e.renderCell||this._defaultRenderCell,i=e.editOn,s="string"!=typeof t;i?this._editorInstances[e.id]=this._createSharedEditor(e,r):s&&this._alwaysOnWidgetColumns.push(e),e.renderCell=i?function(t,s,a,l){if(!l||!l.alreadyHooked){var u=o(a,i,function(){n._activeOptions=l,n.edit(this)});if(n._editorRowListeners)n._editorRowListeners[e.id]=u;else{var d=n.row(t);n._editorCellListeners[d.element.id][e.id]=u}}return r.call(e,t,s,a,l)}:function(t,i,o,a){if(e.canEdit&&!e.canEdit(t,i))return r.call(e,t,i,o,a);var l=n._createEditor(e,t);n._showEditor(l,e,o,i),o[s?"widget":"input"]=l}},edit:function(e){function t(e){d._activeCell=i,d._showEditor(l,r,i,a),l.focus&&l.focus(),r._editorBlurHandle&&r._editorBlurHandle.resume(),d._editTimer=null,e.resolve(l)}var r,i,o,s,a,l,u,d=this;if(e.column||(e=this.cell(e)),!e||!e.element)return null;if(r=e.column,s=r.field,i=e.element.contents||e.element,l=this._editorInstances[r.id]){if(this._activeCell!==i){var c=e.row;if(o=this.dirty&&this.dirty[c.id],a=o&&s in o?o[s]:r.get?r.get(c.data):c.data[s],!r.canEdit||r.canEdit(e.row.data,a)){u=new n;var f=l.domNode||l;return f.offsetWidth?(f.blur(),setTimeout(function(){t(u)},0)):t(u),u.promise}}}else if(r.editor&&(l=i.widget||i.input))return u=new n,l.focus&&l.focus(),u.resolve(l),u.promise;return null},refreshCell:function(e){var t,r=e.column,i=r.get?r.get(e.row.data):e.row.data[r.field];return r.editor&&(e.column.editOn&&this._activeCell===e.element?t=this._editorInstances[e.column.id]:e.column.editOn||(t=e.element.widget||e.element.input)),t?(t.domNode?t.set("value",i):this._updateInputValue(t,i),(new n).resolve()):this.inherited(arguments)},_showEditor:function(e,t,n,r){var o=e.domNode;o||this._updateInputValue(e,r),n.innerHTML="",i.add(n,"dgrid-cell-editing"),o&&t.editOn&&e.validate&&e.reset&&e.reset(),n.appendChild(e.domNode||e),o&&!t.editOn?this._editorsPendingStartup.push([e,t,n,r]):this._startupEditor(e,t,n,r)},_startupEditor:function(e,t,n,r){e.domNode&&(e._started||e.startup(),e._dgridIgnoreChange=!0,e.set("value",r),setTimeout(function(){e._dgridIgnoreChange=!1},0)),e._dgridLastValue=r,this._activeCell&&(this._activeValue=r,o.emit(n,"dgrid-editor-show",{grid:this,cell:this.cell(n),column:t,editor:e,bubbles:!0,cancelable:!1}))},_startupPendingEditors:function(){for(var e=this._editorsPendingStartup,t=e.length;t--;)this._startupEditor.apply(this,e[t]);this._editorsPendingStartup=[]},_handleEditorChange:function(e,t){var n=e.target;"_dgridLastValue"in n&&n.className.indexOf("dgrid-input")>-1&&this._updatePropertyFromEditor(t||this.cell(n).column,n,e)},_createEditor:function(e,n){var i,a,l,u,d=e.editor,c=e.editOn,f=this,h="string"!=typeof d&&d,p={};if(i=e.editorArgs||{},"function"==typeof i&&(i=i.call(this,e)),h)a=new h(i),l=a.focusNode||a.domNode,l.className+=" dgrid-input",a.on(c?"blur":"change",function(){a._dgridIgnoreChange||f._updatePropertyFromEditor(e,this,{type:"widget"})});else if(this._hasInputListener||(this._hasInputListener=!0,this.on("change",function(e){f._handleEditorChange(e)})),"textarea"===d?u="textarea":(u="input",p.type=d),a=l=r.create(u,t.mixin(p,{className:"dgrid-input",name:e.field,tabIndex:isNaN(e.tabIndex)?-1:e.tabIndex},i)),s("ie")<9){var g;g="radio"===d||"checkbox"===d?o(a,"click",function(t){f._handleEditorChange(t,e)}):o(a,"change",function(t){f._handleEditorChange(t,e)}),c?this._editorColumnListeners.push(g):this._editorRowListeners?this._editorRowListeners[e.id]=g:this._editorCellListeners[this.row(n).element.id][e.id]=g}if(e.autoSelect){var m=a.focusNode||a;m.select&&o(m,"focus",function(){setTimeout(function(){m.select()},0)})}return a},_createSharedEditor:function(e){function n(){var e=c._activeCell;p.blur(),"function"==typeof c.focus&&setTimeout(function(){c.focus(e)},f&&s("ie")<9?15:0)}function a(){var n=h.parentNode,s={alreadyHooked:!0},a=c.cell(h);o.emit(a.element,"dgrid-editor-hide",{grid:c,cell:a,column:e,editor:d,bubbles:!0,cancelable:!1}),e._editorBlurHandle.pause(),n.removeChild(h),a.row&&(i.remove(a.element,"dgrid-cell-editing"),r.empty(n),l.appendIfNode(n,e.renderCell(a.row.data,c._activeValue,n,c._activeOptions?t.delegate(s,c._activeOptions):s))),c._focusedEditorCell=c._activeCell=c._activeValue=c._activeOptions=null;
}function u(t){var r=t.keyCode||t.which;27===r?(g(),c._activeValue=d._dgridLastValue,n()):13===r&&e.dismissOnEnter!==!1&&n()}var d=this._createEditor(e),c=this,f=d.domNode,h=d.domNode||d,p=d.focusNode||h,g=f?function(){d.set("value",d._dgridLastValue)}:function(){c._updateInputValue(d,d._dgridLastValue),c._updatePropertyFromEditor(e,d)};return this._editorColumnListeners.push(o(p,"keydown",u)),(e._editorBlurHandle=o.pausable(d,"blur",a)).pause(),this._editorColumnListeners.push(e._editorBlurHandle),d},_updatePropertyFromEditor:function(e,t,n){var r,i,o;if((!t.isValid||t.isValid())&&(r=this._updateProperty((t.domNode||t).parentNode,this._activeCell?this._activeValue:t._dgridLastValue,this._retrieveEditorValue(e,t),n),this._activeCell?this._activeValue=r:t._dgridLastValue=r,"radio"===t.type&&t.name&&!e.editOn&&e.field)){o=this.row(t),a("input[type=radio][name="+t.name+"]",this.contentNode).forEach(function(n){var r=this.row(n);n!==t&&n._dgridLastValue&&(n._dgridLastValue=!1,this.updateDirty?this.updateDirty(r.id,e.field,!1):r.data[e.field]=!1)},this);for(i in this.dirty)o.id.toString()!==i&&this.dirty[i][e.field]&&this.updateDirty(i,e.field,!1)}},_updateProperty:function(e,t,n,r){var i=this;if((t&&t.valueOf())!==(n&&n.valueOf())){var s=this.cell(e),a=s.row,l=s.column;if(e=s.element,l.field&&a){var u={grid:this,cell:s,oldValue:t,value:n,bubbles:!0,cancelable:!0};if(r&&r.type&&(u.parentType=r.type),!o.emit(e,"dgrid-datachange",u)){var d;return(d=e.widget)?(d._dgridIgnoreChange=!0,d.set("value",t),setTimeout(function(){d._dgridIgnoreChange=!1},0)):(d=e.input)&&this._updateInputValue(d,t),t}this.updateDirty?(this.updateDirty(a.id,l.field,n),l.autoSave&&setTimeout(function(){i._trackError("save")},0)):a.data[l.field]=n}}return n},_updateInputValue:function(e,t){e.value=t,("radio"===e.type||"checkbox"===e.type)&&(e.checked=e.defaultChecked=!!t)},_retrieveEditorValue:function(e,t){return"function"==typeof t.get?this._convertEditorValue(t.get("value")):this._convertEditorValue(t["checkbox"===t.type||"radio"===t.type?"checked":"value"])},_convertEditorValue:function(e,t){if("number"==typeof t)e=isNaN(e)?e:parseFloat(e);else if("boolean"==typeof t)e="true"===e?!0:"false"===e?!1:e;else if(t instanceof Date){var n=new Date(e);e=isNaN(n.getTime())?e:n}return e}})}),define("dgrid/Selection",["dojo/_base/declare","dojo/dom-class","dojo/on","dojo/has","dojo/aspect","./List","dojo/has!touch?./util/touch","dojo/query","dojo/_base/sniff","dojo/dom"],function(e,t,n,r,i,o,s){function a(e,t){for(var n=e.unselectable=t?"on":"",r=e.getElementsByTagName("*"),i=r.length;--i;)"INPUT"!==r[i].tagName&&"TEXTAREA"!==r[i].tagName&&(r[i].unselectable=n)}function l(e,t){var o=e.bodyNode,s=t?"text":r("ff")<21?"-moz-none":"none";d&&"msUserSelect"!==d?o.style[d]=s:r("dom-selectstart")?t||e._selectstartHandle?t&&e._selectstartHandle&&(e._selectstartHandle.remove(),delete e._selectstartHandle):e._selectstartHandle=n(o,"selectstart",function(e){var t=e.target&&e.target.tagName;"INPUT"!==t&&"TEXTAREA"!==t&&e.preventDefault()}):(a(o,!t),t||e._unselectableHandle?t&&e._unselectableHandle&&(e._unselectableHandle.remove(),delete e._unselectableHandle):e._unselectableHandle=i.after(e,"renderRow",function(e){return a(e,!0),e}))}r.add("dom-comparedocumentposition",function(e,t,n){return!!n.compareDocumentPosition}),r.add("dom-selectstart","undefined"!=typeof document.onselectstart);var u=r("mac")?"metaKey":"ctrlKey",d=r("css-user-select"),c=r("pointer"),f=c&&"MS"===c.slice(0,2),h=c?c+(f?"Down":"down"):"mousedown",p=c?c+(f?"Up":"up"):"mouseup";return"WebkitUserSelect"===d&&"undefined"!=typeof document.documentElement.style.msUserSelect&&(d=!1),e(null,{selectionDelegate:".dgrid-row",selectionEvents:h+","+p+",dgrid-cellfocusin",selectionTouchEvents:r("touch")?s.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){return this.selection={},this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this._initSelectionEvents();var e=this.selectionMode;this.selectionMode="",this._setSelectionMode(e)},destroy:function(){this.inherited(arguments),this._selectstartHandle&&this._selectstartHandle.remove(),this._unselectableHandle&&this._unselectableHandle.remove(),this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(e){e!==this.selectionMode&&(this.clearSelection(),this.selectionMode=e,this._selectionHandlerName="_"+e+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},_setAllowTextSelection:function(e){"undefined"!=typeof e?l(this,e):l(this,"none"===this.selectionMode),this.allowTextSelection=e},_handleSelect:function(e,t){!this[this._selectionHandlerName]||!this.allowSelect(this.row(t))||"dgrid-cellfocusin"===e.type&&"mousedown"===e.parentType||e.type===p&&t!==this._waitForMouseUp||(this._waitForMouseUp=null,this._selectionTriggerEvent=e,e.keyCode&&e.ctrlKey&&32!==e.keyCode||(!e.shiftKey&&e.type===h&&this.isSelected(t)?this._waitForMouseUp=t:this[this._selectionHandlerName](e,t)),this._selectionTriggerEvent=null)},_singleSelectionHandler:function(e,t){var n=e.keyCode?e.ctrlKey:e[u];this._lastSelected===t?this.select(t,null,!n||!this.isSelected(t)):(this.clearSelection(),this.select(t),this._lastSelected=t)},_multipleSelectionHandler:function(e,t){var n,r=this._lastSelected,i=e.keyCode?e.ctrlKey:e[u];e.shiftKey||(n=i?null:!0,r=null),this.select(t,r,n),r||(this._lastSelected=t)},_extendedSelectionHandler:function(e,t){(2===e.button?this.isSelected(t):e.keyCode?e.ctrlKey:e[u])||this.clearSelection(null,!0),this._multipleSelectionHandler(e,t)},_toggleSelectionHandler:function(e,t){this.select(t,null,null)},_initSelectionEvents:function(){var e=this,t=this.contentNode,o=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]},r("touch")&&!r("pointer")&&this.selectionTouchEvents?(n(t,s.selector(o,this.selectionTouchEvents),function(t){e._handleSelect(t,this),e._ignoreMouseSelect=this}),n(t,n.selector(o,this.selectionEvents),function(t){e._ignoreMouseSelect!==this?e._handleSelect(t,this):t.type===p&&(e._ignoreMouseSelect=null)})):n(t,n.selector(o,this.selectionEvents),function(t){e._handleSelect(t,this)}),this.addKeyHandler&&this.addKeyHandler(32,function(t){e._handleSelect(t,t.target)}),this.allowSelectAll&&this.on("keydown",function(t){t[u]&&65===t.keyCode&&!/\bdgrid-input\b/.test(t.target.className)&&(t.preventDefault(),e[e.allSelected?"clearSelection":"selectAll"]())}),this._setCollection&&i.before(this,"_setCollection",function(t){e._updateDeselectionAspect(t)}),this._updateDeselectionAspect()},_updateDeselectionAspect:function(e){function t(e,t){var n=r.row(e),i=n&&r.selection[n.id];i&&r[t](n)}var n,r=this;this._removeDeselectSignals&&this._removeDeselectSignals(),n=e&&e.track&&this._observeCollection?[i.before(this,"_observeCollection",function(e){n.push(e.on("delete",function(e){"undefined"==typeof e.index&&t(e.id,"deselect")}))}),i.after(this,"_observeCollection",function(e){n.push(e.on("update",function(n){"undefined"!=typeof n.index&&t(e.getIdentity(n.target),"select")}))},!0)]:[i.before(this,"removeRow",function(e,t){var n;t||(n=this.row(e),n&&n.id in this.selection&&this.deselect(n))})],this._removeDeselectSignals=function(){for(var e=n.length;e--;)n[e].remove();n=[]}},allowSelect:function(){return!0},_fireSelectionEvent:function(e){var t,r=this._selectionEventQueues[e],i=this._selectionTriggerEvent;t={bubbles:!0,grid:this},i&&(t.parentType=i.type),t[this._selectionTargetType]=r,this._selectionEventQueues[e]=[],n.emit(this.contentNode,"dgrid-"+e,t)},_fireSelectionEvents:function(){var e,t=this._selectionEventQueues;for(e in t)t[e].length&&this._fireSelectionEvent(e)},_select:function(e,n,r){var i,o,s,a,l;if("undefined"==typeof r&&(r=!0),e.element||(e=this.row(e)),(r===!1||this.allowSelect(e))&&(i=this.selection,o=!!i[e.id],null===r&&(r=!o),s=e.element,r||this.allSelected?i[e.id]=r:delete this.selection[e.id],s&&(r?t.add(s,"dgrid-selected"+(this.addUiClasses?" ui-state-active":"")):t.remove(s,"dgrid-selected ui-state-active")),r!==o&&s&&this._selectionEventQueues[(r?"":"de")+"select"].push(e),n)){if(n.element||(n=this.row(n)),!n)return this._lastSelected=s,void console.warn("The selection range has been reset because the beginning of the selection is no longer in the DOM. If you are using OnDemandList, you may wish to increase farOffRemoval to avoid this, but note that keeping more nodes in the DOM may impact performance.");if(a=n.element)for(l=this._determineSelectionDirection(s,a),l||(a=document.getElementById(a.id),l=this._determineSelectionDirection(s,a));e.element!==a&&(e=this[l](e));)this._select(e,null,r)}},_determineSelectionDirection:r("dom-comparedocumentposition")?function(e,t){var n=t.compareDocumentPosition(e);return 1&n?!1:2===n?"down":"up"}:function(e,t){return t.sourceIndex<1?!1:t.sourceIndex>e.sourceIndex?"down":"up"},select:function(e,t,n){this._select(e,t,n),this._fireSelectionEvents()},deselect:function(e,t){this.select(e,t,!1)},clearSelection:function(e,t){this.allSelected=!1;for(var n in this.selection)e!==n&&this._select(n,null,!1);t||(this._lastSelected=null),this._fireSelectionEvents()},selectAll:function(){this.allSelected=!0,this.selection={};for(var e in this._rowIdToObject){var t=this.row(this._rowIdToObject[e]);this._select(t.id,null,!0)}this._fireSelectionEvents()},isSelected:function(e){return"undefined"==typeof e||null===e?!1:(e.element||(e=this.row(e)),e.id in this.selection?!!this.selection[e.id]:this.allSelected&&(!e.data||this.allowSelect(e)))},refresh:function(){return this.deselectOnRefresh&&this.clearSelection(),this._lastSelected=null,this.inherited(arguments)},renderArray:function(){var e,t,n,r=this.inherited(arguments),i=this.selection;for(e=0;e<r.length;e++)t=this.row(r[e]),n=t.id in i?i[t.id]:this.allSelected,n&&this.select(t,null,n);return this._fireSelectionEvents(),r}})}),define("dgrid/Selector",["dojo/_base/declare","dojo/_base/lang","dojo/_base/sniff","dojo/dom-construct","dojo/dom-class","./Selection"],function(e,t,n,r,i,o){return e(o,{postCreate:function(){this.inherited(arguments),this.on(".dgrid-selector:click,.dgrid-selector:keydown",t.hitch(this,"_handleSelectorClick")),this.on("dgrid-select",t.hitch(this,"_changeSelectorInput",!0)),this.on("dgrid-deselect",t.hitch(this,"_changeSelectorInput",!1))},_defaultRenderSelectorInput:function(e,t,n,o){var s=e.grid;return i.add(n,"dgrid-selector"),n.input=r.create("input",{"aria-checked":t,checked:t,disabled:!s.allowSelect(s.row(o)),tabIndex:isNaN(e.tabIndex)?-1:e.tabIndex,type:e.selector},n)},_configureSelectorColumn:function(e){var t=this,n=e.selector;this._selectorColumns.push(e),this._selectorSingleRow=this._selectorSingleRow||"radio"===e.selector;var r="function"==typeof n?n:this._defaultRenderSelectorInput;e.sortable=!1,e.renderCell=function(n,i,o){var s=n&&t.row(n);i=s&&t.selection[s.id],r(e,!!i,o,n)},e.renderHeaderCell=function(n){var i="label"in e?e.label:e.field||"";"radio"!==e.selector&&t.allowSelectAll?(e._selectorHeaderCheckbox=r(e,!1,n,{}),t._hasSelectorHeaderCheckbox=!0):n.appendChild(document.createTextNode(i))}},_handleSelectorClick:function(e){if("INPUT"!==e.target.nodeName||"keydown"!==e.type||32!==e.keyCode){var t=this.cell(e),r=t.row;if("click"===e.type||32===e.keyCode||!n("opera")&&13===e.keyCode||0===e.keyCode){if(this._selectionTriggerEvent=e,r){if(this.allowSelect(r)){var i=this._lastSelected&&this.row(this._lastSelected);this._selectorSingleRow?i&&i.id===r.id||(this.clearSelection(),this.select(r,null,!0),this._lastSelected=r.element):r&&(e.shiftKey?this._changeSelectorInput(!0,{rows:[r]}):i=null,i=e.shiftKey?i:null,this.select(i||r,r,i?void 0:null),this._lastSelected=r.element)}}else this[this.allSelected?"clearSelection":"selectAll"]();this._selectionTriggerEvent=null}}},_changeSelectorInput:function(e,t){this._selectorColumns.length&&this._updateRowSelectors(e,t),this._hasSelectorHeaderCheckbox&&this._updateHeaderCheckboxes()},_updateRowSelectors:function(e,t){for(var n=t.rows,r=n.length,i=this._selectorColumns.length,o=0;r>o;o++)for(var s=0;i>s;s++){var a=this._selectorColumns[s],l=this.cell(n[o],a.id).element;l&&(l=(l.contents||l).input,l&&!l.disabled&&(l.checked=e,l.setAttribute("aria-checked",e)))}},_updateHeaderCheckboxes:function(){for(var e=this._selectorColumns.length,t=0;e>t;t++){var n,r,i=this._selectorColumns[t],o="false",s=i._selectorHeaderCheckbox;if(s){n=this.selection,r=!1;for(var a in n)if(n[a]!=this.allSelected){r=!0;break}s.indeterminate=r,s.checked=this.allSelected,r?o="mixed":this.allSelected&&(o="true"),s.setAttribute("aria-checked",o)}}},configStructure:function(){this.inherited(arguments);var e=this.columns;this._selectorColumns=[],this._hasSelectorHeaderCheckbox=this._selectorSingleRow=!1;for(var t in e)e[t].selector&&this._configureSelectorColumn(e[t])},_handleSelect:function(e){var t=this.cell(e).column;t&&t.selector||this.inherited(arguments)}})}),define("dgrid/CellSelection",["dojo/_base/declare","dojo/aspect","dojo/dom-class","dojo/on","dojo/has","./Selection"],function(e,t,n,r,i,o){return e(o,{selectionDelegate:".dgrid-cell",_selectionTargetType:"cells",_select:function(e,t,r){var i,o;if("undefined"==typeof r&&(r=!0),"object"==typeof e&&"element"in e){if(!e.row){if(r&&"object"==typeof r)for(o in r)this._select(this.cell(e.id,o),null,r[o]);else for(o in this.columns)this._select(this.cell(e.id,o),null,r);return}}else e=this.cell(e);if(this.allowSelect(e)){var s=this.selection,a=e.row.id,l=s[a];if(!e.column){for(i in this.columns)this._select(this.cell(a,i),null,r);return}var u=l&&l[e.column.id];null===r&&(r=!u);var d=e.element;l=l||{},l[e.column.id]=r,this.selection[a]=l;var c=!1;for(i in l)if(l[i]===!0){c=!0;break}if(c||delete this.selection[a],d&&(r?n.add(d,"dgrid-selected"+(this.addUiClasses?" ui-state-active":"")):n.remove(d,"dgrid-selected ui-state-active")),r!=u&&d&&this._selectionEventQueues[(r?"":"de")+"select"].push(e),t){if(t.element||(t=this.cell(t)),!t||!t.row)return this._lastSelected=d,void console.warn("The selection range has been reset because the beginning of the selection is no longer in the DOM. If you are using OnDemandList, you may wish to increase farOffRemoval to avoid this, but note that keeping more nodes in the DOM may impact performance.");var f=t.element,h=e.element,p=this._determineSelectionDirection(h,f);p||(t=this.cell(document.getElementById(t.row.element.id),f.columnId),f=t&&t.element,p=this._determineSelectionDirection(h,f));var g,m=e.column.id,v=t.column.id,y=[];for(o in this.columns)if(g&&y.push(o),o===m&&(m=y)||o===v&&(v=y)){if(y.push(o),g||m==y&&o==v)break;g=!0}var _=e.row,b=_.element;f=t.row.element;do{for(i=0;i<y.length;i++)e=this.cell(b,y[i]),this._select(e,null,r);if(b==f)break}while(b=e.row.element[p])}}},_determineSelectionDirection:function(){var e=this.inherited(arguments);return"down"===e?"nextSibling":"up"===e?"previousSibling":e},isSelected:function(e,t){if("undefined"==typeof e||null===e)return!1;e.element||(e=this.cell(e,t));var n=e.row.id;return n in this.selection?!!this.selection[n][e.column.id]:this.allSelected&&(!e.row.data||this.allowSelect(e))},clearSelection:function(e){e=!1,this.inherited(arguments)}})}),define("dgrid/extensions/nls/columnHider",{root:{popupTriggerLabel:"Show or hide columns",popupLabel:"Show or hide columns"},es:!0,ro:!0,sl:!0}),define("dgrid/extensions/ColumnHider",["dojo/_base/declare","dojo/dom-construct","dojo/has","dojo/on","../util/misc","./nls/columnHider"],function(e,t,n,r,i,o){function s(e,t){return e.id.substr(t.id.length+18)}var a,l;return e(null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:o,_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,_renderHiderMenuEntries:function(){var e,t,n,r,i=this.subRows,o=!0;for(delete this._columnHiderFirstCheckbox,n=0,e=i.length;e>n;n++)for(r=0,t=i[n].length;t>r;r++)this._renderHiderMenuEntry(i[n][r]),o&&(o=!1,this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[i[n][r].id])},_renderHiderMenuEntry:function(e){var n,r,o,s,a=e.id,l=i.escapeCssIdentifier(a,"-");e.hidden&&(e.hidden=!1,this._hideColumn(a),e.hidden=!0),e.unhidable||(n=t.create("div",{className:"dgrid-hider-menu-row"}),r=this.domNode.id+"-hider-menu-check-"+l,o=this._columnHiderCheckboxes[a]=t.create("input",{className:"dgrid-hider-menu-check hider-menu-check-"+l,id:r,type:"checkbox"},n),s=t.create("label",{className:"dgrid-hider-menu-label hider-menu-label-"+l,"for":r},n),s.appendChild(document.createTextNode(e.label||e.field||"")),this.hiderMenuNode.appendChild(n),e.hidden||(o.checked=!0))},renderHeader:function(){function e(e){e.stopPropagation()}var i,o=this,u=this.hiderMenuNode,d=this.hiderToggleNode;if(this.inherited(arguments),u){for(i in this._columnHiderRules)this._columnHiderRules[i].remove();u.innerHTML=""}else d=this.hiderToggleNode=t.create("button",{"aria-label":this.i18nColumnHider.popupTriggerLabel,className:"ui-icon dgrid-hider-toggle",type:"button"},this.domNode),this._listeners.push(r(d,"click",function(e){o._toggleColumnHiderMenu(e)})),u=this.hiderMenuNode=t.create("div",{"aria-label":this.i18nColumnHider.popupLabel,className:"dgrid-hider-menu",id:this.id+"-hider-menu",role:"dialog"}),this._listeners.push(r(u,"keyup",function(e){var t=e.charCode||e.keyCode;27===t&&(o._toggleColumnHiderMenu(e),d.focus())})),u.style.display="none",this.domNode.appendChild(u),this._listeners.push(r(u,".dgrid-hider-menu-check:"+(n("ie")<9?"click":"change"),function(e){o._updateColumnHiddenState(s(e.target,o),!e.target.checked)})),this._listeners.push(r(u,"mousedown",e),r(d,"mousedown",e)),l||(l=r.pausable(document,"mousedown",function(e){a&&a._toggleColumnHiderMenu(e)}),l.pause());this._columnHiderCheckboxes={},this._columnHiderRules={},this._renderHiderMenuEntries()},destroy:function(){this.inherited(arguments);for(var e in this._columnHiderRules)this._columnHiderRules[e].remove()},left:function(e,t){return this.right(e,-t)},right:function(e,t){e.element||(e=this.cell(e));for(var n=this.inherited(arguments),r=e;n.column.hidden;){if(n=this.inherited(arguments,[n,t>0?1:-1]),r.element===n.element)return e;r=n}return n},isColumnHidden:function(e){return!!this._columnHiderRules[e]},_toggleColumnHiderMenu:function(){var e,t=this._hiderMenuOpened,n=this.hiderMenuNode,r=this.domNode;n.style.display=t?"none":"",t?n.style.height="":(n.offsetHeight>r.offsetHeight-12&&(n.style.height=r.offsetHeight-12+"px"),(e=this._columnHiderFirstCheckbox)&&e.focus()),l[t?"pause":"resume"](),a=t?null:this,this._hiderMenuOpened=!t},_hideColumn:function(e){var t,r=this,o="#"+i.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-";this._columnHiderRules[e]||(this._columnHiderRules[e]=i.addCssRule(o+i.escapeCssIdentifier(e,"-"),"display: none;"),(8===n("ie")||10===n("ie"))&&(t=i.addCssRule(".dgrid-row-table","display: inline-table;"),window.setTimeout(function(){t.remove(),r.resize()},0)))},_showColumn:function(e){this._columnHiderRules[e]&&(this._columnHiderRules[e].remove(),delete this._columnHiderRules[e])},_updateColumnHiddenState:function(e,t){this[t?"_hideColumn":"_showColumn"](e),this.columns[e].hidden=t,r.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[e],hidden:t,bubbles:!0}),this.resize()},toggleColumnHiddenState:function(e,t){"undefined"==typeof t&&(t=!this._columnHiderRules[e]),this._updateColumnHiddenState(e,t),this._columnHiderCheckboxes[e]&&(this._columnHiderCheckboxes[e].checked=!t)}})}),define("dojo/string",["./_base/kernel","./_base/lang"],function(e,t){var n=/[&<>'"\/]/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},i={};return t.setObject("dojo.string",i),i.escape=function(e){return e?e.replace(n,function(e){return r[e]}):""},i.rep=function(e,t){if(0>=t||!e)return"";for(var n=[];1&t&&n.push(e),t>>=1;)e+=e;return n.join("")},i.pad=function(e,t,n,r){n||(n="0");var o=String(e),s=i.rep(n,Math.ceil((t-o.length)/n.length));return r?o+s:s+o},i.substitute=function(n,r,i,o){return o=o||e.global,i=i?t.hitch(o,i):function(e){return e},n.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(e,n,s){if(""==n)return"$";var a=t.getObject(n,!1,r);return s&&(a=t.getObject(s,!1,o).call(o,a,n)),i(a,n).toString()})},i.trim=String.prototype.trim?t.trim:function(e){e=e.replace(/^\s+/,"");for(var t=e.length-1;t>=0;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e},i}),define("dgrid/extensions/nls/pagination",{root:{status:"${start}–${end} of ${total}",gotoFirst:"Go to first page",gotoNext:"Go to next page",gotoPrev:"Go to previous page",gotoLast:"Go to last page",gotoPage:"Go to page",jumpPage:"Jump to page",rowsPerPage:"Number of rows per page"},ar:!0,de:!0,es:!0,fr:!0,ja:!0,pt:!0,ro:!0,sk:!0,sl:!0,th:!0,"zh-cn":!0,"zh-hk":!0}),define("dgrid/extensions/Pagination",["../_StoreMixin","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dojo/dom-class","dojo/on","dojo/query","dojo/string","dojo/has","dojo/when","../util/misc","./nls/pagination","dojo/_base/sniff"],function(e,t,n,r,i,o,s,a,l,u,d,c,f){function h(e){e.noDataNode?(i.destroy(e.noDataNode),delete e.noDataNode):e.cleanup(),e.contentNode.innerHTML=""}function p(e){if(e.loadingNode)i.destroy(e.loadingNode),delete e.loadingNode;else if(e._oldPageNodes){for(var t in e._oldPageNodes)e.removeRow(e._oldPageNodes[t]);delete e._oldPageNodes}delete e._isLoading}return t(e,{rowsPerPage:10,pagingTextBox:!1,previousNextArrows:!0,firstLastArrows:!1,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:!0,i18nPagination:f.root,showFooter:!0,_currentPage:1,buildRendering:function(){this.inherited(arguments);var e,t,n,r=this,a=this.paginationNode=i.create("div",{className:"dgrid-pagination"},this.footerNode),l=this.i18nPagination;this._updatePaginationSizeSelect(),this._updateRowsPerPageOption(),t=this.paginationNavigationNode=i.create("div",{className:"dgrid-navigation"},a),this.firstLastArrows&&(n=this.paginationFirstNode=i.create("span",{"aria-label":l.gotoFirst,className:"dgrid-first dgrid-page-link",innerHTML:"«",tabIndex:0},t)),this.previousNextArrows&&(n=this.paginationPreviousNode=i.create("span",{"aria-label":l.gotoPrev,className:"dgrid-status-circle dgrid-previous dgrid-page-link",innerHTML:'<svg id="arrowDown" viewBox="0 0 30 30"><g id="baseColor_1_"><circle fill="#FFF" cx="15" cy="15" r="15" id="baseColor"/></g><g id="outline_1_"><path fill="#9B9B9B" d="M15 1c7.7 0 14 6.3 14 14s-6.3 14-14 14S1 22.7 1 15 7.3 1 15 1m0-1C6.7 0 0 6.7 0 15s6.7 15 15 15 15-6.7 15-15S23.3 0 15 0z" id="outline"/></g><g id="arrow_1_"><g id="arrow"><path id="arrow_6_" fill="#404040" d="M9.5 13.9l5.5 5.6 5.5-5.6-1.4-1.4-4.1 4.1-4.1-4.1-1.4 1.4z"/></g></g></svg>',tabIndex:0},t)),e=this.paginationStatusNode=i.create("div",{className:"dgrid-status"},t),e.tabIndex=0,this._updatePaginationStatus(this._total),o.toggle(this.domNode,"dgrid-pagination"),this.paginationLinksNode=i.create("span",{className:"dgrid-pagination-links"},t),this.previousNextArrows&&(n=this.paginationNextNode=i.create("span",{"aria-label":l.gotoNext,className:"dgrid-status-circle dgrid-next dgrid-page-link",innerHTML:'<svg id="arrowUp" viewBox="0 0 30 30"><g id="baseColor_1_"><circle fill="#FFF" cx="15" cy="15" r="15" id="baseColor"/></g><g id="outline_1_"><path fill="#9B9B9B" d="M15 1c7.7 0 14 6.3 14 14s-6.3 14-14 14S1 22.7 1 15 7.3 1 15 1m0-1C6.7 0 0 6.7 0 15s6.7 15 15 15 15-6.7 15-15S23.3 0 15 0z" id="outline"/></g><g id="arrow_1_"><g id="arrow"><path id="arrow_6_" fill="#404040" d="M21 17.1l-5.5-5.6-5.5 5.6 1.4 1.4 4.1-4.1 4.1 4.1 1.4-1.4z"/></g></g></svg>',tabIndex:0},t)),this.firstLastArrows&&(n=this.paginationLastNode=i.create("span",{"aria-label":l.gotoLast,className:"dgrid-last dgrid-page-link",innerHTML:"»",tabIndex:0},t)),this._listeners.push(s(t,".dgrid-page-link:click,.dgrid-page-link:keydown",function(e){if("keydown"!==e.type||13===e.keyCode){var t,n,i=this.className;r._isLoading||i.indexOf("dgrid-page-disabled")>-1||(t=r._currentPage,n=Math.ceil(r._total/r.rowsPerPage),this===r.paginationPreviousNode?r.gotoPage(t-1):this===r.paginationNextNode?r.gotoPage(t+1):this===r.paginationFirstNode?r.gotoPage(1):this===r.paginationLastNode?r.gotoPage(n):"dgrid-page-link"===i&&r.gotoPage(+this.innerHTML))}}))},destroy:function(){this.inherited(arguments),this._pagingTextBoxHandle&&this._pagingTextBoxHandle.remove()},_updatePaginationSizeSelect:function(){var e,t=this.pageSizeOptions,n=this.paginationSizeSelect;if(t&&t.length){n||(n=this.paginationSizeSelect=i.create("select",{"aria-label":this.i18nPagination.rowsPerPage,className:"dgrid-page-size"},this.paginationNode),e=this._paginationSizeChangeHandle=s(n,"change",r.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)})),this._listeners.push(e)),n.options.length=0;for(var o=0;o<t.length;o++)i.create("option",{innerHTML:t[o],selected:this.rowsPerPage===t[o],value:t[o]},n);this._updateRowsPerPageOption()}else t&&t.length||!n||(i.destroy(n),this.paginationSizeSelect=null,this._paginationSizeChangeHandle.remove())},_setPageSizeOptions:function(e){this.pageSizeOptions=e&&e.sort(function(e,t){return e-t}),this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var e=this.rowsPerPage,t=this.pageSizeOptions,r=this.paginationSizeSelect;r&&(n.indexOf(t,e)<0?this._setPageSizeOptions(t.concat([e])):r.value=""+e)},_setRowsPerPage:function(e){this.rowsPerPage=e,this._updateRowsPerPageOption(),this.gotoPage(1)},_updateNavigation:function(e){function t(e,t){var n,r;c.pagingTextBox&&e===p&&v>1?(n=i.create("input",{"aria-label":f.jumpPage,className:"dgrid-page-input",type:"text",value:p},h),c._pagingTextBoxHandle=s(n,"change",function(){var e=+this.value;!isNaN(e)&&e>0&&v>=e&&c.gotoPage(+this.value)}),_&&"INPUT"===_.tagName&&n.focus()):(r=e===p,n=i.create("span",{"aria-label":f.gotoPage,className:"dgrid-page-link"+(r?" dgrid-page-disabled":""),innerHTML:e+(t?" ":""),tabIndex:r?-1:0},h),l===e&&(r?v>e?l++:u.focus():n.focus()),r||(u=n))}function n(e,t){o.toggle(e,"dgrid-page-disabled",t),e.tabIndex=t?-1:0}function r(){i.create("span",{className:"dgrid-page-skip",innerHTML:"..."},h)}var l,u,d,c=this,f=this.i18nPagination,h=this.paginationLinksNode,p=this._currentPage,g=this.pagingLinks,m=this.paginationNavigationNode,v=Math.ceil(e/this.rowsPerPage),y=this._pagingTextBoxHandle,_=document.activeElement;if(_&&this.paginationNavigationNode.contains(_)?"dgrid-page-link"===_.className&&(l=+_.innerHTML):_=null,y&&y.remove(),h.innerHTML="",a(".dgrid-first, .dgrid-previous",m).forEach(function(e){n(e,1===p)}),a(".dgrid-last, .dgrid-next",m).forEach(function(e){n(e,p>=v)}),g&&v>0){t(1,!0);var b=p-g;b>2?r():b=2;for(var w=b;w<Math.min(p+g+1,v);w++)t(w,!0);v>p+g+1&&r(),v>1&&t(v)}else c.pagingTextBox&&t(p);_&&-1===_.tabIndex&&(d=a('[tabindex="0"]',this.paginationNavigationNode),_===this.paginationPreviousNode||_===this.paginationFirstNode?_=d[0]:d.length&&(_=d[d.length-1]),_&&_.focus())},_updatePaginationStatus:function(e){var t=this.rowsPerPage,n=Math.min(e,(this._currentPage-1)*t+1);this.paginationStatusNode.innerHTML=l.substitute(this.i18nPagination.status,{start:n.toLocaleString(),end:Math.min(e,n+t-1).toLocaleString(),total:e.toLocaleString()})},refresh:function(e){var t=this,n=e&&e.keepCurrentPage?Math.min(this._currentPage,Math.ceil(this._total/this.rowsPerPage)):1;return this.inherited(arguments),this.gotoPage(n).then(function(e){return t._emitRefreshComplete(),e})},_onNotification:function(e,t,n){var r=this.rowsPerPage,i=this._currentPage*r,o="add"===t.type&&t.index<i||"delete"===t.type&&t.previousIndex<i||"update"===t.type&&Math.floor(t.index/r)!==Math.floor(t.previousIndex/r);o?this.gotoPage(Math.min(this._currentPage,Math.ceil(t.totalLength/this.rowsPerPage))||1):n===this._renderedCollection&&t.totalLength!==this._total&&(this._updatePaginationStatus(t.totalLength),this._updateNavigation(t.totalLength))},renderQueryResults:function(e,t){var n=this,r=this.inherited(arguments);return t||(this._topLevelRequest&&(this._topLevelRequest.cancel(),delete this._topLevelRequest),"function"==typeof r.cancel&&(this._topLevelRequest=r),r.then(function(){n._topLevelRequest&&delete n._topLevelRequest})),r},insertRow:function(){var e=this._oldPageNodes,t=this.inherited(arguments);return e&&t===e[t.id]&&delete e[t.id],t},gotoPage:function(e){var t=this,n=(this._currentPage-1)*this.rowsPerPage;return this._renderedCollection?(this._renderedCollection.releaseRange&&this._renderedCollection.releaseRange(n,n+this.rowsPerPage),this._trackError(function(){var n,r,o,s,a,l,u=t.rowsPerPage,d=(e-1)*u,c={start:d,count:u},f=t.contentNode;if(t.showLoadingMessage)h(t),r=t.loadingNode=i.create("div",{className:"dgrid-loading",innerHTML:t.loadingMessage},f);else for(t._oldPageNodes=o={},s=f.children,a=0,l=s.length;l>a;a++)o[s[a].id]=s[a];return t._isLoading=!0,n=t._renderedCollection.fetchRange({start:d,end:d+u}),t.renderQueryResults(n,null,c).then(function(r){return p(t),t.scrollTo({y:0}),t._rows&&(t._rows.min=d,t._rows.max=d+u-1),n.totalLength.then(function(n){n||(t.noDataNode&&(i.destroy(t.noDataNode),delete t.noDataNode),t._insertNoDataNode()),t._total=n,t._currentPage=e,t._rowsOnPage=r.length,t._updatePaginationStatus(n),t._updateNavigation(n)}),n},function(e){throw p(t),e})})):(console.warn("Pagination requires a collection to operate."),d([]))}})}),define("dstore/QueryMethod",[],function(){return function(e){var t=e.type,n=e.normalizeArguments,r=e.applyQuery,i=e.querierFactory;return function(){var e=Array.prototype.slice.call(arguments),o=n?n.apply(this,e):e,s={type:t,arguments:e,normalizedArguments:o},a=this._getQuerierFactory(t)||i;a&&(s.querier=a.apply(this,o));var l=this._createSubCollection({queryLog:this.queryLog.concat(s)});return r?r.call(this,l,s):l}}}),define("dstore/Filter",["dojo/_base/declare"],function(e){function t(e){return function(){var n=this.constructor,r=new n;return r.type=e,r.args=arguments,this.type?t("and").call(n.prototype,this,r):r}}var n=e(null,{constructor:function(e){var t=typeof e;switch(t){case"object":var n=this;for(var r in e){var i=e[r];n=i instanceof this.constructor?n[i.type](r,i.args[0]):i&&i.test?n.match(r,i):n.eq(r,i)}this.type=n.type,this.args=n.args;break;case"function":case"string":this.type=t,this.args=[e]}},and:t("and"),or:t("or"),eq:t("eq"),ne:t("ne"),lt:t("lt"),lte:t("lte"),gt:t("gt"),gte:t("gte"),contains:t("contains"),"in":t("in"),match:t("match")});return n.filterCreator=t,n}),define("dstore/Store",["dojo/_base/lang","dojo/_base/array","dojo/aspect","dojo/has","dojo/when","dojo/Deferred","dojo/_base/declare","./QueryMethod","./Filter","dojo/Evented"],function(e,t,n,r,i,o,s,a,l,u){function d(e){return function(t,n){var r=this;return i(t,function(t){var i={target:t},o=n[1]||{};"beforeId"in o&&(i.beforeId=o.beforeId),r.emit(e,i)}),t}}r.add("object-proto",!!{}.__proto__&&!{}.watch);var c=r("object-proto"),f=u;return s(f,{constructor:function(e){e&&s.safeMixin(this,e),this.Model&&this.Model.createSubclass&&(this.Model=this.Model.createSubclass([]).extend({_store:this})),this.storage=new u;var t=this;this.autoEmitEvents&&(n.after(this,"add",d("add")),n.after(this,"put",d("update")),n.after(this,"remove",function(e,n){return i(e,function(){t.emit("delete",{id:n[0]})}),e}))},autoEmitEvents:!0,idProperty:"id",queryAccessors:!0,getIdentity:function(e){return e.get?e.get(this.idProperty):e[this.idProperty]},_setIdentity:function(e,t){e.set?e.set(this.idProperty,t):e[this.idProperty]=t},forEach:function(e,t){var n=this;return i(this.fetch(),function(r){for(var i,o=0;void 0!==(i=r[o]);o++)e.call(t,i,o,n);return r})},on:function(e,t){return this.storage.on(e,t)},emit:function(e,t){t=t||{},t.type=e;try{return this.storage.emit(e,t)}finally{return t.cancelable}},parse:null,stringify:null,Model:null,_restore:function(t,n){var r=this.Model;if(r&&t){var i=r.prototype,o=i._restore;o?t=o.call(t,r,n):c&&n?t.__proto__=i:t=e.delegate(i,t)}return t},create:function(e){return new this.Model(e)},_createSubCollection:function(t){var n=e.delegate(this.constructor.prototype);
for(var r in this)this._includePropertyInSubCollection(r,n)&&(n[r]=this[r]);return s.safeMixin(n,t)},_includePropertyInSubCollection:function(e,t){return!(e in t)||t[e]!==this[e]},queryLog:[],filter:new a({type:"filter",normalizeArguments:function(e){var t=this.Filter;return e instanceof t?[e]:[new t(e)]}}),Filter:l,sort:new a({type:"sort",normalizeArguments:function(n,r){var i;return"function"==typeof n?i=[n]:(i=n instanceof Array?n.slice():"object"==typeof n?[].slice.call(arguments):[{property:n,descending:r}],i=t.map(i,function(t){return t=e.mixin({},t),t.descending=!!t.descending,t}),i=[i]),i}}),select:new a({type:"select"}),_getQuerierFactory:function(e){var t=e[0].toUpperCase()+e.substr(1);return this["_create"+t+"Querier"]}})}),define("dstore/QueryResults",["dojo/_base/lang","dojo/when"],function(e,t){function n(e,n){return t(this,function(t){for(var r=0,i=t.length;i>r;r++)e.call(n,t[r],r,t)})}return function(t,r){var i=r&&"totalLength"in r;if(t.then){t=e.delegate(t);var o=t.then(function(e){var t=i?r.totalLength:e.totalLength||e.length;return e.totalLength=t,!i&&t});t.totalLength=i?r.totalLength:o,t.response=r&&r.response}else t.totalLength=i?r.totalLength:t.length;return t.forEach=n,t}}),define("dstore/Promised",["dojo/_base/declare","dojo/Deferred","./QueryResults","dojo/when"],function(e,t,n,r){function i(e,i){return function(){var o=new t;try{o.resolve(this[e].apply(this,arguments))}catch(s){o.reject(s)}if(i){var a=new n(o.promise);return a.totalLength=r(a.totalLength),a}return o.promise}}return e(null,{get:i("getSync"),put:i("putSync"),add:i("addSync"),remove:i("removeSync"),fetch:i("fetchSync",!0),fetchRange:i("fetchRangeSync",!0)})}),define("dstore/SimpleQuery",["dojo/_base/declare","dojo/_base/array"],function(e,t){function n(e,t){if(e.indexOf(".")>-1){var n=e.split("."),r=n.length;return function(e){for(var i=0;r>i;i++)e=e&&(t&&e.get?e.get(n[i]):e[n[i]]);return e}}return function(t){return t.get?t.get(e):t[e]}}var r={eq:function(e,t){return e===t},"in":function(e,n){return t.indexOf(n.data||n,e)>-1},ne:function(e,t){return e!==t},lt:function(e,t){return t>e},lte:function(e,t){return t>=e},gt:function(e,t){return e>t},gte:function(e,t){return e>=t},match:function(e,t,n){return t.test(e,n)},contains:function(e,n,r,i){var o=this;return t.every(n.data||n,function(n){if("object"==typeof n&&n.type){var s=o._getFilterComparator(n.type);return t.some(e,function(e){return s.call(o,e,n.args[1],r,i)})}return t.indexOf(e,n)>-1})}};return e(null,{_createFilterQuerier:function(e){function r(e){var t=e.type,a=e.args,l=o._getFilterComparator(t);if(l){var u=a[0],d=n(u,i),c=a[1];return c&&c.fetchSync&&(c=c.fetchSync()),function(e){return l.call(o,d(e),c,e,u)}}switch(t){case"and":case"or":for(var f=0,h=a.length;h>f;f++){var p=r(a[f]);s=s?function(e,n){return"and"===t?function(t){return e(t)&&n(t)}:function(t){return e(t)||n(t)}}(s,p):p}return s;case"function":return a[0];case"string":var g=o[a[0]];if(!g)throw new Error("No filter function "+a[0]+" was found in the collection");return g;case void 0:return function(){return!0};default:throw new Error('Unknown filter operation "'+t+'"')}}var i=this.queryAccessors,o=this,s=r(e);return function(e){return t.filter(e,s)}},_getFilterComparator:function(e){return r[e]||this.inherited(arguments)},_createSelectQuerier:function(e){return function(n){var r=e.length;return t.map(n,e instanceof Array?function(t){for(var n={},i=0;r>i;i++){var o=e[i];n[o]=t[o]}return n}:function(t){return t[e]})}},_createSortQuerier:function(e){var t=this.queryAccessors;return function(r){return r=r.slice(),r.sort("function"==typeof e?e:function(r,i){for(var o=0;o<e.length;o++){var s,a=e[o];if("function"==typeof a)s=a(r,i);else{var l=a.get||(a.get=n(a.property,t)),u=a.descending,d=l(r),c=l(i);if(null!=d&&(d=d.valueOf()),null!=c&&(c=c.valueOf()),d===c)s=0;else{var f="undefined"==typeof c||null===c&&"undefined"!=typeof d||null!=d&&c>d;s=Boolean(u)===f?1:-1}}if(0!==s)return s}return 0}),r}}})}),define("dstore/Memory",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","./Store","./Promised","./SimpleQuery","./QueryResults"],function(e,t,n,r,i,o,s){return e([r,i,o],{constructor:function(){this.storage.version=0},postscript:function(){this.inherited(arguments),this.setData(this.data||[])},data:null,autoEmitEvents:!1,getSync:function(e){return this.storage.fullData[this.storage.index[e]]},putSync:function(e,t){t=t||{};var n=this.storage,r=n.index,i=n.fullData,o=this.Model;!o||e instanceof o||(e=this._restore(e));var s=this.getIdentity(e);null==s&&(this._setIdentity(e,"id"in t?t.id:Math.random()),s=this.getIdentity(e)),n.version++;var a,l,u=s in r?"update":"add",d={target:e};if("update"===u){if(t.overwrite===!1)throw new Error("Object already exists");i.splice(a=r[s],1),l=a}else l=this.defaultNewToStart?0:i.length;var c;if("beforeId"in t){var f=t.beforeId;null===f?c=i.length:(c=r[f],c>a&&--c),void 0!==c?d.beforeId=f:(console.error("options.beforeId was specified but no corresponding index was found"),c=l)}else c=l;i.splice(c,0,e);for(var h=isFinite(a)?Math.min(a,c):c,p=i.length;p>h;++h)r[this.getIdentity(i[h])]=h;return this.emit(u,d),e},addSync:function(e,t){return(t=t||{}).overwrite=!1,this.putSync(e,t)},removeSync:function(e){var t=this.storage,n=t.index,r=t.fullData;if(e in n){var i=r.splice(n[e],1)[0];return this._reindex(),this.emit("delete",{id:e,target:i}),!0}},setData:function(e){this.parse&&(e=this.parse(e)),e.items&&(this.idProperty=e.identifier||this.idProperty,e=e.items);var t=this.storage;t.fullData=this.data=e,this._reindex()},_reindex:function(){for(var e=this.storage,t=e.index={},n=e.fullData,r=this.Model,i=Object.prototype,o=0,s=n.length;s>o;o++){var a=n[o];if(r&&!(a instanceof r)){var l=this._restore(a,a.__proto__===i);a!==l&&(n[o]=a=l)}t[this.getIdentity(a)]=o}e.version++},fetchSync:function(){var e=this.data;if(!e||e._version!==this.storage.version){e=this.storage.fullData;for(var t=this.queryLog,n=0,r=t.length;r>n;n++)e=t[n].querier(e);e._version=this.storage.version,this.data=e}return new s(e)},fetchRangeSync:function(e){var t=this.fetchSync(),n=e.start,r=e.end;return new s(t.slice(n,r),{totalLength:t.length})},_includePropertyInSubCollection:function(e){return"data"!==e&&this.inherited(arguments)}})}),define("dojo/promise/all",["../_base/array","../Deferred","../when"],function(e,t,n){"use strict";var r=e.some;return function(e){var i,o;e instanceof Array?o=e:e&&"object"==typeof e&&(i=e);var s,a=[];if(i){o=[];for(var l in i)Object.hasOwnProperty.call(i,l)&&(a.push(l),o.push(i[l]));s={}}else o&&(s=[]);if(!o||!o.length)return(new t).resolve(s);var u=new t;u.promise.always(function(){s=a=null});var d=o.length;return r(o,function(e,t){return i||a.push(t),n(e,function(e){u.isFulfilled()||(s[a[t]]=e,0===--d&&u.resolve(s))},u.reject),u.isFulfilled()}),u.promise}}),define("dstore/Trackable",["dojo/_base/lang","dojo/_base/declare","dojo/aspect","dojo/when","dojo/promise/all","dojo/_base/array","dojo/on"],function(e,t,n,r,i,o,s){function a(e,t){return{start:e,count:t-e}}function l(e,t,n){for(var r=e.length-1;r>=0;--r){var i=e[r],o=i.start,s=o+i.count;if(t>s)return void e.splice(r+1,0,a(t,n));n>=o&&(t=Math.min(t,o),n=Math.max(n,s),e.splice(r,1))}e.unshift(a(t,n))}function u(e,t,n){for(var r,i=0;r=e[i];++i){var o=r.start,s=o+r.count;if(o>=t){if(!(n>=s))return r.start=n,void(r.count=s-r.start);e.splice(i,1)}else if(s>t){if(n>o)return void e.splice(i,1,a(o,t),a(n,s));r.count=t-r.start}}}var d=0,c={track:function(){function i(){return function(){var e=this,t=this.inherited(arguments);return r(t,function(t){t=e._results=t.slice(),e._partialResults&&(e._partialResults=null),e._ranges=[],l(e._ranges,0,t.length)}),t}}function a(){return function(e){var t=this,n=e.start,i=e.end,o=this.inherited(arguments);return this._results||r(o,function(e){return r(e.totalLength,function(r){var o=t._partialResults||(t._partialResults=[]);i=Math.min(i,n+e.length),o.length=r;var s=[n,i-n].concat(e);return o.splice.apply(o,s),l(t._ranges,n,i),e})}),o}}function c(t,n){d++;var i=n.target;n=e.delegate(n,y[t]),r(m._results||m._partialResults,function(e){function r(){var e=m["on_tracked"+t];e&&e.call(m,n)}if(!e)return void r();var s,a,l,u,d=m._ranges,c="id"in n?n.id:f.getIdentity(i),h=-1,p=-1,g=-1,y=-1;if("delete"===t||"update"===t)for(s=0;-1===h&&s<d.length;++s)for(u=d[s],a=u.start,l=a+u.count;l>a;++a){var b=e[a];if(f.getIdentity(b)==c){for(h=n.previousIndex=a,p=s,e.splice(h,1),u.count--,a=s+1;a<d.length;++a)d[a].start--;break}}if("add"===t||"update"===t){if(v){if(v([i]).length){for(var w,x,C,S=0,N=d.length-1,j=-1;N>=S&&-1===g;)s=S+Math.round((N-S)/2),u=d[s],w=e.slice(u.start,u.start+u.count),"beforeId"in n&&(j=null===n.beforeId?w.length:_(w,n.beforeId)),-1===j&&(j=h>=Math.max(0,u.start-1)&&h<=u.start+u.count?h:f.defaultNewToStart?0:w.length),w.splice(j,0,i),x=o.indexOf(v(w),i),C=u.start+x,0===x&&0!==u.start?N=s-1:x>=w.length-1&&C<e.length?S=s+1:(g=C,y=s);if(-1===g&&S>0&&S<d.length)var T=!0}}else{var u,E=-1;if("beforeId"in n)if(null===n.beforeId)g=e.length,E=d.length-1;else for(s=0,l=d.length;-1===y&&l>s;++s)u=d[s],g=_(e,n.beforeId,u.start,u.start+u.count),-1!==g&&(y=s);else"update"===t?(g=h,y=p):f.defaultNewToStart?(g=0,E=0):(g=e.length,E=d.length-1);-1!==E&&-1===y&&(u=d[E],u&&u.start<=g&&g<=u.start+u.count&&(y=E))}if(g>-1&&y>-1)for(n.index=g,e.splice(g,0,i),d[y].count++,s=y+1;s<d.length;++s)d[s].start++;else if(T)for(n.beforeIndex=d[S].start,s=S;s<d.length;++s)d[s].start++}n.totalLength=e.length,r()})}var f=this.store||this,h=[],p={add:1,update:1,"delete":1};for(var g in p)h.push(this.on(g,function(e){return function(t){c(e,t)}}(g)));var m=t.safeMixin(e.delegate(this),{_ranges:[],fetch:i(),fetchRange:a(),releaseRange:function(e,t){if(this._partialResults){u(this._ranges,e,t);for(var n=e;t>n;++n)delete this._partialResults[n]}},on:function(e,t){var r=this,i=this.getInherited(arguments);return s.parse(m,e,t,function(e,o){return o in p?n.after(m,"on_tracked"+o,t,!0):i.call(r,o,t)})},tracking:{remove:function(){for(;h.length>0;)h.pop().remove();this.remove=function(){}}},track:null});this.fetchSync&&(t.safeMixin(m,{fetchSync:i(),fetchRangeSync:a()}),m.fetchSync());var v;o.forEach(this.queryLog,function(e){var t=v,n=e.querier;n&&(v=t?function(e){return n(t(e))}:n)});var y={add:{index:void 0},update:{previousIndex:void 0,index:void 0},"delete":{previousIndex:void 0}},_=function(e,t,n,r){n=void 0!==n?n:0,r=void 0!==r?r:e.length;for(var i=n;r>i;++i)if(f.getIdentity(e[i])===t)return i;return-1};return m}},f=t(null,c);return f.create=function(n,r){return n=t.safeMixin(e.delegate(n),c),t.safeMixin(n,r),n},f}),define("dgrid/util/touch",["dojo/on","dojo/query"],function(e,t){function n(t,n,r,i){if(!(r.targetTouches.length>1)){var s=r.changedTouches[0],a=s.screenX,l=s.screenY;i&&r.preventDefault();var u=e(t,"touchend",function(e){var t=e.changedTouches[0];e.targetTouches.length||(Math.abs(t.screenX-a)<o.tapRadius&&Math.abs(t.screenY-l)<o.tapRadius&&(i&&e.preventDefault(),n.call(this,e)),u.remove())})}}function r(t,r){return e(t,"touchstart",function(e){n(t,r,e)})}function i(t,r){var i,s;return e(t,"touchstart",function(e){i?n(t,function(e){if(i){var t=e.changedTouches[0];Math.abs(t.screenX-i.screenX)<o.tapRadius&&Math.abs(t.screenY-i.screenY)<o.tapRadius&&(s&&clearTimeout(s),i=s=null,r.call(this,e))}},e,!0):n(t,function(e){i=e.changedTouches[0],s=setTimeout(function(){i=s=null},o.dbltapTime)},e)})}var o={tapRadius:10,dbltapTime:250,selector:function(n,r,i){return function(o,s){var a=r.bubble;return a?r=a:i!==!1&&(i=!0),e(o,r,function(e){var r=e.target;for(3===r.nodeType&&(r=r.parentNode);!t.matches(r,n,o);)if(r===o||!i||!(r=r.parentNode))return;return s.call(r,e)})}},countCurrentTouches:function(e,t){if(!("touches"in e))return-1;var n,r,i;for(n=0,r=0;i=e.touches[n];++n)t.contains(i.target)&&++r;return r}};return o.tap=r,o.dbltap=i,o}),define("dojo/store/Observable",["../_base/kernel","../_base/lang","../when","../_base/array"],function(e,t,n,r){var i=function(e){function i(t,r){var i=e[t];i&&(e[t]=function(o){var s;if("put"===t&&(s=e.getIdentity(o)),u)return i.apply(this,arguments);u=!0;try{var a=i.apply(this,arguments);return n(a,function(e){r("object"==typeof e&&e||o,s)}),a}finally{u=!1}})}var o,s=[],a=0;e=t.delegate(e),e.notify=function(e,t){a++;for(var n=s.slice(),r=0,i=n.length;i>r;r++)n[r](e,t)};var l=e.query;e.query=function(i,u){u=u||{};var d=l.apply(this,arguments);if(d&&d.forEach){var c=t.mixin({},u);delete c.start,delete c.count;var f,h=e.queryEngine&&e.queryEngine(i,c),p=a,g=[];d.observe=function(t,i){1==g.push(t)&&s.push(f=function(t,s){n(d,function(n){var l,d,c,f=n.length!=u.count;if(++p!=a)throw new Error("Query is out of date, you must observe() the query prior to any data modifications");var m,v=-1,y=-1;if(s!==o){var _=[].concat(n);for(h&&!t&&(_=h(n)),l=0,d=n.length;d>l;l++){var b=n[l];if(e.getIdentity(b)==s){if(_.indexOf(b)<0)continue;m=b,v=l,(h||!t)&&n.splice(l,1);break}}}if(h){if(t&&(h.matches?h.matches(t):h([t]).length)){var w=v>-1?v:n.length;n.splice(w,0,t),y=r.indexOf(h(n),t),n.splice(w,1),u.start&&0==y||!f&&y==n.length?y=-1:n.splice(y,0,t)}}else t&&(s!==o?y=v:u.start||(y=e.defaultIndex||0,n.splice(y,0,t)));if((v>-1||y>-1)&&(i||!h||v!=y)){var x=g.slice();for(l=0;c=x[l];l++)c(t||m,v,y)}})});var l={};return l.remove=l.cancel=function(){var e=r.indexOf(g,t);e>-1&&(g.splice(e,1),g.length||s.splice(r.indexOf(s,f),1))},l}}return d};var u;return i("put",function(t,n){e.notify(t,n)}),i("add",function(t){e.notify(t)}),i("remove",function(t){e.notify(void 0,t)}),e};return t.setObject("dojo.store.Observable",i),i}),define("dojo/io-query",["./_base/lang"],function(e){var t={};return{objectToQuery:function(n){var r=encodeURIComponent,i=[];for(var o in n){var s=n[o];if(s!=t[o]){var a=r(o)+"=";if(e.isArray(s))for(var l=0,u=s.length;u>l;++l)i.push(a+r(s[l]));else i.push(a+r(s))}}return i.join("&")},queryToObject:function(t){for(var n,r,i,o=decodeURIComponent,s=t.split("&"),a={},l=0,u=s.length;u>l;++l)if(i=s[l],i.length){var d=i.indexOf("=");0>d?(n=o(i),r=""):(n=o(i.slice(0,d)),r=o(i.slice(d+1))),"string"==typeof a[n]&&(a[n]=[a[n]]),e.isArray(a[n])?a[n].push(r):a[n]=r}return a}}}),define("dojo/json",["./has"],function(has){"use strict";var hasJSON="undefined"!=typeof JSON;if(has.add("json-parse",hasJSON),has.add("json-stringify",hasJSON&&'{"a":1}'==JSON.stringify({a:0},function(e,t){return t||1})),has("json-stringify"))return JSON;var escapeString=function(e){return('"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:has("json-parse")?JSON.parse:function(str,strict){if(strict&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str))throw new SyntaxError("Invalid characters in JSON");return eval("("+str+")")},stringify:function(e,t,n){function r(e,o,s){t&&(e=t(s,e));var a,l=typeof e;if("number"==l)return isFinite(e)?e+"":"null";if("boolean"==l)return e+"";if(null===e)return"null";if("string"==typeof e)return escapeString(e);if("function"==l||"undefined"==l)return i;if("function"==typeof e.toJSON)return r(e.toJSON(s),o,s);if(e instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(t,n,r){var i=e["getUTC"+n]()+(r?1:0);return 10>i?"0"+i:i});if(e.valueOf()!==e)return r(e.valueOf(),o,s);var u=n?o+n:"",d=n?" ":"",c=n?"\n":"";if(e instanceof Array){var f=e.length,h=[];for(s=0;f>s;s++){var p=e[s];a=r(p,u,s),"string"!=typeof a&&(a="null"),h.push(c+u+a)}return"["+h.join(",")+c+o+"]"}var g=[];for(s in e){var m;if(e.hasOwnProperty(s)){if("number"==typeof s)m='"'+s+'"';else{if("string"!=typeof s)continue;m=escapeString(s)}if(a=r(e[s],u,s),"string"!=typeof a)continue;g.push(c+u+m+":"+d+a)}}return"{"+g.join(",")+c+o+"}"}var i;return"string"==typeof t&&(n=t,t=null),r(e,"","")}}}),define("dojo/dom-form",["./_base/lang","./dom","./io-query","./json"],function(e,t,n,r){function i(t,n,r){if(null!==r){var i=t[n];"string"==typeof i?t[n]=[i,r]:e.isArray(i)?i.push(r):t[n]=r}}var o="file|submit|image|reset|button",s={fieldToObject:function(e){var n=null;if(e=t.byId(e)){var r=e.name,i=(e.type||"").toLowerCase();if(r&&i&&!e.disabled)if("radio"==i||"checkbox"==i)e.checked&&(n=e.value);else if(e.multiple){n=[];for(var o=[e.firstChild];o.length;)for(var s=o.pop();s;s=s.nextSibling){if(1!=s.nodeType||"option"!=s.tagName.toLowerCase()){s.nextSibling&&o.push(s.nextSibling),s.firstChild&&o.push(s.firstChild);break}s.selected&&n.push(s.value)}}else n=e.value}return n},toObject:function(e){for(var n={},r=t.byId(e).elements,a=0,l=r.length;l>a;++a){var u=r[a],d=u.name,c=(u.type||"").toLowerCase();d&&c&&o.indexOf(c)<0&&!u.disabled&&(i(n,d,s.fieldToObject(u)),"image"==c&&(n[d+".x"]=n[d+".y"]=n[d].x=n[d].y=0))}return n},toQuery:function(e){return n.objectToQuery(s.toObject(e))},toJson:function(e,t){return r.stringify(s.toObject(e),null,t?4:0)}};return s}),define("dojo/_base/Deferred",["./kernel","../Deferred","../promise/Promise","../errors/CancelError","../has","./lang","../when"],function(e,t,n,r,i,o,s){var a=function(){},l=Object.freeze||function(){},u=e.Deferred=function(e){function s(e){if(f)throw new Error("This deferred has already been resolved");c=e,f=!0,d()}function d(){for(var e;!e&&v;){var n=v;v=v.next,(e=n.progress==a)&&(f=!1);var r=g?n.error:n.resolved;if(i("config-useDeferredInstrumentation")&&g&&t.instrumentRejected&&t.instrumentRejected(c,!!r),r)try{var s=r(c);if(s&&"function"==typeof s.then){s.then(o.hitch(n.deferred,"resolve"),o.hitch(n.deferred,"reject"),o.hitch(n.deferred,"progress"));continue}var l=e&&void 0===s;e&&!l&&(g=s instanceof Error),n.deferred[l&&g?"reject":"resolve"](l?c:s)}catch(u){n.deferred.reject(u)}else g?n.deferred.reject(c):n.deferred.resolve(c)}}var c,f,h,p,g,m,v,y=this.promise=new n;this.isResolved=y.isResolved=function(){return 0==p},this.isRejected=y.isRejected=function(){return 1==p},this.isFulfilled=y.isFulfilled=function(){return p>=0},this.isCanceled=y.isCanceled=function(){return h},this.resolve=this.callback=function(e){this.fired=p=0,this.results=[e,null],s(e)},this.reject=this.errback=function(e){g=!0,this.fired=p=1,i("config-useDeferredInstrumentation")&&t.instrumentRejected&&t.instrumentRejected(e,!!v),s(e),this.results=[null,e]},this.progress=function(e){for(var t=v;t;){var n=t.progress;n&&n(e),t=t.next}},this.addCallbacks=function(e,t){return this.then(e,t,a),this},y.then=this.then=function(e,t,n){var r=n==a?this:new u(y.cancel),i={resolved:e,error:t,progress:n,deferred:r};return v?m=m.next=i:v=m=i,f&&d(),r.promise};var _=this;y.cancel=this.cancel=function(){if(!f){var t=e&&e(_);f||(t instanceof Error||(t=new r(t)),t.log=!1,_.reject(t))}h=!0},l(y)};return o.extend(u,{addCallback:function(t){return this.addCallbacks(o.hitch.apply(e,arguments))},addErrback:function(t){return this.addCallbacks(null,o.hitch.apply(e,arguments))},addBoth:function(t){var n=o.hitch.apply(e,arguments);return this.addCallbacks(n,n)},fired:-1}),u.when=e.when=s,u}),define("dojo/_base/json",["./kernel","../json"],function(dojo,json){return dojo.fromJson=function(js){return eval("("+js+")")},dojo._escapeString=json.stringify,dojo.toJsonIndentStr="	",dojo.toJson=function(e,t){return json.stringify(e,function(e,t){if(t){var n=t.__json__||t.json;if("function"==typeof n)return n.call(t)}return t},t&&dojo.toJsonIndentStr)},dojo}),define("dojo/errors/RequestError",["./create"],function(e){return e("RequestError",function(e,t){this.response=t})}),define("dojo/request/util",["exports","../errors/RequestError","../errors/CancelError","../Deferred","../io-query","../_base/array","../_base/lang","../promise/Promise"],function(e,t,n,r,i,o,s,a){function l(e){return d(e)}function u(e){return void 0!==e.data?e.data:e.text}e.deepCopy=function(t,n){for(var r in n){var i=t[r],o=n[r];i!==o&&(i&&"object"==typeof i&&o&&"object"==typeof o?e.deepCopy(i,o):t[r]=o)}return t},e.deepCreate=function(t,n){n=n||{};var r,i,o=s.delegate(t);for(r in t)i=t[r],i&&"object"==typeof i&&(o[r]=e.deepCreate(i,n[r]));return e.deepCopy(o,n)};var d=Object.freeze||function(e){return e};e.deferred=function(i,o,c,f,h,p){function g(e){throw e.response=i,e}var m=new r(function(e){return o&&o(m,i),e&&(e instanceof t||e instanceof n)?e:new n("Request canceled",i)});m.response=i,m.isValid=c,m.isReady=f,m.handleResponse=h;var v=m.then(l).otherwise(g);e.notify&&v.then(s.hitch(e.notify,"emit","load"),s.hitch(e.notify,"emit","error"));var y=v.then(u),_=new a;for(var b in y)y.hasOwnProperty(b)&&(_[b]=y[b]);return _.response=v,d(_),p&&m.then(function(e){p.call(m,e)},function(e){p.call(m,i,e)}),m.promise=_,m.then=_.then,m},e.addCommonMethods=function(e,t){o.forEach(t||["GET","POST","PUT","DELETE"],function(t){e[("DELETE"===t?"DEL":t).toLowerCase()]=function(n,r){return r=s.delegate(r||{}),r.method=t,e(n,r)}})},e.parseArgs=function(e,t,n){var r=t.data,o=t.query;return r&&!n&&("object"!=typeof r||r instanceof ArrayBuffer||r instanceof Blob||(t.data=i.objectToQuery(r))),o?("object"==typeof o&&(o=i.objectToQuery(o)),t.preventCache&&(o+=(o?"&":"")+"request.preventCache="+ +new Date)):t.preventCache&&(o="request.preventCache="+ +new Date),e&&o&&(e+=(~e.indexOf("?")?"&":"?")+o),{url:e,options:t,getHeader:function(e){return null}}},e.checkStatus=function(e){return e=e||0,e>=200&&300>e||304===e||1223===e||!e}}),define("dojo/errors/RequestTimeoutError",["./create","./RequestError"],function(e,t){return e("RequestTimeoutError",null,t,{dojoType:"timeout"})}),define("dojo/request/watch",["./util","../errors/RequestTimeoutError","../errors/CancelError","../_base/array","../has!host-browser?../_base/window:","../has!host-browser?dom-addeventlistener?:../on:"],function(e,t,n,r,i,o){function s(){for(var e,n=+new Date,r=0;r<u.length&&(e=u[r]);r++){var i=e.response,o=i.options;e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(i)?(u.splice(r--,1),a._onAction&&a._onAction()):e.isReady&&e.isReady(i)?(u.splice(r--,1),e.handleResponse(i),a._onAction&&a._onAction()):e.startTime&&e.startTime+(o.timeout||0)<n&&(u.splice(r--,1),e.cancel(new t("Timeout exceeded",i)),a._onAction&&a._onAction())}a._onInFlight&&a._onInFlight(e),u.length||(clearInterval(l),l=null)}function a(e){e.response.options.timeout&&(e.startTime=+new Date),e.isFulfilled()||(u.push(e),l||(l=setInterval(s,50)),e.response.options.sync&&s())}var l=null,u=[];return a.cancelAll=function(){try{r.forEach(u,function(e){try{e.cancel(new n("All requests canceled."))}catch(t){}})}catch(e){}},i&&o&&i.doc.attachEvent&&o(i.global,"unload",function(){a.cancelAll()}),a}),define("dojo/request/handlers",["../json","../_base/kernel","../_base/array","../has","../has!dom?../selector/_loader"],function(e,t,n,r){function i(e){var t=u[e.options.handleAs];return e.data=t?t(e):e.data||e.text,e}r.add("activex","undefined"!=typeof ActiveXObject),r.add("dom-parser",function(e){return"DOMParser"in e});var o;if(r("activex")){var s,a=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];o=function(e){function t(e){try{var t=new ActiveXObject(e);t.async=!1,t.loadXML(o),i=t,s=e}catch(n){return!1}return!0}var i=e.data,o=e.text;return i&&r("dom-qsa2.1")&&!i.querySelectorAll&&r("dom-parser")&&(i=(new DOMParser).parseFromString(o,"application/xml")),i&&i.documentElement||s&&t(s)||n.some(a,t),i}}var l=function(e){return r("native-xhr2-blob")||"blob"!==e.options.handleAs||"undefined"==typeof Blob?e.xhr.response:new Blob([e.xhr.response],{type:e.xhr.getResponseHeader("Content-Type")})},u={javascript:function(e){return t.eval(e.text||"")},json:function(t){return e.parse(t.text||null)},xml:o,blob:l,arraybuffer:l,document:l};return i.register=function(e,t){u[e]=t},i}),define("dojo/request/xhr",["../errors/RequestError","./watch","./handlers","./util","../has"],function(e,t,n,r,i){function o(t,i){var o=t.xhr;t.status=t.xhr.status;try{t.text=o.responseText}catch(s){}if("xml"===t.options.handleAs&&(t.data=o.responseXML),!i)try{n(t)}catch(s){i=s}var a;if(i)this.reject(i);else{try{n(t)}catch(s){a=s}r.checkStatus(o.status)?a?this.reject(a):this.resolve(t):a?(i=new e("Unable to load "+t.url+" status: "+o.status+" and an error in handleAs: transformation of response",t),this.reject(i)):(i=new e("Unable to load "+t.url+" status: "+o.status,t),this.reject(i))}}function s(e){return this.xhr.getResponseHeader(e)}function a(n,g,m){var v=i("native-formdata")&&g&&g.data&&g.data instanceof FormData,y=r.parseArgs(n,r.deepCreate(p,g),v);n=y.url,g=y.options;var _,b=function(){_&&_()},w=r.deferred(y,c,l,u,o,b),x=y.xhr=a._create();if(!x)return w.cancel(new e("XHR was not created")),m?w:w.promise;y.getHeader=s,d&&(_=d(x,w,y));var C=g.data,S=!g.sync,N=g.method;try{x.open(N,n,S,g.user||h,g.password||h),g.withCredentials&&(x.withCredentials=g.withCredentials),i("native-response-type")&&g.handleAs in f&&(x.responseType=f[g.handleAs]);var j=g.headers,T=v?!1:"application/x-www-form-urlencoded";if(j)for(var E in j)"content-type"===E.toLowerCase()?T=j[E]:j[E]&&x.setRequestHeader(E,j[E]);T&&T!==!1&&x.setRequestHeader("Content-Type",T),j&&"X-Requested-With"in j||x.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.notify&&r.notify.emit("send",y,w.promise.cancel),x.send(C)}catch(I){w.reject(I)}return t(w),x=null,m?w:w.promise}i.add("native-xhr",function(){return"undefined"!=typeof XMLHttpRequest}),i.add("dojo-force-activex-xhr",function(){return i("activex")&&"file:"===window.location.protocol}),i.add("native-xhr2",function(){if(i("native-xhr")&&!i("dojo-force-activex-xhr")){var e=new XMLHttpRequest;return"undefined"!=typeof e.addEventListener&&("undefined"==typeof opera||"undefined"!=typeof e.upload)}}),i.add("native-formdata",function(){return"undefined"!=typeof FormData}),i.add("native-response-type",function(){return i("native-xhr")&&"undefined"!=typeof(new XMLHttpRequest).responseType}),i.add("native-xhr2-blob",function(){if(i("native-response-type")){var e=new XMLHttpRequest;e.open("GET","/",!0),e.responseType="blob";var t=e.responseType;return e.abort(),"blob"===t}});var l,u,d,c,f={blob:i("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"};i("native-xhr2")?(l=function(e){return!this.isFulfilled()},c=function(e,t){t.xhr.abort()},d=function(t,n,r){function i(e){n.handleResponse(r)}function o(t){var i=t.target,o=new e("Unable to load "+r.url+" status: "+i.status,r);n.handleResponse(r,o)}function s(e){e.lengthComputable?(r.loaded=e.loaded,r.total=e.total,n.progress(r)):3===r.xhr.readyState&&(r.loaded="loaded"in e?e.loaded:e.position,n.progress(r))}return t.addEventListener("load",i,!1),t.addEventListener("error",o,!1),t.addEventListener("progress",s,!1),function(){t.removeEventListener("load",i,!1),t.removeEventListener("error",o,!1),t.removeEventListener("progress",s,!1),t=null}}):(l=function(e){return e.xhr.readyState},u=function(e){return 4===e.xhr.readyState},c=function(e,t){var n=t.xhr,r=typeof n.abort;("function"===r||"object"===r||"unknown"===r)&&n.abort()});var h,p={data:null,query:null,sync:!1,method:"GET"};if(a._create=function(){throw new Error("XMLHTTP not available")},i("native-xhr")&&!i("dojo-force-activex-xhr"))a._create=function(){return new XMLHttpRequest};else if(i("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),a._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(g){try{new ActiveXObject("Microsoft.XMLHTTP"),a._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(g){}}return r.addCommonMethods(a),a}),define("dojo/_base/xhr",["./kernel","./sniff","require","../io-query","../dom","../dom-form","./Deferred","./config","./json","./lang","./array","../on","../aspect","../request/watch","../request/xhr","../request/util"],function(e,t,n,r,i,o,s,a,l,u,d,c,f,h,p,g){e._xhrObj=p._create;var m=e.config;e.objectToQuery=r.objectToQuery,e.queryToObject=r.queryToObject,e.fieldToObject=o.fieldToObject,e.formToObject=o.toObject,e.formToQuery=o.toQuery,e.formToJson=o.toJson,e._blockAsync=!1;var v=e._contentHandlers=e.contentHandlers={text:function(e){return e.responseText},json:function(e){return l.fromJson(e.responseText||null)},"json-comment-filtered":function(e){a.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message.");var t=e.responseText,n=t.indexOf("/*"),r=t.lastIndexOf("*/");if(-1==n||-1==r)throw new Error("JSON was not comment filtered");return l.fromJson(t.substring(n+2,r))},javascript:function(t){return e.eval(t.responseText)},xml:function(e){var n=e.responseXML;if(n&&t("dom-qsa2.1")&&!n.querySelectorAll&&t("dom-parser")&&(n=(new DOMParser).parseFromString(e.responseText,"application/xml")),t("ie")&&(!n||!n.documentElement)){var r=function(e){return"MSXML"+e+".DOMDocument"},i=["Microsoft.XMLDOM",r(6),r(4),r(3),r(2)];d.some(i,function(t){try{var r=new ActiveXObject(t);r.async=!1,r.loadXML(e.responseText),n=r}catch(i){return!1}return!0})}return n},"json-comment-optional":function(e){return e.responseText&&/^[^{\[]*\/\*/.test(e.responseText)?v["json-comment-filtered"](e):v.json(e)}};e._ioSetArgs=function(t,n,a,l){var d={args:t,url:t.url},c=null;if(t.form){var f=i.byId(t.form),h=f.getAttributeNode("action");d.url=d.url||(h?h.value:e.doc?e.doc.URL:null),c=o.toObject(f)}var p=[{}];c&&p.push(c),t.content&&p.push(t.content),t.preventCache&&p.push({"dojo.preventCache":(new Date).valueOf()}),d.query=r.objectToQuery(u.mixin.apply(null,p)),d.handleAs=t.handleAs||"text";var g=new s(function(e){e.canceled=!0,n&&n(e);var t=e.ioArgs.error;return t||(t=new Error("request cancelled"),t.dojoType="cancel",e.ioArgs.error=t),t});g.addCallback(a);var v=t.load;v&&u.isFunction(v)&&g.addCallback(function(e){return v.call(t,e,d)});var y=t.error;y&&u.isFunction(y)&&g.addErrback(function(e){return y.call(t,e,d)});var _=t.handle;return _&&u.isFunction(_)&&g.addBoth(function(e){return _.call(t,e,d)}),g.addErrback(function(e){return l(e,g)}),m.ioPublish&&e.publish&&d.args.ioPublish!==!1&&(g.addCallbacks(function(t){return e.publish("/dojo/io/load",[g,t]),t},function(t){return e.publish("/dojo/io/error",[g,t]),t}),g.addBoth(function(t){return e.publish("/dojo/io/done",[g,t]),t})),g.ioArgs=d,g};var y=function(e){var t=v[e.ioArgs.handleAs](e.ioArgs.xhr);return void 0===t?null:t},_=function(e,t){return t.ioArgs.args.failOk||console.error(e),e},b=function(t){0>=w&&(w=0,m.ioPublish&&e.publish&&(!t||t&&t.ioArgs.args.ioPublish!==!1)&&e.publish("/dojo/io/stop"))},w=0;f.after(h,"_onAction",function(){w-=1}),f.after(h,"_onInFlight",b),e._ioCancelAll=h.cancelAll,e._ioNotifyStart=function(t){m.ioPublish&&e.publish&&t.ioArgs.args.ioPublish!==!1&&(w||e.publish("/dojo/io/start"),w+=1,e.publish("/dojo/io/send",[t]))},e._ioWatch=function(e,t,n,r){e.ioArgs.options=e.ioArgs.args;u.mixin(e,{response:e.ioArgs,isValid:function(n){return t(e)},isReady:function(t){return n(e)},handleResponse:function(t){return r(e)}}),h(e),b(e)};return e._ioAddQueryToUrl=function(e){e.query.length&&(e.url+=(-1==e.url.indexOf("?")?"?":"&")+e.query,e.query=null)},e.xhr=function(t,n,r){var i,o=e._ioSetArgs(n,function(e){i&&i.cancel()},y,_),s=o.ioArgs;"postData"in n?s.query=n.postData:"putData"in n?s.query=n.putData:"rawBody"in n?s.query=n.rawBody:(arguments.length>2&&!r||-1==="POST|PUT".indexOf(t.toUpperCase()))&&e._ioAddQueryToUrl(s);var a={method:t,handleAs:"text",timeout:n.timeout,withCredentials:n.withCredentials,ioArgs:s};"undefined"!=typeof n.headers&&(a.headers=n.headers),"undefined"!=typeof n.contentType&&(a.headers||(a.headers={}),a.headers["Content-Type"]=n.contentType),"undefined"!=typeof s.query&&(a.data=s.query),"undefined"!=typeof n.sync&&(a.sync=n.sync),e._ioNotifyStart(o);try{i=p(s.url,a,!0)}catch(l){return o.cancel(),o}return o.ioArgs.xhr=i.response.xhr,i.then(function(){o.resolve(o)}).otherwise(function(e){s.error=e,e.response&&(e.status=e.response.status,
e.responseText=e.response.text,e.xhr=e.response.xhr),o.reject(e)}),o},e.xhrGet=function(t){return e.xhr("GET",t)},e.rawXhrPost=e.xhrPost=function(t){return e.xhr("POST",t,!0)},e.rawXhrPut=e.xhrPut=function(t){return e.xhr("PUT",t,!0)},e.xhrDelete=function(t){return e.xhr("DELETE",t)},e._isDocumentOk=function(e){return g.checkStatus(e.status)},e._getText=function(t){var n;return e.xhrGet({url:t,sync:!0,load:function(e){n=e}}),n},u.mixin(e.xhr,{_xhrObj:e._xhrObj,fieldToObject:o.fieldToObject,formToObject:o.toObject,objectToQuery:r.objectToQuery,formToQuery:o.toQuery,formToJson:o.toJson,queryToObject:r.queryToObject,contentHandlers:v,_ioSetArgs:e._ioSetArgs,_ioCancelAll:e._ioCancelAll,_ioNotifyStart:e._ioNotifyStart,_ioWatch:e._ioWatch,_ioAddQueryToUrl:e._ioAddQueryToUrl,_isDocumentOk:e._isDocumentOk,_getText:e._getText,get:e.xhrGet,post:e.xhrPost,put:e.xhrPut,del:e.xhrDelete}),e.xhr}),define("paychex.framework.dgrid",["dgrid/OnDemandGrid","dgrid/Grid","dgrid/Keyboard","dgrid/Editor","dgrid/Selector","dgrid/Selection","dgrid/CellSelection","dgrid/extensions/ColumnHider","dgrid/extensions/Pagination","dstore/Memory","dstore/Trackable","dojo/_base/declare","dgrid/util/touch","dojo/on","dojo/store/Observable","dojo/_base/xhr","dojo/query","dojo/has"],function(e,t,n,r,i,o,s,a,l,u,d,c,f,h,p,g,m,v){var y={resizeThrottleDelay:200,resizeThrottleMethod:"debounce"},_=function(e){return e.resizeThrottleDelay=e.resizeThrottleDelay||y.resizeThrottleDelay,e.resizeThrottleMethod=e.resizeThrottleMethod||y.resizeThrottleMethod,e};return{OnDemandGrid:e,Grid:t,Keyboard:n,Editor:r,Selector:i,Selection:o,CellSelection:s,ColumnHider:a,Pagination:l,Memory:u,Trackable:d,Observable:p,declare:c,touchUtil:f,on:h,payxDefaults:_,payxDefaultsObject:y}}),define("dojo/selector/lite",["../has","../_base/kernel"],function(e,t){var n=document.createElement("div"),r=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector,i=n.querySelectorAll,o=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;e.add("dom-matches-selector",!!r),e.add("dom-qsa",!!i);var s=function(n,r){if(u&&n.indexOf(",")>-1)return u(n,r);var o=r?r.ownerDocument||r:t.doc||document,d=(i?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(n);if(r=r||o,d){var c=8===e("ie")&&e("quirks")?r.nodeType===o.nodeType:null!==r.parentNode&&9!==r.nodeType&&r.parentNode===o;if(d[2]&&c){var f=t.byId?t.byId(d[2],o):o.getElementById(d[2]);if(!f||d[1]&&d[1]!=f.tagName.toLowerCase())return[];if(r!=o)for(var h=f;h!=r;)if(h=h.parentNode,!h)return[];return d[3]?s(d[3],f):[f]}if(d[3]&&r.getElementsByClassName)return r.getElementsByClassName(d[4]);var f;if(d[5]){if(f=r.getElementsByTagName(d[5]),!d[4]&&!d[6])return f;n=(d[4]||"")+d[6]}}if(i)return 1===r.nodeType&&"object"!==r.nodeName.toLowerCase()?a(r,n,r.querySelectorAll):r.querySelectorAll(n);f||(f=r.getElementsByTagName("*"));for(var p=[],g=0,m=f.length;m>g;g++){var v=f[g];1==v.nodeType&&l(v,n,r)&&p.push(v)}return p},a=function(e,t,n){var r=e,i=e.getAttribute("id"),s=i||"__dojo__",a=e.parentNode,l=/^\s*[+~]/.test(t);if(l&&!a)return[];i?s=s.replace(/'/g,"\\$&"):e.setAttribute("id",s),l&&a&&(e=e.parentNode);for(var u=t.match(o),d=0;d<u.length;d++)u[d]="[id='"+s+"'] "+u[d];t=u.join(",");try{return n.call(e,t)}finally{i||r.removeAttribute("id")}};if(!e("dom-matches-selector"))var l=function(){function e(e,t,n){var r=t.charAt(0);('"'==r||"'"==r)&&(t=t.slice(1,-1)),t=t.replace(/\\/g,"");var i=a[n||""];return function(n){var r=n.getAttribute(e);return r&&i(r,t)}}function t(e){return function(t,n){for(;(t=t.parentNode)!=n;)if(e(t,n))return!0}}function r(e){return function(t,n){return t=t.parentNode,e?t!=n&&e(t,n):t==n}}function i(e,t){return e?function(n,r){return t(n)&&e(n,r)}:t}var o="div"==n.tagName?"toLowerCase":"toUpperCase",s={"":function(e){return e=e[o](),function(t){return t.tagName==e}},".":function(e){var t=" "+e+" ";return function(n){return n.className.indexOf(e)>-1&&(" "+n.className+" ").indexOf(t)>-1}},"#":function(e){return function(t){return t.id==e}}},a={"^=":function(e,t){return 0==e.indexOf(t)},"*=":function(e,t){return e.indexOf(t)>-1},"$=":function(e,t){return e.substring(e.length-t.length,e.length)==t},"~=":function(e,t){return(" "+e+" ").indexOf(" "+t+" ")>-1},"|=":function(e,t){return 0==(e+"-").indexOf(t+"-")},"=":function(e,t){return e==t},"":function(e,t){return!0}},l={};return function(n,o,a){var u=l[o];if(!u){if(o.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,function(n,o,a,l,d,c,f){return l?u=i(u,s[a||""](l.replace(/\\/g,""))):o?u=(" "==o?t:r)(u):d&&(u=i(u,e(d,f,c))),""}))throw new Error("Syntax error in query");if(!u)return!0;l[o]=u}return u(n,a)}}();if(!e("dom-qsa"))var u=function(e,t){for(var n=e.match(o),r=[],i=0;i<n.length;i++){e=new String(n[i].replace(/\s*$/,"")),e.indexOf=escape;for(var a=s(e,t),l=0,u=a.length;u>l;l++){var d=a[l];r[d.sourceIndex]=d}}var c=[];for(i in r)c.push(r[i]);return c};return s.match=r?function(e,t,n){return n&&9!=n.nodeType?a(n,t,function(t){return r.call(e,t)}):r.call(e,t)}:l,s}),define("dojo/selector/acme",["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(e,t,n,r,i){var o=r.trim,s=n.forEach,a=function(){return i.doc},l="BackCompat"==a().compatMode,u=">~+",d=!1,c=function(){return!0},f=function(e){e+=u.indexOf(e.slice(-1))>=0?" * ":" ";for(var t,n,r=function(t,n){return o(e.slice(t,n))},i=[],s=-1,a=-1,l=-1,c=-1,f=-1,h=-1,p=-1,g="",m="",v=0,y=e.length,_=null,b=null,w=function(){if(p>=0){var e=p==v?null:r(p,v);_[u.indexOf(e)<0?"tag":"oper"]=e,p=-1}},x=function(){h>=0&&(_.id=r(h,v).replace(/\\/g,""),h=-1)},C=function(){f>=0&&(_.classes.push(r(f+1,v).replace(/\\/g,"")),f=-1)},S=function(){x(),w(),C()},N=function(){S(),c>=0&&_.pseudos.push({name:r(c+1,v)}),_.loops=_.pseudos.length||_.attrs.length||_.classes.length,_.oquery=_.query=r(n,v),_.otag=_.tag=_.oper?null:_.tag||"*",_.tag&&(_.tag=_.tag.toUpperCase()),i.length&&i[i.length-1].oper&&(_.infixOper=i.pop(),_.query=_.infixOper.query+" "+_.query),i.push(_),_=null};g=m,m=e.charAt(v),y>v;v++)if("\\"!=g)if(_||(n=v,_={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return d?this.otag:this.tag}},p=v),t)m==t&&(t=null);else if("'"!=m&&'"'!=m)if(s>=0){if("]"==m){b.attr?b.matchFor=r(l||s+1,v):b.attr=r(s+1,v);var j=b.matchFor;j&&('"'==j.charAt(0)||"'"==j.charAt(0))&&(b.matchFor=j.slice(1,-1)),b.matchFor&&(b.matchFor=b.matchFor.replace(/\\/g,"")),_.attrs.push(b),b=null,s=l=-1}else if("="==m){var T="|~^$*".indexOf(g)>=0?g:"";b.type=T+m,b.attr=r(s+1,v-T.length),l=v+1}}else a>=0?")"==m&&(c>=0&&(b.value=r(a+1,v)),c=a=-1):"#"==m?(S(),h=v+1):"."==m?(S(),f=v):":"==m?(S(),c=v):"["==m?(S(),s=v,b={}):"("==m?(c>=0&&(b={name:r(c+1,v),value:null},_.pseudos.push(b)),a=v):" "==m&&g!=m&&N();else t=m;return i},h=function(e,t){return e?t?function(){return e.apply(window,arguments)&&t.apply(window,arguments)}:e:t},p=function(e,t){var n=t||[];return e&&n.push(e),n},g=function(e){return 1==e.nodeType},m="",v=function(e,t){return e?"class"==t?e.className||m:"for"==t?e.htmlFor||m:"style"==t?e.style.cssText||m:(d?e.getAttribute(t):e.getAttribute(t,2))||m:m},y={"*=":function(e,t){return function(n){return v(n,e).indexOf(t)>=0}},"^=":function(e,t){return function(n){return 0==v(n,e).indexOf(t)}},"$=":function(e,t){return function(n){var r=" "+v(n,e),i=r.lastIndexOf(t);return i>-1&&i==r.length-t.length}},"~=":function(e,t){var n=" "+t+" ";return function(t){var r=" "+v(t,e)+" ";return r.indexOf(n)>=0}},"|=":function(e,t){var n=t+"-";return function(r){var i=v(r,e);return i==t||0==i.indexOf(n)}},"=":function(e,t){return function(n){return v(n,e)==t}}},_=a().documentElement,b=!(_.nextElementSibling||"nextElementSibling"in _),w=b?"nextSibling":"nextElementSibling",x=b?"previousSibling":"previousElementSibling",C=b?g:c,S=function(e){for(;e=e[x];)if(C(e))return!1;return!0},N=function(e){for(;e=e[w];)if(C(e))return!1;return!0},j=function(e){var n=e.parentNode;n=7!=n.nodeType?n:n.nextSibling;var r=0,i=n.children||n.childNodes,o=e._i||e.getAttribute("_i")||-1,s=n._l||("undefined"!=typeof n.getAttribute?n.getAttribute("_l"):-1);if(!i)return-1;var a=i.length;if(s==a&&o>=0&&s>=0)return o;t("ie")&&"undefined"!=typeof n.setAttribute?n.setAttribute("_l",a):n._l=a,o=-1;for(var l=n.firstElementChild||n.firstChild;l;l=l[w])C(l)&&(t("ie")?l.setAttribute("_i",++r):l._i=++r,e===l&&(o=r));return o},T=function(e){return!(j(e)%2)},E=function(e){return j(e)%2},I={checked:function(e,t){return function(e){return!!("checked"in e?e.checked:e.selected)}},disabled:function(e,t){return function(e){return e.disabled}},enabled:function(e,t){return function(e){return!e.disabled}},"first-child":function(){return S},"last-child":function(){return N},"only-child":function(e,t){return function(e){return S(e)&&N(e)}},empty:function(e,t){return function(e){for(var t=e.childNodes,n=e.childNodes.length,r=n-1;r>=0;r--){var i=t[r].nodeType;if(1===i||3==i)return!1}return!0}},contains:function(e,t){var n=t.charAt(0);return('"'==n||"'"==n)&&(t=t.slice(1,-1)),function(e){return e.innerHTML.indexOf(t)>=0}},not:function(e,t){var n=f(t)[0],r={el:1};"*"!=n.tag&&(r.tag=1),n.classes.length||(r.classes=1);var i=k(n,r);return function(e){return!i(e)}},"nth-child":function(e,t){var n=parseInt;if("odd"==t)return E;if("even"==t)return T;if(-1!=t.indexOf("n")){var r=t.split("n",2),i=r[0]?"-"==r[0]?-1:n(r[0]):1,o=r[1]?n(r[1]):0,s=0,a=-1;if(i>0?0>o?o=o%i&&i+o%i:o>0&&(o>=i&&(s=o-o%i),o%=i):0>i&&(i*=-1,o>0&&(a=o,o%=i)),i>0)return function(e){var t=j(e);return t>=s&&(0>a||a>=t)&&t%i==o};t=o}var l=n(t);return function(e){return j(e)==l}}},P=t("ie")<9||9==t("ie")&&t("quirks")?function(e){var t=e.toLowerCase();return"class"==t&&(e="className"),function(n){return d?n.getAttribute(e):n[e]||n[t]}}:function(e){return function(t){return t&&t.getAttribute&&t.hasAttribute(e)}},k=function(e,t){if(!e)return c;t=t||{};var n=null;return"el"in t||(n=h(n,g)),"tag"in t||"*"!=e.tag&&(n=h(n,function(t){return t&&(d?t.tagName:t.tagName.toUpperCase())==e.getTag()})),"classes"in t||s(e.classes,function(e,t,r){var i=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)");n=h(n,function(e){return i.test(e.className)}),n.count=t}),"pseudos"in t||s(e.pseudos,function(e){var t=e.name;I[t]&&(n=h(n,I[t](t,e.value)))}),"attrs"in t||s(e.attrs,function(e){var t,r=e.attr;e.type&&y[e.type]?t=y[e.type](r,e.matchFor):r.length&&(t=P(r)),t&&(n=h(n,t))}),"id"in t||e.id&&(n=h(n,function(t){return!!t&&t.id==e.id})),n||"default"in t||(n=c),n},R=function(e){return function(t,n,r){for(;t=t[w];)if(!b||g(t)){r&&!Y(t,r)||!e(t)||n.push(t);break}return n}},M=function(e){return function(t,n,r){for(var i=t[w];i;){if(C(i)){if(r&&!Y(i,r))break;e(i)&&n.push(i)}i=i[w]}return n}},L=function(e,t){var r=function(e){var t=[];try{t=Array.prototype.slice.call(e)}catch(n){for(var r=0,i=e.length;i>r;r++)t.push(e[r])}return t};return e=e||c,function(i,o,s){var a,l=0,u=[];for(u=r(i.children||i.childNodes),t&&n.forEach(u,function(e){1===e.nodeType&&(u=u.concat(r(e.getElementsByTagName("*"))))});a=u[l++];)C(a)&&(!s||Y(a,s))&&e(a,l)&&o.push(a);return o}},O=function(e,t){for(var n=e.parentNode;n&&n!=t;)n=n.parentNode;return!!n},A={},D=function(t){var r=A[t.query];if(r)return r;var i=t.infixOper,o=i?i.oper:"",s=k(t,{el:1}),u=t.tag,d="*"==u,f=a().getElementsByClassName;if(o){var h={el:1};d&&(h.tag=1),s=k(t,h),"+"==o?r=R(s):"~"==o?r=M(s):">"==o&&(r=L(s))}else if(t.id)s=!t.loops&&d?c:k(t,{el:1,id:1}),r=function(r,i){var o=e.byId(t.id,r.ownerDocument||r);if(r.ownerDocument&&!O(r,r.ownerDocument)){var a=11===r.nodeType?r.childNodes:[r];n.some(a,function(e){var n=L(function(e){return e.id===t.id},!0)(e,[]);return n.length?(o=n[0],!1):void 0})}if(o&&s(o))return 9==r.nodeType?p(o,i):O(o,r)?p(o,i):void 0};else if(f&&/\{\s*\[native code\]\s*\}/.test(String(f))&&t.classes.length&&!l){s=k(t,{el:1,classes:1,id:1});var g=t.classes.join(" ");r=function(e,t,n){for(var r,i=p(0,t),o=0,a=e.getElementsByClassName(g);r=a[o++];)s(r,e)&&Y(r,n)&&i.push(r);return i}}else d||t.loops?(s=k(t,{el:1,tag:1,id:1}),r=function(e,n,r){for(var i,o=p(0,n),a=0,l=t.getTag(),u=l?e.getElementsByTagName(l):[];i=u[a++];)s(i,e)&&Y(i,r)&&o.push(i);return o}):r=function(e,n,r){for(var i,o=p(0,n),s=0,a=t.getTag(),l=a?e.getElementsByTagName(a):[];i=l[s++];)Y(i,r)&&o.push(i);return o};return A[t.query]=r},H=function(e,t){for(var n,r,i,o,s,a=p(e),l=t.length,u=0;l>u;u++){s=[],n=t[u],r=a.length-1,r>0&&(o={},s.nozip=!0);for(var d=D(n),c=0;i=a[c];c++)d(i,s,o);if(!s.length)break;a=s}return s},F={},q={},B=function(e){var t=f(o(e));if(1==t.length){var n=D(t[0]);return function(e){var t=n(e,[]);return t&&(t.nozip=!0),t}}return function(e){return H(e,t)}},z=t("ie")?"commentStrip":"nozip",U="querySelectorAll",W=!!a()[U],V=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,K=function(e,t,n,r){return n?(t?t+" ":"")+n+(r?" "+r:""):e},Q=/([^[]*)([^\]]*])?/g,X=function(e,t,n){return t.replace(V,K)+(n||"")},G=function(e,n){if(e=e.replace(Q,X),W){var r=q[e];if(r&&!n)return r}var i=F[e];if(i)return i;var o=e.charAt(0),s=-1==e.indexOf(" ");e.indexOf("#")>=0&&s&&(n=!0);var a=W&&!n&&-1==u.indexOf(o)&&(!t("ie")||-1==e.indexOf(":"))&&!(l&&e.indexOf(".")>=0)&&-1==e.indexOf(":contains")&&-1==e.indexOf(":checked")&&-1==e.indexOf("|=");if(a){var d=u.indexOf(e.charAt(e.length-1))>=0?e+" *":e;return q[e]=function(t){if(9==t.nodeType||s)try{var n=t[U](d);return n[z]=!0,n}catch(r){}return G(e,!0)(t)}}var c=e.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return F[e]=c.length<2?B(e):function(e){for(var t,n=0,r=[];t=c[n++];)r=r.concat(B(t)(e));return r}},J=0,$=t("ie")?function(e){return d?e.getAttribute("_uid")||e.setAttribute("_uid",++J)||J:e.uniqueID}:function(e){return e._uid||(e._uid=++J)},Y=function(e,t){if(!t)return 1;var n=$(e);return t[n]?0:t[n]=1},Z="_zipIdx",ee=function(e){if(e&&e.nozip)return e;if(!e||!e.length)return[];if(e.length<2)return[e[0]];var n=[];J++;var r,i;if(t("ie")&&d){var o=J+"";for(r=0;r<e.length;r++)(i=e[r])&&i.getAttribute(Z)!=o&&(n.push(i),i.setAttribute(Z,o))}else if(t("ie")&&e.commentStrip)try{for(r=0;r<e.length;r++)(i=e[r])&&g(i)&&n.push(i)}catch(s){}else for(r=0;r<e.length;r++)(i=e[r])&&i[Z]!=J&&(n.push(i),i[Z]=J);return n},te=function(e,t){t=t||a();var n=t.ownerDocument||t;d="div"===n.createElement("div").tagName;var r=G(e)(t);return r&&r.nozip?r:ee(r)};return te.filter=function(t,r,i){for(var o,s=[],a=f(r),l=1!=a.length||/[^\w#\.]/.test(r)?function(t){return-1!=n.indexOf(te(r,e.byId(i)),t)}:k(a[0]),u=0;o=t[u];u++)l(o)&&s.push(o);return s},te});