/**
 * @license
 * (The MIT License)
 * 
 * Copyright (C) 2014-2017 by Vitaly Puzrin and Andrei Tuputcyn
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 **/
/**
 * @license
 * The ISC License
 * 
 * Copyright (c) Isaac Z. Schlueter and Contributors
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR
 * IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 **/
/**
 * @license
 * dag, nextTick, queue, tsort
 * 
 * (The MIT License)
 * 
 * Copyright (c) 2012 Jake Luer jake@qualiancy.com (http://qualiancy.com)
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 **/
/**
 * @license
 * UAParser.js v0.7.3
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 * 
 * Copyright � 2012-2014 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 & MIT
 * 
 **/
/**
 * @license
 * A polyfill for UserTiming (http://www.w3.org/TR/user-timing/)
 * 
 * Copyright 2013 Nic Jansma
 * http://nicj.net
 * 
 * https://github.com/nicjansma/usertiming.js
 * 
 * Licensed under the MIT license
 * 
 **/
/**
 * @license
 * MIT License
 * 
 * Copyright © 2012 Sebastian Tschan, https://blueimp.net
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 **/
/**
 * @license
 * The MIT License (MIT)
 * 
 * Copyright (c) 2015-2017 Fengyuan Chen
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 **/
/**
 * @license
 * (The MIT License)
 * 
 * Copyright (C) 2014-2017 by Vitaly Puzrin
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 **/
define("paychex.core/CUE",["paychex.core/InheritanceHelper","lodash"],function(e,t){"use strict";function r(e){var r=t.attempt(function(){return t.isEmpty(e)?"none":e.split("-").pop()});return t.isError(r)?"none":r}var n=function(e,t,i,o){this.message=e,this.cause=t,this.correlationId=i,this.formattedCorrelationId=r(i),this.stack=(new Error).stack,this.type=void 0!==o?o:n.ERROR_TYPES.CRITICAL};return e.extend(n,Error),n.ERROR_TYPES={CRITICAL:"CRITICAL_UNKNOWN",APPLOAD:"APPLICATION_LOAD"},n.formatCorrelationID=r,n}),define("paychex.core/DeviceProfile",["lodash","paychex.core/lib/ua-parser.min"],function(e,t){"use strict";function r(){var t=e.isFunction(u.getDevice)?(u.getDevice().type||"PERSONAL_COMPUTER").toUpperCase():u.deviceCategory.category.toUpperCase();return t="SMARTPHONE"===t&&"iPad"===navigator.platform?"TABLET":t,a[t]||o.PHONE}function n(){var t=e.attempt(function(){return e.pick(u.getBrowser(),["name","version","major","family"])}),r=e.isError(t)?[0,0]:t.version.split("."),n=e.get(u,"versionNumber.groups",r);return e.merge(e.defaults(e.isError(t)?{}:t,{name:u.name,family:u.family}),{version:{full:n.join("."),major:n[0],minor:n[1]}})}function i(){return e.get(u,"operatingSystem.family","")}var o={DESKTOP:"desktop",TABLET:"tablet",PHONE:"phone"},a={GAME_CONSOLE:o.DESKTOP,OTHER:o.PHONE,PDA:o.PHONE,PERSONAL_COMPUTER:o.DESKTOP,SMART_TV:o.DESKTOP,SMARTPHONE:o.PHONE,TABLET:o.TABLET,UNKNOWN:o.PHONE,WEARABLE_COMPUTER:o.PHONE},s=[[/(SM-G900\w)/i],[t.DEVICE.MODEL,[t.DEVICE.VENDOR,"Samsung"],[t.DEVICE.TYPE,t.DEVICE.MOBILE]]],u=new t(null,{device:s});return{Categories:o,getUAParser:function(){return u},getDeviceCategory:r,getBrowserProfile:n,getDeviceResult:function(){return u.getResult()},getDeviceProfile:function(){return u.getDevice()},getOSProfile:function(){return u.getOS()},getEngineProfile:function(){return u.getEngine()},setUAParser:function(t){e.isObject(t)&&(u=t)},setUserAgent:function(e){u.setUA(e)},isMobile:function(){return r()===o.PHONE},isPhone:function(){return r()===o.PHONE},isDesktop:function(){return r()===o.DESKTOP},isTablet:function(){return r()===o.TABLET},isIPhone:function(){return r()===o.PHONE&&this.isAppleOS()},isAndroidOS:function(){return"ANDROID"===i()},isAppleOS:function(){return"IOS"===i()},isSafari:function(){var e=n();return!(!e.name||"safari"!==e.name.toLowerCase())},isFirefox:function(){var e=n();return!(!e.name||"firefox"!==e.name.toLowerCase())},isInternetExplorer:function(){return!!document.documentMode},isEdge:function(){return!document.documentMode&&!!window.StyleMedia},isNative:function(){return e.get(window,"jspVars.isPhoneGap",!1)},getXPlatformInfo:function(){var t=this.isNative()?"native":"web",r=this.isAppleOS()||this.isAndroidOS()?i():"other";return t+"-"+e.toLower(r)}}}),define("paychex.core/Errors",["lodash","./PaychexError","paychex.core/Logger","paychex.core/utils/Overloader"],function(_,PaychexError,Logger,Overloader){"use strict";function Errors(){}function createDynamicErrorClassIfNeeded(className){window[className]||(eval('window["'+className+'"] = function '+className+'() {   var tmp = Error.apply(this, [].slice.call(arguments));   this.message = this.message || tmp.message;   this.name = tmp.name = "'+className+'";   Object.defineProperty(this, "stack", {       get: function getStack() { return tmp.stack; }   });   return this;}'),window[className].prototype=new PaychexError,window[className].prototype.constructor=window[className])}function getErrorInstance(e,t,r,n){createDynamicErrorClassIfNeeded(t);var i=new window[t](r);return i.causedBy=e,i.severity=e&&e.severity?e.severity:PaychexError.Severity.ERROR,_.merge(i,n),i}var methods=new Overloader;return methods.overload("getError","string",function(e,t){return getErrorInstance(null,"PaychexError",e,t)}),methods.overload("getError","string","undefined",function(e,t,r){return 1===arguments.length?getErrorInstance(null,"PaychexError",e):getErrorInstance(null,e,"No message provided to Errors API",r)}),methods.overload("getError","string","string",function(e,t,r){return getErrorInstance(null,e,t,r)}),methods.overload("getError","Error",function(e,t){return _.merge(e,{severity:e.severity||"ERROR"},t)}),methods.overload("getError","Error","string",function(e,t,r){return getErrorInstance(e,"PaychexError",t,r)}),methods.overload("getError","Error","string","string",function(e,t,r,n){return getErrorInstance(e,t,r,n)}),Errors.get=function(){return methods.invoke("getError",arguments)},Errors.throw=function(){throw Errors.get.apply(null,_.toArray(arguments))},Errors.fatal=Errors.throwFatal=function(){var e=Errors.get.apply(null,_.toArray(arguments));throw e.severity=PaychexError.Severity.FATAL,e},Errors.none=Errors.throwNone=function(){var e=Errors.get.apply(null,_.toArray(arguments));throw e.severity=PaychexError.Severity.NONE,e},Errors.swallow=function(){return function(){}},Errors.logAndSwallow=function(e){return function(t){Logger.get(e||"paychex.core/Errors").error(t)}},Errors.rethrow=Errors.rethrowAs=function(){var e=_.toArray(arguments);return function(t){var r=t;_.isError(r)||(r=Errors.get(t)),e.unshift(r),Errors.throw.apply(null,e)}},Errors.Types={Data:"DataError",Http:"HttpError",IllegalArgument:"IllegalArgumentError",Invocation:"InvocationError",RemoteOperation:"RemoteOperationError",RestOperation:"RestOperationError",Timeout:"TimeoutError",Type:"TypeError",Validation:"ValidationError",UserCancellation:"UserCancellationError"},Errors}),define("paychex.core/Eventing",["paychex.core/Utils","paychex.core/Errors","paychex.core/Promise","paychex.core/Workflows","paychex.core/Validator","paychex.core/Prototypes"],function(e,t,r,n,i){"use strict";function o(o){var a={},s={SUBSCRIBE:"Method `subscribe` requires a non-empty string and either 1 function or 3 functions as callbacks.",ANNOUNCE:"Method `announce` requires non-empty strings for source and topic and an optional payload object and/or positive timeout."};this.getName=function(){return o},this.register=this.subscribe=function(u,c,l,f){i.isTypeMatch([u,c,l,f],["nonEmptyString","function","function?","function?"])||t.throw(t.Types.IllegalArgument,s.SUBSCRIBE);var p=e.sluggify("css",o,u),h=a[p],d=e.uniqueId(u);return h||(h=a[p]=n.create(p)),h.addStep(d,function(){return{execute:function(e){if(this.dispatchArgs=e,l)return new r(function(t,r){c(e,r,t)})},success:function(){(l||c)(this.dispatchArgs)},failure:f}}),{topic:u,unregister:function(){h.removeStep(d)}}},this.fire=this.announce=function(n,u,c,l){i.isTypeMatch([n,u,c,l],["nonEmptyString","nonEmptyString","any?","number?"])&&(void 0===l||i.isNumber(l,1))||t.throw(t.Types.IllegalArgument,s.ANNOUNCE);var f=a[e.sluggify("css",o,u)],p={topic:u,source:n,payload:c};return f?f.dispatch([p],l).then(e.constant(p)):r.resolve(p)}}var a={};return{isBroker:function(e){return e instanceof o},makeNewEventBroker:function(t){var r=e.sluggify("css",String(t||"default-broker"));return a[r]||(a[r]=new o(r)),a[r]}}}),define("paychex.core/FileOpener",["paychex.core/WindowOpener","paychex.core/Errors","lodash"],function(e,t,r){"use strict";return{open:function(){var n=arguments.length<=2?arguments:r.includes(arguments[2],"=")?arguments:Array.prototype.slice.call(arguments,0,2);return e.open.apply(this,n).then(function(e){e&&e.winRef||t.throw("FileOpener","failed to open window",{severity:"NONE"})}).catch(function(e){t.throw(e,"FileOpener","failed to open window",{severity:"NONE"})})}}}),define("paychex.core/InheritanceHelper",[],function(){"use strict";var e={};return e.inherit=function(e){function t(){}return t.prototype=e,new t},e.extend=function(t,r){t.prototype=e.inherit(r.prototype),t.prototype.constructor=t,t.parent=r.prototype},e.superConstructor=function(e,t){e.parent.constructor.apply(e,t)},e}),function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,r=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),n=r&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,a=(r||i)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,a,s,u,c,l,f,p,h;if(!(t=e.match(o)))throw new Error("invalid data URI");for(a=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),s=!!t[4],u=e.slice(t[0].length),c=s?atob(u):decodeURIComponent(u),l=new ArrayBuffer(c.length),f=new Uint8Array(l),p=0;p<c.length;p+=1)f[p]=c.charCodeAt(p);return r?new Blob([n?f:l],{type:a}):((h=new i).append(l),h.getBlob(a))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,r,n){var i=this;setTimeout(function(){e(n&&t.toDataURL&&a?a(i.toDataURL(r,n)):i.mozGetAsFile("blob",r))})}:t.toDataURL&&a&&(t.toBlob=function(e,t,r){var n=this;setTimeout(function(){e(a(n.toDataURL(t,r)))})})),"function"==typeof define&&define.amd?define("paychex.core/lib/canvas-to-blob",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:e.dataURLtoBlob=a}(window),define("paychex.core/lib/dag",["paychex.core/lib/queue","paychex.core/lib/tsort"],function(e,t){"use strict";var r=function(){};return function(n,i,o,a){function s(e){return f.filter(function(t){return t.id===e})[0]}function u(e,t){o(e,function(r){s(e).children.forEach(function(t){var r=s(t);r.fulfilled.push(e),r.parents.length===r.fulfilled.length&&p.push(t,null,!0)}),t(r)})}function c(e){e.fulfilled=[],e.parents.length||p.push(e.id)}a=a||r;var l=t(n);if(l.error)return a(l.error);if(!l.path.length)return a(null);var f=l.graph,p=e(u,i);f.forEach(c),p.onerror=a,p.drain=a,p.process()}}),define("paychex.core/lib/nextTick",[],function(){"use strict";return window.requestAnimationFrame?window.requestAnimationFrame:window.setTimeout}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("paychex.core/lib/pica",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.pica=e()}}(function(){return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return i(r||e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){"use strict";function n(e,t){this.__requested_features=e||[],this.__initPromise=null,this.__wasm_module=t&&t.wasm_module?t:null,this.features={js:!1,wasm:!1}}function i(e,t,r){for(var n=3,i=t*r*4|0;n<i;)e[n]=255,n=n+4|0}function o(e){return new Uint8Array(e.buffer,0,e.byteLength)}function a(e,t,r){if(l)return void t.set(o(e),r);for(var n=r,i=0;i<e.length;i++){var a=e[i];t[n++]=255&a,t[n++]=a>>8&255}}var s=e("./utils").base64decode,u=e("./mathlib/wasm/math_wasm_base64");n.prototype.init=function(){var e=this;return this.__initPromise=Promise.resolve().then(function(){return e.unsharp=e.unsharp_js,e.__requested_features.indexOf("js")>=0&&(e.features.js=!0,e.resize=e.resize_js),"undefined"!=typeof WebAssembly&&e.__requested_features.indexOf("wasm")>=0?e.__wasm_module?(e.features.wasm=!0,e.resize=e.resize_wasm,null):WebAssembly.compile(s(u)).then(function(t){e.__wasm_module=t,e.features.wasm=!0,e.resize=e.resize_wasm}).catch(function(){}):null}).then(function(){if(!e.features.wasm&&!e.features.js)throw new Error("Pica mathlib: no supported methods found");return e}),this.__initPromise},n.prototype.resizeAndUnsharp=function(e,t){var r=this.resize(e,t);return e.unsharpAmount&&this.unsharp(r,e.toWidth,e.toHeight,e.unsharpAmount,e.unsharpRadius,e.unsharpThreshold),r},n.prototype.unsharp_js=e("./mathlib/unsharp_js"),n.prototype.resize_js=e("./mathlib/resize_js");var c=e("./mathlib/resize_filter_gen"),l=!0;try{l=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(e){}n.prototype.resize_wasm=function(e,t){var r=e.src,n=e.width,o=e.height,s=e.toWidth,u=e.toHeight,l=e.scaleX||e.toWidth/e.width,f=e.scaleY||e.toHeight/e.height,p=e.offsetX||0,h=e.offsetY||0,d=e.dest||new Uint8Array(s*u*4),g=void 0===e.quality?3:e.quality,m=e.alpha||!1;t||(t={});var y="filter_"+g+"|"+n+"|"+s+"|"+l+"|"+p,v="filter_"+g+"|"+o+"|"+u+"|"+f+"|"+h,w=t[y]||c(g,n,s,l,p),b=t[v]||c(g,o,u,f,h),E=Math.max(r.byteLength,d.byteLength)+w.byteLength+b.byteLength+o*s*4,A=Math.ceil(E/65536),x=t.wasm_imports||{env:{memory:new WebAssembly.Memory({initial:A})}},S=x.env.memory,T=S.buffer.byteLength/65536;A>T&&S.grow(A-T+16);var O=t.wasm_instance||new WebAssembly.Instance(this.__wasm_module,x);t.wasm_imports||(t.wasm_imports=x),t.wasm_instance||(t.wasm_instance=O);var I=new Uint8Array(x.env.memory.buffer),_=new Uint32Array(x.env.memory.buffer),N=new Uint32Array(r.buffer);_.set(N);var k=Math.max(r.byteLength,d.byteLength),P=k+o*s*4,R=P+w.byteLength;a(w,I,P),a(b,I,R),O.exports.convolveHV(P,R,k,n,o,s,u);var M=new Uint32Array(d.buffer);return M.set(_.subarray(0,M.length)),m||i(d,s,u),d},t.exports=n},{"./mathlib/resize_filter_gen":4,"./mathlib/resize_js":6,"./mathlib/unsharp_js":7,"./mathlib/wasm/math_wasm_base64":8,"./utils":11}],2:[function(e,t,r){"use strict";t.exports=function(e,t,r){for(var n,i,o,a,s,u=t*r,c=new Uint16Array(u),l=0;l<u;l++)n=e[4*l],i=e[4*l+1],o=e[4*l+2],s=n>=i&&n>=o?n:i>=o&&i>=n?i:o,a=n<=i&&n<=o?n:i<=o&&i<=n?i:o,c[l]=257*(s+a)>>1;return c}},{}],3:[function(e,t,r){"use strict";function n(e){return e<0?0:e>255?255:e}function i(e,t,r,i,o,a){var s,u,c,l,f,p,h,d,g,m,y,v=0,w=0;for(g=0;g<i;g++){for(f=0,m=0;m<o;m++){for(p=a[f++],h=a[f++],d=v+4*p|0,s=u=c=l=0;h>0;h--)y=a[f++],l=l+y*e[d+3]|0,c=c+y*e[d+2]|0,u=u+y*e[d+1]|0,s=s+y*e[d]|0,d=d+4|0;t[w+3]=n(l+8192>>14),t[w+2]=n(c+8192>>14),t[w+1]=n(u+8192>>14),t[w]=n(s+8192>>14),w=w+4*i|0}w=4*(g+1)|0,v=(g+1)*r*4|0}}function o(e,t,r,i,o,a){var s,u,c,l,f,p,h,d,g,m,y,v=0,w=0;for(g=0;g<i;g++){for(f=0,m=0;m<o;m++){for(p=a[f++],h=a[f++],d=v+4*p|0,s=u=c=l=0;h>0;h--)y=a[f++],l=l+y*e[d+3]|0,c=c+y*e[d+2]|0,u=u+y*e[d+1]|0,s=s+y*e[d]|0,d=d+4|0;t[w+3]=n(l+8192>>14),t[w+2]=n(c+8192>>14),t[w+1]=n(u+8192>>14),t[w]=n(s+8192>>14),w=w+4*i|0}w=4*(g+1)|0,v=(g+1)*r*4|0}}t.exports={convolveHorizontally:i,convolveVertically:o}},{}],4:[function(e,t,r){"use strict";function n(e){return Math.round(e*((1<<o)-1))}var i=e("./resize_filter_info"),o=14;t.exports=function(e,t,r,o,a){var s,u,c,l,f,p,h,d,g,m,y,v,w,b,E,A,x,S=i[e].filter,T=1/o,O=Math.min(1,o),I=i[e].win/O,_=Math.floor(2*(I+1)),N=new Int16Array((_+2)*r),k=0,P=!N.subarray||!N.set;for(s=0;s<r;s++){for(u=(s+.5)*T+a,c=Math.max(0,Math.floor(u-I)),l=Math.min(t-1,Math.ceil(u+I)),f=l-c+1,p=new Float32Array(f),h=new Int16Array(f),d=0,g=c,m=0;g<=l;g++,m++)y=S((g+.5-u)*O),d+=y,p[m]=y;for(v=0,m=0;m<p.length;m++)w=p[m]/d,v+=w,h[m]=n(w);for(h[r>>1]+=n(1-v),b=0;b<h.length&&0===h[b];)b++;if(b<h.length){for(E=h.length-1;E>0&&0===h[E];)E--;if(A=c+b,x=E-b+1,N[k++]=A,N[k++]=x,P)for(m=b;m<=E;m++)N[k++]=h[m];else N.set(h.subarray(b,E+1),k),k+=x}else N[k++]=0,N[k++]=0}return N}},{"./resize_filter_info":5}],5:[function(e,t,r){"use strict";t.exports=[{win:.5,filter:function(e){return e>=-.5&&e<.5?1:0}},{win:1,filter:function(e){if(e<=-1||e>=1)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(e<=-2||e>=2)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(e<=-3||e>=3)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}]},{}],6:[function(e,t,r){"use strict";function n(e,t,r){for(var n=3,i=t*r*4|0;n<i;)e[n]=255,n=n+4|0}function i(e,t){var r=e.src,i=e.width,u=e.height,c=e.toWidth,l=e.toHeight,f=e.scaleX||e.toWidth/e.width,p=e.scaleY||e.toHeight/e.height,h=e.offsetX||0,d=e.offsetY||0,g=e.dest||new Uint8Array(c*l*4),m=void 0===e.quality?3:e.quality,y=e.alpha||!1;if(i<1||u<1||c<1||l<1)return[];t||(t={});var v="filter_"+m+"|"+i+"|"+c+"|"+f+"|"+h,w="filter_"+m+"|"+u+"|"+l+"|"+p+"|"+d,b=t[v]||o(m,i,c,f,h),E=t[w]||o(m,u,l,p,d),A=new Uint8Array(c*u*4);return a(r,A,i,u,c,b),s(A,g,u,c,l,E),y||n(g,c,l),g}var o=e("./resize_filter_gen"),a=e("./resize_convolve_js").convolveHorizontally,s=e("./resize_convolve_js").convolveVertically;t.exports=i},{"./resize_convolve_js":3,"./resize_filter_gen":4}],7:[function(e,t,r){"use strict";var n=e("glur/mono16"),i=e("./lightness16_js");t.exports=function(e,t,r,o,a,s){var u,c,l,f,p,h,d,g,m,y,v,w,b;if(!(0===o||a<.5)){a>2&&(a=2);var E=i(e,t,r),A=new Uint16Array(E);n(A,t,r,a);for(var x=o/100*4096+.5|0,S=257*s|0,T=t*r,O=0;O<T;O++)w=2*(E[O]-A[O]),Math.abs(w)>=S&&(b=4*O,u=e[b],c=e[b+1],l=e[b+2],g=u>=c&&u>=l?u:c>=u&&c>=l?c:l,d=u<=c&&u<=l?u:c<=u&&c<=l?c:l,h=257*(g+d)>>1,d===g?f=p=0:(p=h<=32767?4095*(g-d)/(g+d)|0:4095*(g-d)/(510-g-d)|0,f=u===g?65535*(c-l)/(6*(g-d))|0:c===g?21845+(65535*(l-u)/(6*(g-d))|0):43690+(65535*(u-c)/(6*(g-d))|0)),h+=x*w+2048>>12,h>65535?h=65535:h<0&&(h=0),0===p?u=c=l=h>>8:(y=h<=32767?h*(4096+p)+2048>>12:h+((65535-h)*p+2048>>12),m=2*h-y>>8,y>>=8,v=f+21845&65535,u=v>=43690?m:v>=32767?m+(6*(y-m)*(43690-v)+32768>>16):v>=10922?y:m+(6*(y-m)*v+32768>>16),v=65535&f,c=v>=43690?m:v>=32767?m+(6*(y-m)*(43690-v)+32768>>16):v>=10922?y:m+(6*(y-m)*v+32768>>16),v=f-21845&65535,l=v>=43690?m:v>=32767?m+(6*(y-m)*(43690-v)+32768>>16):v>=10922?y:m+(6*(y-m)*v+32768>>16)),e[b]=u,e[b+1]=c,e[b+2]=l)}}},{"./lightness16_js":2,"glur/mono16":13}],8:[function(e,t,r){"use strict";t.exports="AGFzbQEAAAABlICAgAACYAZ/f39/f38AYAd/f39/f39/AAKPgICAAAEDZW52Bm1lbW9yeQIAAQODgICAAAIAAQSEgICAAAFwAAAHmYCAgAACCGNvbnZvbHZlAAAKY29udm9sdmVIVgABCYGAgIAAAArtg4CAAALBg4CAAAEQfwJAIANFDQAgBEUNACAFQQRqIRVBACEMQQAhDQNAIA0hDkEAIRFBACEHA0AgB0ECaiESAn8gBSAHQQF0IgdqIgZBAmouAQAiEwRAQQAhCEEAIBNrIRQgFSAHaiEPIAAgDCAGLgEAakECdGohEEEAIQlBACEKQQAhCwNAIBAoAgAiB0EYdiAPLgEAIgZsIAtqIQsgB0H/AXEgBmwgCGohCCAHQRB2Qf8BcSAGbCAKaiEKIAdBCHZB/wFxIAZsIAlqIQkgD0ECaiEPIBBBBGohECAUQQFqIhQNAAsgEiATagwBC0EAIQtBACEKQQAhCUEAIQggEgshByABIA5BAnRqIApBgMAAakEOdSIGQf8BIAZB/wFIG0EQdEGAgPwHcUEAIAZBAEobIAtBgMAAakEOdSIGQf8BIAZB/wFIG0EYdEEAIAZBAEobciAJQYDAAGpBDnUiBkH/ASAGQf8BSBtBCHRBgP4DcUEAIAZBAEobciAIQYDAAGpBDnUiBkH/ASAGQf8BSBtB/wFxQQAgBkEAShtyNgIAIA4gA2ohDiARQQFqIhEgBEcNAAsgDCACaiEMIA1BAWoiDSADRw0ACwsLoYCAgAAAAkBBACACIAMgBCAFIAAQACACQQAgBCAFIAYgARAACws="},{}],9:[function(e,t,r){"use strict";function n(e,t){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=t||2e3}n.prototype.acquire=function(){var e=this,t=void 0;return 0!==this.available.length?t=this.available.pop():(t=this.create(),t.id=this.lastId++,t.release=function(){return e.release(t)}),this.acquired[t.id]=t,t},n.prototype.release=function(e){var t=this;delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout(function(){return t.gc()},100))},n.prototype.gc=function(){var e=this,t=Date.now();this.available=this.available.filter(function(r){return!(t-r.lastUsed>e.idle)||(r.destroy(),!1)}),0!==this.available.length?this.timeoutId=setTimeout(function(){return e.gc()},100):this.timeoutId=0},t.exports=n},{}],10:[function(e,t,r){"use strict";function n(e){var t=Math.round(e);return Math.abs(e-t)<o?t:Math.floor(e)}function i(e){var t=Math.round(e);return Math.abs(e-t)<o?t:Math.ceil(e)}var o=1e-5;t.exports=function(e){var t,r,o,a,s,u,c,l=e.toWidth/e.width,f=e.toHeight/e.height,p=n(e.srcTileSize*l)-2*e.destTileBorder,h=n(e.srcTileSize*f)-2*e.destTileBorder,d=[];for(a=0;a<e.toHeight;a+=h)for(o=0;o<e.toWidth;o+=p)t=o-e.destTileBorder,t<0&&(t=0),s=o+p+e.destTileBorder-t,t+s>=e.toWidth&&(s=e.toWidth-t),r=a-e.destTileBorder,r<0&&(r=0),u=a+h+e.destTileBorder-r,r+u>=e.toHeight&&(u=e.toHeight-r),c={toX:t,toY:r,toWidth:s,toHeight:u,toInnerX:o,toInnerY:a,toInnerWidth:p,toInnerHeight:h,offsetX:t/l-n(t/l),offsetY:r/f-n(r/f),scaleX:l,scaleY:f,x:n(t/l),y:n(r/f),width:i(s/l),height:i(u/f)},d.push(c);return d}},{}],11:[function(e,t,r){"use strict";function n(e){return Object.prototype.toString.call(e)}t.exports.isCanvas=function(e){var t=n(e);return"[object HTMLCanvasElement]"===t||"[object Canvas]"===t},t.exports.isImage=function(e){return"[object HTMLImageElement]"===n(e)},t.exports.limiter=function(e){function t(){r<e&&n.length&&(r++,n.shift()())}var r=0,n=[];return function(e){return new Promise(function(i,o){n.push(function(){e().then(function(e){i(e),r--,t()},function(e){o(e),r--,t()})}),t()})}},t.exports.cib_quality_name=function(e){switch(e){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},t.exports.cib_support=function(){return Promise.resolve().then(function(){if("undefined"==typeof createImageBitmap||"undefined"==typeof document)return!1;var e=document.createElement("canvas");return e.width=100,e.height=100,createImageBitmap(e,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(t){var r=10===t.width;return t.close(),e=null,r})}).catch(function(){return!1})},t.exports.base64decode=function(e){for(var t=e.replace(/[\r\n=]/g,""),r=t.length,n=[],i=0,o=0;o<r;o++)o%4==0&&o&&(n.push(i>>16&255),n.push(i>>8&255),n.push(255&i)),i=i<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r".indexOf(t.charAt(o));var a=r%4*6;return 0===a?(n.push(i>>16&255),n.push(i>>8&255),n.push(255&i)):18===a?(n.push(i>>10&255),n.push(i>>2&255)):12===a&&n.push(i>>4&255),new Uint8Array(n)}},{}],12:[function(e,t,r){"use strict";t.exports=function(){var t=e("./mathlib"),r=void 0,n={};onmessage=function(e){var i=e.data.opts;r||(r=new t(e.data.features,e.data.preload)),r.init().then(function(){var e=r.resizeAndUnsharp(i,n);postMessage({result:e},[e.buffer])}).catch(function(e){postMessage({err:e})})}}},{"./mathlib":1}],13:[function(e,t,r){function n(e){e<.5&&(e=.5);var t=Math.exp(.527076)/e,r=Math.exp(-t),n=Math.exp(-2*t),i=(1-r)*(1-r)/(1+2*t*r-n);return a=i,s=i*(t-1)*r,u=i*(t+1)*r,c=-i*n,l=2*r,f=-n,p=(a+s)/(1-l-f),h=(u+c)/(1-l-f),new Float32Array([a,s,u,c,l,f,p,h])}function i(e,t,r,n,i,o){var a,s,u,c,l,f,p,h,d,g,m,y,v,w;for(d=0;d<o;d++){for(f=d*i,p=d,h=0,a=e[f],l=a*n[6],c=l,m=n[0],y=n[1],v=n[4],w=n[5],g=0;g<i;g++)s=e[f],u=s*m+a*y+c*v+l*w,l=c,c=u,a=s,r[h]=c,h++,f++;for(f--,h--,p+=o*(i-1),a=e[f],l=a*n[7],c=l,s=a,m=n[2],y=n[3],g=i-1;g>=0;g--)u=s*m+a*y+c*v+l*w,l=c,c=u,a=s,s=e[f],t[p]=r[h]+c,f--,h--,p-=o}}function o(e,t,r,o){if(o){var a=new Uint16Array(e.length),s=new Float32Array(Math.max(t,r)),u=n(o);i(e,a,s,u,t,r,o),i(a,e,s,u,r,t,o)}}var a,s,u,c,l,f,p,h;t.exports=o},{}],14:[function(e,t,r){/*
     object-assign
     (c) Sindre Sorhus
     @license MIT
     */
"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,s,u=n(e),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var l in r)o.call(r,l)&&(u[l]=r[l]);if(i){s=i(r);for(var f=0;f<s.length;f++)a.call(r,s[f])&&(u[s[f]]=r[s[f]])}}return u}},{}],15:[function(e,t,r){var n=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e,t){function r(e){m[e]=!0;for(var t in i[e][1]){var n=i[e][1][t];m[n]||r(n)}}for(var s,u=Object.keys(o),c=0,l=u.length;c<l;c++){var f=u[c],p=o[f].exports;if(p===e||p&&p.default===e){s=f;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},c=0,l=u.length;c<l;c++){var f=u[c];h[f]=f}i[s]=[Function(["require","module","exports"],"("+e+")(self)"),h]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[s]=s,i[d]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),g];var m={};r(d);var y="("+n+")({"+Object.keys(m).map(function(e){return a(e)+":["+i[e][0]+","+a(i[e][1])+"]"}).join(",")+"},{},["+a(d)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,w=new Blob([y],{type:"text/javascript"});if(t&&t.bare)return w;var b=v.createObjectURL(w),E=new Worker(b);return E.objectURL=b,E}},{}],"/":[function(e,t,r){"use strict";function n(){return{value:a(l),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;e&&e.revokeObjectURL&&this.value.objectURL&&e.revokeObjectURL(this.value.objectURL)}}}}function i(e){if(!(this instanceof i))return new i(e);this.options=o(g,e||{});var t="lk_"+this.options.concurrency;this.__limit=p[t]||c.limiter(this.options.concurrency),p[t]||(p[t]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}var o=e("object-assign"),a=e("webworkify"),s=e("./lib/mathlib"),u=e("./lib/pool"),c=e("./lib/utils"),l=e("./lib/worker"),f=e("./lib/tiler"),p={},h=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(h=navigator.userAgent.indexOf("Safari")>=0)}catch(e){}var d=1;"undefined"!=typeof navigator&&(d=Math.min(navigator.hardwareConcurrency||1,4));var g={tile:1024,concurrency:d,features:["js","wasm","ww"],idle:2e3},m={quality:3,alpha:!1,unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},y=void 0;i.prototype.init=function(){var t=this;if(this.__initPromise)return this.__initPromise;if(!1!==y&&!0!==y&&(y=!1,"undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray))try{new ImageData(new Uint8ClampedArray(400),10,10),y=!0}catch(e){}var r=this.options.features.slice();if(r.indexOf("all")>=0&&(r=["cib","wasm","js","ww"]),this.__requested_features=r,this.__mathlib=new s(r),r.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{e("webworkify")(function(){}).terminate(),this.features.ww=!0;var i="wp_"+JSON.stringify(this.options);p[i]?this.__workersPool=p[i]:(this.__workersPool=new u(n,this.options.idle),p[i]=this.__workersPool)}catch(e){}var a=this.__mathlib.init().then(function(e){o(t.features,e.features)}),l=c.cib_support().then(function(e){if(t.features.cib&&r.indexOf("cib")<0)return void t.debug("createImageBitmap() resize supported, but disabled by config");r.indexOf("cib")>=0&&(t.features.cib=e)});return this.__initPromise=Promise.all([a,l]).then(function(){return t}),this.__initPromise},i.prototype.resize=function(e,t,r){var n=this;this.debug("Start resize...");var i=m;isNaN(r)?r&&(i=o(i,r)):i=o(i,{quality:r}),i.toWidth=t.width,i.toHeigth=t.height,i.width=e.naturalWidth||e.width,i.height=e.naturalHeight||e.height;var a=!1,s=null;i.cancelToken&&(s=i.cancelToken.then(function(e){throw a=!0,e},function(e){throw a=!0,e}));var u=t.getContext("2d",{alpha:Boolean(i.alpha)});return this.init().then(function(){if(a)return s;if(n.features.cib)return n.debug("Resize via createImageBitmap()"),createImageBitmap(e,{resizeWidth:i.toWidth,resizeHeight:i.toHeigth,resizeQuality:c.cib_quality_name(i.quality)}).then(function(e){if(a)return s;if(!i.unsharpAmount)return u.drawImage(e,0,0),e.close(),u=null,n.debug("Finished!"),t;n.debug("Unsharp result");var r=document.createElement("canvas");r.width=i.toWidth,r.height=i.toHeigth;var o=r.getContext("2d",{alpha:Boolean(i.alpha)});o.drawImage(e,0,0),e.close();var c=o.getImageData(0,0,i.toWidth,i.toHeigth);return n.__mathlib.unsharp(c.data,i.toWidth,i.toHeigth,i.unsharpAmount,i.unsharpRadius,i.unsharpThreshold),u.putImageData(c,0,0),c=o=r=u=null,n.debug("Finished!"),t});var r=void 0,o=void 0,l={},p=function(e){return Promise.resolve().then(function(){return n.features.ww?new Promise(function(t,r){var i=n.__workersPool.acquire();s&&s.catch(function(e){return r(e)}),i.value.onmessage=function(e){i.release(),e.data.err?r(e.data.err):t(e.data.result)},i.value.postMessage({opts:e,features:n.__requested_features,preload:{wasm_nodule:n.__mathlib.__}},[e.src.buffer])}):n.__mathlib.resizeAndUnsharp(e,l)})},d=function(t){return n.__limit(function(){if(a)return s;var l=void 0;if(c.isCanvas(e))n.debug("Get tile pixel data"),l=r.getImageData(t.x,t.y,t.width,t.height);else{n.debug("Draw tile imageBitmap/image to temporary canvas");var f=document.createElement("canvas");f.width=t.width,f.height=t.height;var d=f.getContext("2d",{alpha:Boolean(i.alpha)});d.globalCompositeOperation="copy",d.drawImage(o||e,t.x,t.y,t.width,t.height,0,0,t.width,t.height),n.debug("Get tile pixel data"),l=d.getImageData(0,0,t.width,t.height),d=f=null}var g={src:l.data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:i.quality,alpha:i.alpha,unsharpAmount:i.unsharpAmount,unsharpRadius:i.unsharpRadius,unsharpThreshold:i.unsharpThreshold};return n.debug("Invoke resize math"),Promise.resolve().then(function(){return p(g)}).then(function(e){if(a)return s;l=null;var r=void 0;if(n.debug("Convert raw rgba tile result to ImageData"),y)r=new ImageData(new Uint8ClampedArray(e),t.toWidth,t.toHeight);else if(r=u.createImageData(t.toWidth,t.toHeight),r.data.set)r.data.set(e);else for(var i=r.data.length-1;i>=0;i--)r.data[i]=e[i];return n.debug("Draw tile"),h?u.putImageData(r,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth+1e-5,t.toInnerHeight+1e-5):u.putImageData(r,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),null})})};return Promise.resolve().then(function(){if(c.isCanvas(e))return r=e.getContext("2d",{alpha:Boolean(i.alpha)}),null;if(c.isImage(e))return"undefined"==typeof createImageBitmap?null:(n.debug("Decode image via createImageBitmap"),createImageBitmap(e).then(function(e){o=e}));throw new Error('".from" should be image or canvas')}).then(function(){function e(){o&&(o.close(),o=null)}if(a)return s;n.debug("Calculate tiles");var r=f({width:i.width,height:i.height,srcTileSize:n.options.tile,toWidth:i.toWidth,toHeight:i.toHeigth,destTileBorder:Math.ceil(Math.max(3,2.5*i.unsharpRadius|0))}),u=r.map(function(e){return d(e)});return n.debug("Process tiles"),Promise.all(u).then(function(){return n.debug("Finished!"),e(),t},function(t){throw e(),t})})})},i.prototype.resizeBuffer=function(e){var t=this,r=o(m,e);return this.init().then(function(){return t.__mathlib.resizeAndUnsharp(r)})},i.prototype.toBlob=function(e,t,r){return t=t||"image/png",new Promise(function(n){if(e.toBlob)return void e.toBlob(function(e){return n(e)},t,r);for(var i=atob(e.toDataURL(t,r).split(",")[1]),o=i.length,a=new Uint8Array(o),s=0;s<o;s++)a[s]=i.charCodeAt(s);n(new Blob([a],{type:t}))})},i.prototype.debug=function(){},t.exports=i},{"./lib/mathlib":1,"./lib/pool":9,"./lib/tiler":10,"./lib/utils":11,"./lib/worker":12,"object-assign":14,webworkify:15}]},{},[])("/")}),define("paychex.core/lib/queue",["paychex.core/lib/nextTick"],function(e){"use strict";function t(e,t){this._iterator=e,this._concurrency=t||10,this._tasks=[],this._err=!1,this.workers=0}var r=function(){};return Object.defineProperty(t.prototype,"length",{get:function(){return this._tasks.length}}),t.prototype.push=function(t,n,i){"boolean"==typeof n&&(i=n,n=r),Array.isArray(t)||(t=[t]),n=n||r;for(var o=this._concurrency,a=this.saturated,s=0,u=t.length;s<u;s++){var c=t[s];this._tasks.push({task:c,cb:n}),a&&this._tasks.length===o&&a(),i&&e(this.process.bind(this))}return this},t.prototype.process=function(){var e=this,t=this._concurrency,r=this._iterator;if(this.workers<t&&this.length&&!this._err){var n=this._tasks.shift();this.empty&&!this.length&&this.empty(),this.workers++,r(n.task,function(){if(e.workers--,!e._err){var t=arguments[0];if(t&&(e._err=!0),n.cb&&n.cb.apply(n,arguments),t&&e.onerror)return e.onerror(t);e.drain&&e.length+e.workers===0&&e.drain(),e.process()}}),this.process()}return this},t.prototype.onerror=null,t.prototype.saturated=null,t.prototype.empty=null,t.prototype.drain=null,function(e,r){return new t(e,r)}}),define("paychex.core/lib/tsort",[],function(){"use strict";return function(e){function t(e){this.id=e,this.children=[],this.parents=[]}function r(e,t){var n=a[e],i=n.id;u[e]||(Array.isArray(t)||(t=[]),t.push(i),u[e]=!0,n.children.forEach(function(e){if(t.indexOf(e)>=0)throw new Error(i+" can not come before "+e);r(e.toString(),t.map(function(e){return e}))}),s.unshift(i))}function n(e){return null!==e&&void 0!==e}var i,o=[],a={},s=[],u={};e.forEach(function(e){var r=e[0],n=e[1];a[r]||(a[r]=new t(r)),a[n]||(a[n]=new t(n)),~a[n].parents.indexOf(r)||a[n].parents.push(r),~a[r].children.indexOf(n)||a[r].children.push(n)});try{Object.keys(a).forEach(r)}catch(e){return{error:e}}return i=s.filter(n),i.forEach(function(e){var t=a[e];t.children=t.children.filter(n),t.parents=t.parents.filter(n),o.push(t)}),{path:i,graph:o}}}),function(e,t){"use strict";var r="major",n="model",i="name",o="type",a="vendor",s="version",u="mobile",c="tablet",l={extend:function(e,t){for(var r in t)-1!=="browser cpu device engine os".indexOf(r)&&t[r].length%2==0&&(e[r]=t[r].concat(e[r]));return e},has:function(e,t){if("string"==typeof e)return-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()}},f={rgx:function(){for(var e,t,r,n,i,o,a,s=0,u=arguments;s<u.length&&!o;){var c=u[s],l=u[s+1];if(void 0===e){e={};for(n in l)i=l[n],"object"==typeof i?e[i[0]]=void 0:e[i]=void 0}for(t=r=0;t<c.length&&!o;)if(o=c[t++].exec(this.getUA()))for(n=0;n<l.length;n++)a=o[++r],i=l[n],"object"==typeof i&&i.length>0?2==i.length?"function"==typeof i[1]?e[i[0]]=i[1].call(this,a):e[i[0]]=i[1]:3==i.length?"function"!=typeof i[1]||i[1].exec&&i[1].test?e[i[0]]=a?a.replace(i[1],i[2]):void 0:e[i[0]]=a?i[1].call(this,a,i[2]):void 0:4==i.length&&(e[i[0]]=a?i[3].call(this,a.replace(i[1],i[2])):void 0):e[i]=a||void 0;s+=2}return e},str:function(e,t){for(var r in t)if("object"==typeof t[r]&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(l.has(t[r][n],e))return"?"===r?void 0:r}else if(l.has(t[r],e))return"?"===r?void 0:r;return e}},p={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:"NT 6.4",RT:"ARM"}}}},h={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[i,s,r],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[i,"Opera"],s,r],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[i,s,r],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[i,"IE"],s,r],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[i,"Yandex"],s,r],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[i,/_/g," "],s,r],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i],[i,s,r],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[i,"Dolphin"],s,r],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[i,"Chrome"],s,r],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[s,r,[i,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[s,r,i],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[i,[r,f.str,p.browser.oldsafari.major],[s,f.str,p.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[i,s,r],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[i,"Netscape"],s,r],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[i,s,r]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",l.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",l.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",l.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[n,a,[o,c]],[/applecoremedia\/[\w\.]+ \((ipad)/],[n,[a,"Apple"],[o,c]],[/(apple\s{0,1}tv)/i],[[n,"Apple TV"],[a,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[a,n,[o,c]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[n,[a,"Amazon"],[o,c]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[n,f.str,p.device.amazon.model],[a,"Amazon"],[o,u]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[n,a,[o,u]],[/\((ip[honed|\s\w*]+);/i],[n,[a,"Apple"],[o,u]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[a,n,[o,u]],[/\(bb10;\s(\w+)/i],[n,[a,"BlackBerry"],[o,u]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[n,[a,"Asus"],[o,c]],[/(sony)\s(tablet\s[ps])/i],[a,n,[o,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[a,n,[o,"console"]],[/android.+;\s(shield)\sbuild/i],[n,[a,"Nvidia"],[o,"console"]],[/(playstation\s[3portablevi]+)/i],[n,[a,"Sony"],[o,"console"]],[/(sprint\s(\w+))/i],[[a,f.str,p.device.sprint.vendor],[n,f.str,p.device.sprint.model],[o,u]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[a,n,[o,c]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[a,[n,/_/g," "],[o,u]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[n,[a,"Microsoft"],[o,"console"]],[/(kin\.[onetw]{3})/i],[[n,/\./g," "],[a,"Microsoft"],[o,u]],[/\s((milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?))[\w\s]+build\//i,/(mot)[\s-]?(\w+)*/i],[[a,"Motorola"],n,[o,u]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[n,[a,"Motorola"],[o,c]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[a,"Samsung"],n,[o,c]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[a,"Samsung"],n,[o,u]],[/(samsung);smarttv/i],[a,n,[o,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[n,[a,"Sharp"],[o,"smarttv"]],[/sie-(\w+)*/i],[n,[a,"Siemens"],[o,u]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[a,"Nokia"],n,[o,u]],[/android\s3\.[\s\w-;]{10}(a\d{3})/i],[n,[a,"Acer"],[o,c]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[[a,"LG"],n,[o,c]],[/(lg) netcast\.tv/i],[a,n,[o,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[n,[a,"LG"],[o,u]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[n,[a,"Lenovo"],[o,c]],[/linux;.+((jolla));/i],[a,n,[o,u]],[/((pebble))app\/[\d\.]+\s/i],[a,n,[o,"wearable"]],[/android.+;\s(glass)\s\d/i],[n,[a,"Google"],[o,"wearable"]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[o,l.lowerize],a,n]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[i,s],[/rv\:([\w\.]+).*(gecko)/i],[s,i]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[i,s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[i,[s,f.str,p.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[i,"Windows"],[s,f.str,p.os.windows.version]],[/\((bb)(10);/i],[[i,"BlackBerry"],s],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[i,s],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[i,"Symbian"],s],[/\((series40);/i],[i],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[i,"Firefox OS"],s],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[i,s],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[i,"Chromium OS"],s],[/(sunos)\s?([\w\.]+\d)*/i],[[i,"Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[i,s],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[i,"iOS"],[s,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[i,"Mac OS"],[s,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[i,s]]},d=function(t,r){if(!(this instanceof d))return new d(t,r).getResult();var n=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),i=r?l.extend(h,r):h;this.getBrowser=function(){return f.rgx.apply(this,i.browser)},this.getCPU=function(){return f.rgx.apply(this,i.cpu)},this.getDevice=function(){return f.rgx.apply(this,i.device)},this.getEngine=function(){return f.rgx.apply(this,i.engine)},this.getOS=function(){return f.rgx.apply(this,i.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this.setUA(n)};if(d.VERSION="0.7.3",d.BROWSER={NAME:i,MAJOR:r,VERSION:s},d.CPU={ARCHITECTURE:"architecture"},d.DEVICE={MODEL:n,VENDOR:a,TYPE:o,CONSOLE:"console",MOBILE:u,SMARTTV:"smarttv",TABLET:c,WEARABLE:"wearable",EMBEDDED:"embedded"},d.ENGINE={NAME:i,VERSION:s},d.OS={NAME:i,VERSION:s},"undefined"!=typeof exports)"undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports.UAParser=d;else{e.UAParser=d,"function"==typeof define&&define.amd&&define("paychex.core/lib/ua-parser.min",[],function(){return d});var g=e.jQuery||e.Zepto;if(void 0!==g){var m=new d;g.ua=m.getResult(),g.ua.get=function(){return m.getUA()},g.ua.set=function(e){m.setUA(e);var t=m.getResult();for(var r in t)g.ua[r]=t[r]}}}}(this),function(e){"use strict";void 0===e&&(e={}),void 0===e.performance&&(e.performance={}),e._perfRefForUserTimingPolyfill=e.performance,e.performance.userTimingJsNow=!1,e.performance.userTimingJsNowPrefixed=!1,e.performance.userTimingJsUserTiming=!1,e.performance.userTimingJsUserTimingPrefixed=!1,e.performance.userTimingJsPerformanceTimeline=!1,e.performance.userTimingJsPerformanceTimelinePrefixed=!1;var t,r,n=[],i=[],o=null;if("function"!=typeof e.performance.now){for(e.performance.userTimingJsNow=!0,i=["webkitNow","msNow","mozNow"],t=0;t<i.length;t++)if("function"==typeof e.performance[i[t]]){e.performance.now=e.performance[i[t]],e.performance.userTimingJsNowPrefixed=!0;break}var a=+new Date;e.performance.timing&&e.performance.timing.navigationStart&&(a=e.performance.timing.navigationStart),"function"!=typeof e.performance.now&&(e.performance.now=Date.now?function(){return Date.now()-a}:function(){return+new Date-a})}var s=function(){},u=function(){},c=[],l=!1,f=!1;if("function"!=typeof e.performance.getEntries||"function"!=typeof e.performance.mark){for("function"==typeof e.performance.getEntries&&"function"!=typeof e.performance.mark&&(f=!0),e.performance.userTimingJsPerformanceTimeline=!0,n=["webkit","moz"],i=["getEntries","getEntriesByName","getEntriesByType"],t=0;t<i.length;t++)for(r=0;r<n.length;r++)o=n[r]+i[t].substr(0,1).toUpperCase()+i[t].substr(1),"function"==typeof e.performance[o]&&(e.performance[i[t]]=e.performance[o],e.performance.userTimingJsPerformanceTimelinePrefixed=!0);s=function(e){c.push(e),"measure"===e.entryType&&(l=!0)};var p=function(){l&&(c.sort(function(e,t){return e.startTime-t.startTime}),l=!1)};if(u=function(e,r){for(t=0;t<c.length;)c[t].entryType!==e||void 0!==r&&c[t].name!==r?t++:c.splice(t,1)},"function"!=typeof e.performance.getEntries||f){var h=e.performance.getEntries;e.performance.getEntries=function(){p();var t=c.slice(0);return f&&h&&(Array.prototype.push.apply(t,h.call(e.performance)),t.sort(function(e,t){return e.startTime-t.startTime})),t}}if("function"!=typeof e.performance.getEntriesByType||f){var d=e.performance.getEntriesByType;e.performance.getEntriesByType=function(r){if(void 0===r||"mark"!==r&&"measure"!==r)return f&&d?d.call(e.performance,r):[];"measure"===r&&p();var n=[];for(t=0;t<c.length;t++)c[t].entryType===r&&n.push(c[t]);return n}}if("function"!=typeof e.performance.getEntriesByName||f){var g=e.performance.getEntriesByName;e.performance.getEntriesByName=function(r,n){if(n&&"mark"!==n&&"measure"!==n)return f&&g?g.call(e.performance,r,n):[];void 0!==n&&"measure"===n&&p();var i=[];for(t=0;t<c.length;t++)(void 0===n||c[t].entryType===n)&&c[t].name===r&&i.push(c[t]);return f&&g&&(Array.prototype.push.apply(i,g.call(e.performance,r,n)),i.sort(function(e,t){return e.startTime-t.startTime})),i}}}if("function"!=typeof e.performance.mark){for(e.performance.userTimingJsUserTiming=!0,n=["webkit","moz","ms"],i=["mark","measure","clearMarks","clearMeasures"],t=0;t<i.length;t++)for(r=0;r<n.length;r++)o=n[r]+i[t].substr(0,1).toUpperCase()+i[t].substr(1),"function"==typeof e.performance[o]&&(e.performance[i[t]]=e.performance[o],e.performance.userTimingJsUserTimingPrefixed=!0);var m={};"function"!=typeof e.performance.mark&&(e.performance.mark=function(t){var r=e.performance.now();if(void 0===t)throw new SyntaxError("Mark name must be specified");if(e.performance.timing&&t in e.performance.timing)throw new SyntaxError("Mark name is not allowed");m[t]||(m[t]=[]),m[t].push(r),s({entryType:"mark",name:t,startTime:r,duration:0})}),"function"!=typeof e.performance.clearMarks&&(e.performance.clearMarks=function(e){e?m[e]=[]:m={},u("mark",e)}),"function"!=typeof e.performance.measure&&(e.performance.measure=function(t,r,n){var i=e.performance.now();if(void 0===t)throw new SyntaxError("Measure must be specified");if(!r)return void s({entryType:"measure",name:t,startTime:0,duration:i});var o=0;if(e.performance.timing&&r in e.performance.timing){if("navigationStart"!==r&&0===e.performance.timing[r])throw new Error(r+" has a timing of 0");o=e.performance.timing[r]-e.performance.timing.navigationStart}else{if(!(r in m))throw new Error(r+" mark not found");o=m[r][m[r].length-1]}var a=i;if(n)if(a=0,e.performance.timing&&n in e.performance.timing){if("navigationStart"!==n&&0===e.performance.timing[n])throw new Error(n+" has a timing of 0");a=e.performance.timing[n]-e.performance.timing.navigationStart}else{if(!(n in m))throw new Error(n+" mark not found");a=m[n][m[n].length-1]}s({entryType:"measure",name:t,startTime:o,duration:a-o})}),"function"!=typeof e.performance.clearMeasures&&(e.performance.clearMeasures=function(e){u("measure",e)})}"undefined"!=typeof define&&define.amd?define("paychex.core/lib/usertiming.min",[],function(){return e.performance}):"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=e.performance)}("undefined"!=typeof window?window:void 0),define("paychex.core/Logger",["lib.log4js"],function(e){"use strict";return e.get=e.getLogger,e}),define("paychex.core/ModelList",["paychex.core/Utils","paychex.core/Validator","paychex.core/TriggerMixin"],function(e,t,r){"use strict";return function n(){var i=this,o=e.uniqueId(),a=null,s=-1,u=null,c=e.constant(0),l=e.constant("\0"),f=e.constant(!0),p=c,h=l,d=f,g={},m={},y=[],v=[],w=[],b={getObjMeta:function(t){var r;return e.isObject(t)?(t.__=t.__||{},t.__[o]=t.__[o]||{},t.__[o]):(r=e.hash(t),m[r]=m[r]||{},m[r])},removeObjMeta:function(t){e.isObject(t)&&t.__&&t.__[o]?delete t.__[o]:delete m[e.hash(t)]},assignValueOf:function(t){e.forEach(e.filter(t||y,function(e){return e instanceof Object}),function(e){var t=b.getObjMeta(e);t.origValueOf=t.origValueOf||e.valueOf,e.valueOf=u||t.origValueOf})},getNewGroup:function(t){var r=new n(t);return i.on("items-removed",function(t){e.invokeMap(e.values(g),"remove",t.args),b.removeEmptyGroups()}),i.on("selection-changed",function(t){e.invokeMap(e.values(g),"setSelected",t.args)}),r.on("items-added, items-removed",b.handleItemsChange),r},handleItemsChange:function(e){i["items-added"===e.key?"add":"remove"](e.args[0])},removeEmptyGroups:function(){g=e.omitBy(g,function(t){return e.isEqual(t.getSize(),0)})},mergeFiltered:function(t){v=v.concat(e.filter(t,d))},reApplyGroup:function(t){var r=e.groupBy(t||y,h);e.forOwn(r,function(t,r){e.forEach(e.filter(t,function(e){return b.getObjMeta(e).group!==r}),function(t){var n=b.getObjMeta(t);n.prevGroup=n.group,n.group="\0"!==r?r:null,n.prevGroup&&e.forEach(n.prevGroup.split(","),function(e){var r=e.trim();g.hasOwnProperty(r)&&(g[r].pause(),g[r].remove(t),g[r].resume())})}),"\0"!==r&&e.forEach(r.split(","),function(e){var r=e.trim();g.hasOwnProperty(r)?g[r].add(t):g[r]=b.getNewGroup(t),g[r].sortBy(p).filterBy(d)})}),b.removeEmptyGroups()},doCorrectSort:function(r){return t.isFunction(p,2)?r.sort(p):e.sortBy(r,p)},reApplySort:function(){v=b.doCorrectSort(v)},reApplyFilter:function(){v=e.filter(y,d),p!==c&&b.reApplySort()},updateSelectedItemsIfNecessary:function(){w=e.intersection(w,y)},updateActiveItemIfNecessary:function(){var t,r=null;e.isNull(a)||-1===e.indexOf(v,a)&&(r=null,t=Math.min(Math.max(0,s),v.length-1),-1!==t&&(r=v[t]),i.setActiveItem(r))},updateLastActiveIndex:function(){s=e.isNull(a)?-1:e.indexOf(v,a)}};r.apply(i),i.getSize=function(e){return(e?v:y).length},i.add=function(){var r=e(arguments).flattenDeep().reject(t.isNullOrUndefined).uniq().value();b.assignValueOf(r),r=e.difference(r,y),r.length>0&&(y=y.concat(r),b.reApplyGroup(r),b.mergeFiltered(r),b.reApplySort(),i.trigger("items-added",r,e.intersection(r,v)))},i.remove=function(){var t=e(arguments).flattenDeep().uniq().value();b.assignValueOf(t),t=e.intersection(t,y),t.length>0&&(y=e.difference(y,t),v=e.difference(v,t),e.forEach(t,b.removeObjMeta),i.trigger("items-removed",t))},i.update=i.updateItems=function(){var t=e(arguments).flattenDeep().uniq().value();b.assignValueOf(t),t=e.intersection(t,y),t.length>0&&(e.forEach([y,w],function(r){e.forEach(t,function(t){var n=e.indexOf(r,t);-1!==n&&r.splice(n,1,t),e.isEqual(a,t)&&(a=t)})}),i.trigger("items-modified",t))},i.load=i.loadItems=function(){var t,r,n,o=e(arguments).flattenDeep().uniq().value();b.assignValueOf(o),t=e.difference(o,y),r=e.difference(y,o),n=e.intersection(o,y),i.add(t),i.remove(r),i.update(n)},i.removeAll=function(){i.remove(y)},i.getItems=function(){return e.clone(v)},i.sortBy=i.orderBy=function(r,n){var o=r;return t.isNullOrUndefined(o)&&(o=c),p!==o&&(p=o,b.reApplySort(),n&&e.invokeMap(e.values(g),"sortBy",p,n),i.trigger("sort-changed")),i},i.groupBy=function(e){var r=e;return t.isNullOrUndefined(e)&&(r=l),h!==r&&(h=r,b.reApplyGroup(),i.trigger("grouping-changed")),i},i.filterBy=i.filter=function(r,n){var o=r;return t.isNullOrUndefined(r)&&(o=f),d!==o&&(d=o,b.reApplyFilter(),n&&e.invokeMap(e.values(g),"filterBy",d,n),i.trigger("filter-changed")),i},i.getGroups=function(){return e.clone(g)},i.getSelected=i.getSelectedItems=function(){return e.clone(w)},i.setSelected=i.setSelectedItems=function(){var t,r=e(arguments).flattenDeep().intersection(v).value();e.isEqual(r,w)||(t=e.partialRight(i.trigger,w),w=b.doCorrectSort(r),t("selection-changed",r))},i.toggleSelected=i.toggleSelectedItems=function(){var t,r,n=e.clone(w),i=e(arguments).flattenDeep().intersection(v).value();t=e.difference(i,n),r=e.intersection(n,i),this.setSelected(e(n).difference(r).union(t).value())},i.getActiveItem=i.getActive=function(){return a},i.setActiveItem=i.setActive=function(t){var r,n=t;e.isUndefined(n)&&(n=null),n!==a&&(e.isNull(n)||e.includes(v,n))&&(r=e.partialRight(i.trigger,a),a=n,b.updateLastActiveIndex(),r("active-changed",a))},i.moveNext=function(r){var n=null;if(i.atEnd){if(!r)return!1;s=-1}return n=t.isNullOrUndefined(a)&&v.length>0?v[0]:v[s+1],i.setActive(n),!e.isNull(a)},i.movePrev=i.movePrevious=function(t){if(i.atStart){if(!t)return!1;s=v.length}return i.setActive(v[s-1]),!e.isNull(a)},i.atStart=i.atEnd=!0,i.toString=function(){var t=i.getSize()+" items";return h!==l&&(t+=" in "+e.keys(g).length+" groups"),d!==f&&(t+=", filtered to "+i.getItems().length+" items"),p!==c&&(t+=", sorted"),t},i.setValueOf=function(r){var n=r;return t.isFunction(n)||(n=null),u!==n&&(u=n,b.assignValueOf(),e.invokeMap(e.values(g),"setValueOf",u),i.trigger("value-of-changed")),i},i.on("sort-changed",b.updateLastActiveIndex),i.on("filter-changed, collection-changed",b.updateActiveItemIfNecessary),i.on("filter-changed, collection-changed",b.updateSelectedItemsIfNecessary),i.on("items-added",function(e){b.assignValueOf(e.args[0])}),i.on("items-added, items-removed, grouping-changed, sort-changed, filter-changed",function(e){i.trigger.apply(i,["collection-changed"].concat(e.args))}),i.on("collection-changed, active-changed",function(){i.atStart=s<=0,i.atEnd=s===v.length-1}),i.on("items-modified",function(t){var r=e(t.args).flattenDeep().intersection(y).uniq().value();r.length>0&&(b.reApplyGroup(r),b.reApplyFilter())}),i.add(arguments)}}),define("paychex.core/native/AppReviewHelper",["lodash","paychex.core/Errors","paychex.core/Promise","paychex.core/Validator","paychex.core/Logger","paychex.core/stores/LocalStorage","paychex.core/Tracker","paychex.core/DeviceProfile"],function(e,t,r,n,i,o,a,s){"use strict";function u(i){c.trace("constructing new AppReviewHelper"),n.isFunction(i)||t.throw(t.Types.IllegalArgument,"AppReviewHelper expects a 'reviewHandler' {Function}"),this.showReview=function(u,v,w){if(s.isNative()){var b=(new Date).getTime(),E=w||{},A=E.reviewThreshold||h,x=o.get(l)||e.cloneDeep(f);return n.isString(u,1)&&n.isString(v,1)||t.throw(t.Types.IllegalArgument,"AppReviewHelper.showReview expects an activityId {String} and userPromptString {String}"),
e.isNil(E.reviewThreshold)||n.isNumber(E.reviewThreshold,1)||t.throw(t.Types.IllegalArgument,"AppReviewHelper.showReview optional parameter optionals.reviewThreshold must be {Number} greater than 0"),x.save=function(){o.set(l,this)},x.activities[u]=x.activities[u]?++x.activities[u]:1,x.save(),c.debug("activity count for "+u+"= "+x.activities[u]),x.quietUntil&&b<=x.quietUntil?(c.debug("in quiet period, now="+b+" until="+x.quietUntil),r.resolve(d)):x.activities[u]>=A?(x.quietUntil=b+864e5*p,x.save(),c.debug("invoking review strategy"),r.call(i,v,E.imageId,u).then(function(e){return!1===e.value&&(x.quietUntil=new Date(3e3,1).getTime()),x.save(),e}).catch(t.rethrowAs("NativeAppReviewError","There was a problem displaying the review to the user")).catch(function(e){return a.errors.log(e),m})):(c.debug("waiting for threshold"),r.resolve(g))}return c.debug("not native device"),r.resolve(y)},this.reset=function(){o.remove(l)}}var c=i.get("paychex.core.native.AppReviewHelper"),l="paychex.native.appReview.data",f={activities:{},quietUntil:void 0},p=120,h=3,d="IN_QUIET_PERIOD",g="THRESHOLD_NOT_MET",m="ERROR_OCCURRED",y="NOT_NATIVE_DEVICE";return u.RESULTS={THRESHOLD_NOT_MET:g,IN_QUIET_PERIOD:d,ERROR_OCCURRED:m,NOT_NATIVE_DEVICE:y},u}),define("paychex.core/native/PluginManager",["paychex.core/Utils","paychex.core/Errors","paychex.core/Promise","paychex.core/Validator","paychex.core/Eventing","paychex.core/Logger"],function(e,t,r,n,i,o){"use strict";function a(t,n){function i(t){e(t.events).pickBy(e.isFunction).forOwn(function(e,r){o.addPluginEventHandler(r,e.bind(t),t.id)})}var o=this;return r.fcall(e.isFunction(t.init)?t.init.bind(t,n):e.noop).tap(function(){i(t)}).catch(function(){u.error("Failed to initialize plugin: "+t.id),e.remove(o.plugins,{id:t.id}),e(o.registeredEvents).flatten().filter(["pluginId",t.id]).forEach(function(e){e.unregister()})})}function s(){this.reset()}var u=o.get("paychex.core.native.pluginManager");return s.prototype.reset=function(){this.eventBroker=i.makeNewEventBroker("paychex.native.plugin.eventChannel"),this.plugins=[],e.invokeMap(e.flatMap(this.registeredEvents),"unregister"),this.registeredEvents={},this.pluginPlatformReady=r.defer(),this.pendingEvents=[]},s.prototype.registerPlugin=function(r){var n=this;return e.isObject(r)&&r.id||t.throw(t.Types.IllegalArgument,"PluginManager.registerPlugin expects a plugin object with an id property"),this.isPluginRegistered(r.id)&&t.throw(t.Types.Invocation,"PluginManager.registerPlugin received duplicate plugin registration."),this.plugins[this.plugins.length]=r,this.pluginPlatformReady.promise.then(function(e){return a.call(n,r,e)})},s.prototype.firePluginEvent=function(n,i,o){var a=this,s=r.defer();return o&&!this.isPluginEventRegistered(n)?r.reject(t.get(t.Types.Invocation,"PluginManager.firePluginEvent attempted to fire an event which has not been registered and failIfNoEventRegistered was true.")):this.isPluginEventRegistered(n)?this.eventBroker.announce("paychex.native.PluginManager",n,i).then(e.property("payload")):(this.pendingEvents.push({topic:n,defer:s}),s.promise.then(function(){return a.eventBroker.announce("paychex.native.PluginManager",n,i).then(e.property("payload"))}))},s.prototype.addPluginEventHandler=function(i,o,a){var s,u=this;return n.isFunction(o)&&n.isString(i,1)&&n.isString(a,1)||t.throw(t.Types.IllegalArgument,"PluginManager.addPluginEventHandler expects an eventName {String}, handler {Function} and pluginId {String}"),this.registeredEvents[i]||(this.registeredEvents[i]=[]),s=this.eventBroker.subscribe(i,function(e,t,n){r.fcall(o,e.payload).then(n,t).catch().done()},e.noop,e.noop),s.pluginId=a,this.registeredEvents[i].push(s),s.unregister=e.wrap(s.unregister,function(t){e.pull(u.registeredEvents[i],s),t()}),this.pendingEvents=e.filter(this.pendingEvents,function(e){return i!==e.topic||(e.defer.resolve(),!1)}),s},s.prototype.isPluginRegistered=function(t){return e.some(this.plugins,{id:t})},s.prototype.getPlugin=function(t){return e.find(this.plugins,{id:t})},s.prototype.isPluginEventRegistered=function(t){return void 0!==this.registeredEvents[t]&&!e.isEmpty(this.registeredEvents[t])},s.prototype.platformReady=function(e){this.pluginPlatformReady.resolve(e)},new s}),define("paychex.core/NotificationData",["lodash"],function(e){"use strict";return function(t,r,n){var i=!1,o=!!r&&e.map(r,"misc");return{key:t,args:n,callbacks:r||[],misc:o||[],cancel:function(){i=!0},isCanceled:function(){return i}}}}),define("paychex.core/PaychexError",["lodash"],function(e){"use strict";function t(e){this.name="PaychexError",this.message=e}function r(){var e,t;if(Object(this)!==this)throw new TypeError;return t=this.name,t=void 0===t?"Error":String(t),e=this.message,e=void 0===e?"":String(e),""===t?e:""===e?t:t+": "+e}var n={writable:!0,enumerable:!0,configurable:!0};return t.Severity={NONE:"NONE",ERROR:"ERROR",FATAL:"FATAL"},t.prototype=Object.create(Error.prototype,{name:n,stack:n,message:n,causedBy:n,severity:{writable:!0,enumerable:!0,configurable:!1,value:t.Severity.ERROR}}),t.prototype.name="PaychexError",t.prototype.constructor=t,t.prototype.toString=function(){var e=r.call(this),t=this.causedBy;return t&&(e+="\n\tcaused by: ",e+=t.toString()),e},"toJSON"in Error.prototype||(Error.prototype.toJSON=function(){return e.reduce(this,function(e,t,r){return e[r]=t,e},{})}),window.PaychexError=t,t}),define("paychex.core/ProgressServiceFactory",["lodash","lib.rxjs","paychex.core/Promise","paychex.core/Validator","paychex.core/Errors"],function(e,t,r,n,i){"use strict";var o=0,a={saving:{totalInProgress:0},loading:{totalInProgress:0},processing:{totalInProgress:0}};return function(s,u){function c(t){var r=e(t).groupBy("category").mapValues(function(t){return e(t).countBy("subCategory").merge({totalInProgress:t.length}).value()}).defaults(a,{totalInProgress:t.length}).value();s.announce("ProgressService","png.eventing.progressService.progressUpdate",r)}function l(e,t){e===o&&t>o?d=r.defer():t===o&&e>o&&d.resolve()}var f=e.isFunction(u)&&u||setTimeout,p=[],h=new t.Subject,d=r.defer(),g={whenFree:function(){return d.promise}};return d.resolve(),h.subscribe(function(t){var r=!1,n=e.spread(t);return function(){var t=arguments;r||(r=!0,f(function(){e.attempt(n,t),r=!1}))}}(c)),h.startWith([]).map(function(t){return e.filter(t,"config.blocking").length}).pairwise().subscribe(e.spread(l)),e.forEach(["loading","saving","processing"],function(t){g[t]={registerActivity:function(r,o,a){n.isTypeMatch([r,o,a],["string","object","pojo?"])||i.throw(i.Types.IllegalArgument,"Method `registerActivity` expects a string, a promise, and an optional configuration object.");var s={config:"saving"===t&&e.merge(a,{blocking:!0})||a,promise:o,category:t,subCategory:r};return p.push(s),h.onNext(p),o.finally(function(){e.pull(p,s),h.onNext(p)}),o}}}),g}}),define("paychex.core/Promise",["lodash","lib.bloodhound","paychex.core/Errors","paychex.core/Prototypes"],function(e,t,r){"use strict";function n(t){return e.isFunction(t)&&(t===Error||e.isError(t.prototype))}function i(t){return e.isString(t)&&n(window[t])}function o(t){return e.isError(t)?t.constructor||Error:n(t)?t:i(t)?window[t]:e.isString(t)&&t.length?r.get(t,"temp")&&window[t]:void 0}var a=Object.getPrototypeOf(t.resolve());return a.$$state={status:0},t.setScheduler=t.config.setScheduler,a.value=a.getValue=function(){return this._data},t.all=e.wrap(t.all,function(r,n){var i;return e.isPlainObject(n)?(i=e.keys(n),r(e.values(n)).then(function(t){return e.keyBy(t,function(e){return i[t.indexOf(e)]})})):e.isEmpty(n)?t.resolve([]):r(n)}),a.catch=e.wrap(a.catch,function(t){var r=e.tail(e.flatten(arguments)),i=r.pop(),a=e.compact(e.map(r,o));return n(i)?t.call(this):e.isEmpty(r)?t.call(this,i||e.noop):t.call(this,function(t){function r(e){return t instanceof e}return e.isEmpty(a)||e.some(a,r)?i(t):t})}),a.spread=function(t){var r=this;return r.then(function(n){return e.isPlainObject(n)?t.call(r,n):t.apply(r,n)})},t.allSettled=t.settle=e.wrap(t.settle,function(t,r){if(e.isPlainObject(r)){var n=e.keys(r);return t(e.values(r)).then(function(t){return e.zipObject(n,e.invokeMap(t,"value"))})}return t(r)}),t.timeout=t.timeout||function(e,t,r){return e.timeout(t,r||"Timed out after "+t+" ms")},t.fcall=t.call,t.fapply=t.apply,t}),define("lib.safe-json-stringify",["require","exports","module"],function(e,t,r){function n(e,t,r,n){return JSON.stringify(e,i(t,n),r)}function i(e,t){var r=[],n=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(t)).join(".")+"]"}),function(i,o){if(r.length>0){var a=r.indexOf(this);~a?r.splice(a+1):r.push(this),~a?n.splice(a,1/0,i):n.push(i),~r.indexOf(o)&&(o=t.call(this,i,o))}else r.push(o);return null==e?o:e.call(this,i,o)}}t=r.exports=n,t.getSerialize=i}),function(e){"use strict";function t(e){if(e=e||"",this[o]={},e instanceof t&&(e=e.toString()),"object"==typeof e){for(var r in e)if(e.hasOwnProperty(r)){var i="string"==typeof e[r]?e[r]:JSON.stringify(e[r]);this.append(r,i)}}else{0===e.indexOf("?")&&(e=e.slice(1));for(var a=e.split("&"),s=0;s<a.length;s++){var u=a[s],c=u.indexOf("=");-1<c&&this.append(n(u.slice(0,c)),n(u.slice(c+1)))}}}function r(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,function(e){return t[e]})}function n(e){return decodeURIComponent(e.replace(/\+/g," "))}function i(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return s&&(r[e.Symbol.iterator]=function(){return r}),r}if(!e.URLSearchParams||"a=1"!==new e.URLSearchParams({a:1}).toString()){var o="__URLSearchParams__",a=t.prototype,s=!(!e.Symbol||!e.Symbol.iterator);a.append=function(e,t){var r=this[o];e in r?r[e].push(""+t):r[e]=[""+t]},a.delete=function(e){delete this[o][e]},a.get=function(e){var t=this[o];return e in t?t[e][0]:null},a.getAll=function(e){var t=this[o];return e in t?t[e].slice(0):[]},a.has=function(e){return e in this[o]},a.set=function(e,t){this[o][e]=[""+t]},a.forEach=function(e,t){var r=this[o];Object.getOwnPropertyNames(r).forEach(function(n){r[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},a.toString=function(){var e,t,n,i,a=this[o],s=[];for(t in a)for(n=r(t),e=0,i=a[t];e<i.length;e++)s.push(n+"="+r(i[e]));return s.join("&")},a.sort=function(){var e,t,r=this[o],n=[],i={};for(e in r)n.push(e);for(n.sort(),t=0;t<n.length;t++)i[n[t]]=r[n[t]];this[o]=i},a.keys=function(){var e=[];return this.forEach(function(t,r){e.push([r])}),i(e)},a.values=function(){var e=[];return this.forEach(function(t){e.push([t])}),i(e)},a.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),i(e)},s&&(a[e.Symbol.iterator]=a.entries),e.URLSearchParams=t,e.URLSearchParams.polyfill=!0}}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this),define("lib.url-search-params",function(){}),define("paychex.core/Prototypes",["lodash","paychex.core/Errors","paychex.core/lib/usertiming.min","lib.safe-json-stringify","lib.url-search-params"],function(e,t,r,n){"use strict";Function.prototype.bind||(Function.prototype.bind=function(e){"function"!=typeof this&&t.throw(t.Types.Type,"Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i&&e?this:e,r.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o}),Array.prototype.every||(Array.prototype.every=function(e){void 0!==this&&null!==this||t.throw(t.Types.Type,"this is null or undefined");var r=Object(this),n=r.length>>>0;"function"!=typeof e&&t.throw(t.Types.Type,"Argument specified was not a function.");for(var i=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in r&&!e.call(i,r[o],o,r))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){void 0!==this&&null!==this||t.throw(t.Types.Type,"some() called on non-array type.");var r=Object(this),n=r.length>>>0;"function"!=typeof e&&t.throw(t.Types.Type,"Argument specified was not a function.");for(var i=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in r&&e.call(i,r[o],o,r))return!0;return!1}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){null!==this&&void 0!==this||t.throw(t.Types.Type,"this is null or undefined");var r=Object(this),n=r.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>1&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&i!==1/0&&i!==-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var o=i>=0?i:Math.max(n-Math.abs(i),0);o<n;o++)if(o in r&&r[o]===e)return o;return-1}),Array.prototype.map||(Array.prototype.map=function(e,r){var n,i,o;null!==this&&void 0!==this||t.throw(t.Types.Type,"this is null or not defined");var a=Object(this),s=a.length>>>0;for("function"!=typeof e&&t.throw(t.Types.Type,"Argument specified is not a function"),r&&(n=r),i=new Array(s),o=0;o<s;){var u,c;o in a&&(u=a[o],c=e.call(n,u,o,a),i[o]=c),o++}return i}),Array.prototype.removeAtIndex=function(e){Object(this).splice(e,1)},Array.prototype.filter||(Array.prototype.filter=function(e){for(var t=[],r=0;r<this.length;r++)e(this[r])&&t.push(this[r]);return t}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){this.map(e,t)}),Array.prototype.reduce||(Array.prototype.reduce=function(){var e,r,n=arguments[0];if(arguments.length>1)e=0,r=arguments[1];else if(0===this.length)t.throw("InvalidOperationError","Reduce of empty array with no initial value");else{if(1===this.length)return this[0];e=1,r=this[0]}for(;e<this.length;e++)r=n(r,this[e]);return r}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],i=0;i<r;){var o=t[i];if(e.call(n,o,i,t))return o;i++}},configurable:!0,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],i=0;i<r;){var o=t[i];if(e.call(n,o,i,t))return i;i++}return-1},configurable:!0,writable:!0}),Array.prototype.all||(Array.prototype.all=function(e){return this.filter(e).length===this.length}),Array.prototype.any||(Array.prototype.any=function(e){return this.filter(e).length>0}),Uint8Array.prototype.slice=Uint8Array.prototype.slice||function(){return new Uint8Array(Array.prototype.slice.apply(this,arguments))},Uint8Array.prototype.reduce=Uint8Array.prototype.reduce||Array.prototype.reduce,Date.prototype.parseISO8601=function(e){var t=e.split("T"),r=t[0].split("-"),n=t[1].split("Z"),i=n[0].split(":"),o=i[2].split("."),a=Number(i[0]),s=new Date;return s.setUTCFullYear(Number(r[0])),s.setUTCMonth(Number(r[1])-1),s.setUTCDate(Number(r[2])),s.setUTCHours(Number(a)),s.setUTCMinutes(Number(i[1])),s.setUTCSeconds(Number(o[0])),o[1]&&s.setUTCMilliseconds(Number(o[1])),s},window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||function(e){function t(e){this.g=[],this.k=e}function r(e){!function r(){var n=e.takeRecords();n.length&&e.k(n,e),e.f=setTimeout(r,t._period)}()}function n(t){var r,n={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(r in t)n[r]!==e&&t[r]!==e&&(n[r]=t[r]);return n}function i(e,t){var r=s(e,t);return function(n){var i,u=n.length;t.a&&r.a&&o(n,e,r.a,t.d),(t.b||t.e)&&(i=a(n,e,r,t)),(i||n.length!==u)&&(r=s(e,t))}}function o(t,r,i,o){for(var a,s,u={},c=r.attributes,l=c.length;l--;)a=c[l],s=a.name,o&&o[s]===e||(a.value!==i[s]&&t.push(n({type:"attributes",target:r,attributeName:s,oldValue:i[s],attributeNamespace:a.namespaceURI})),u[s]=!0);for(s in i)u[s]||t.push(n({target:r,type:"attributes",attributeName:s,oldValue:i[s]}))}function a(t,r,i,a){function s(e,r,i,s,u){var l=e.length-1;u=-~((l-u)/2);for(var f,p,h;h=e.pop();)f=i[h.h],p=s[h.i],a.b&&u&&Math.abs(h.h-h.i)>=l&&(t.push(n({type:"childList",target:r,addedNodes:[f],removedNodes:[f],nextSibling:f.nextSibling,previousSibling:f.previousSibling})),u--),a.a&&p.a&&o(t,f,p.a,a.d),a.c&&3===f.nodeType&&f.nodeValue!==p.c&&t.push(n({type:"characterData",target:f})),a.e&&c(f,p)}function c(r,i){for(var p,h,d,g,m,y=r.childNodes,v=i.b,w=y.length,b=v?v.length:0,E=0,A=0,x=0;A<w||x<b;)g=y[A],m=(d=v[x])&&d.j,g===m?(a.a&&d.a&&o(t,g,d.a,a.d),a.c&&d.c!==e&&g.nodeValue!==d.c&&t.push(n({type:"characterData",target:g})),h&&s(h,r,y,v,E),a.e&&(g.childNodes.length||d.b&&d.b.length)&&c(g,d),A++,x++):(l=!0,p||(p={},h=[]),g&&(p[d=u(g)]||(p[d]=!0,-1===(d=f(v,g,x,"j"))?a.b&&(t.push(n({type:"childList",target:r,addedNodes:[g],nextSibling:g.nextSibling,previousSibling:g.previousSibling})),E++):h.push({h:A,i:d})),A++),m&&m!==y[A]&&(p[d=u(m)]||(p[d]=!0,-1===(d=f(y,m,A))?a.b&&(t.push(n({type:"childList",target:i.j,removedNodes:[m],nextSibling:v[x+1],previousSibling:v[x-1]})),E--):h.push({h:d,i:x})),x++));h&&s(h,r,y,v,E)}var l;return c(r,i),l}function s(e,t){var r=!0;return function e(n){var i={j:n};return!t.c||3!==n.nodeType&&8!==n.nodeType?(t.a&&r&&1===n.nodeType&&(i.a=l(n.attributes,function(e,r){return t.d&&!t.d[r.name]||(e[r.name]=r.value),e})),r&&(t.b||t.c||t.a&&t.e)&&(i.b=c(n.childNodes,e)),r=t.e):i.c=n.nodeValue,i}(e)}function u(e){try{return e.id||(e.mo_id=e.mo_id||p++)}catch(t){try{return e.nodeValue}catch(e){return p++}}}function c(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n,e);return r}function l(e,t){for(var r={},n=0;n<e.length;n++)r=t(r,e[n],n,e);return r}function f(e,t,r,n){for(;r<e.length;r++)if((n?e[r][n]:e[r])===t)return r;return-1}t._period=30,t.prototype={observe:function(e,t){for(var n={a:!!(t.attributes||t.attributeFilter||t.attributeOldValue),b:!!t.childList,e:!!t.subtree,c:!(!t.characterData&&!t.characterDataOldValue)},o=this.g,a=0;a<o.length;a++)o[a].m===e&&o.splice(a,1);t.attributeFilter&&(n.d=l(t.attributeFilter,function(e,t){return e[t]=!0,e})),o.push({m:e,l:i(e,n)}),this.f||r(this)},takeRecords:function(){for(var e=[],t=this.g,r=0;r<t.length;r++)t[r].l(e);return e},disconnect:function(){this.g=[],clearTimeout(this.f),this.f=null}};var p=1;return t}(void 0),function(e,t,r){function n(e,t,r){return"function"==typeof t&&(r=t,t=i(r).replace(/_$/,"")),s(e,t,{configurable:!0,writable:!0,value:r})}function i(e){return"function"!=typeof e?"":"name"in e?e.name:u.call(e).match(f)[1]}function o(e){function t(t,i){return i||2===arguments.length?n.set(t,i):(i=n.get(t))===r&&(i=e(t),n.set(t,i)),i}var n=new h;return e||(e=d),t}if(!("WeakMap"in e)){var a=Object.getOwnPropertyNames,s=Object.defineProperty,u=Function.prototype.toString,c=Object.create,l=Object.prototype.hasOwnProperty,f=/^\n?function\s?(\w*)?_?\(/,p=function(){function e(){var e=o(),r={};this.unlock=function(n){var i=f(n);if(l.call(i,e))return i[e](r);var o=c(null,t);return s(i,e,{value:function(e){if(e===r)return o}}),o}}var t={value:{writable:!0,value:r}},i=c(null),o=function(){var e=Math.random().toString(36).slice(2);return e in i?o():i[e]=e},u=o(),f=function(e){if(l.call(e,u))return e[u];if(!Object.isExtensible(e))throw new TypeError("Object must be extensible");var t=c(null);return s(e,u,{value:t}),t};return n(Object,function(e){var t=a(e);return l.call(e,u)&&t.splice(t.indexOf(u),1),t}),n(e.prototype,function(e){return this.unlock(e).value}),n(e.prototype,function(e,t){this.unlock(e).value=t}),e}(),h=function(o){function a(t){if(this===e||null==this||this===a.prototype)return new a(t);d(this,new p),m(this,t)}function s(e){h(e);var n=g(this).get(e);return n===t?r:n}function u(e,n){h(e),g(this).set(e,n===r?t:n)}function c(e){return h(e),g(this).get(e)!==r}function l(e){h(e);var t=g(this),n=t.get(e)!==r;return t.set(e,r),n}function f(){return g(this),"[object WeakMap]"}var h=function(e){if(null==e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Invalid WeakMap key")},d=function(e,t){var r=o.unlock(e);if(r.value)throw new TypeError("Object is already a WeakMap");r.value=t},g=function(e){var t=o.unlock(e).value;if(!t)throw new TypeError("WeakMap is not generic");return t},m=function(e,t){null!==t&&"object"==typeof t&&"function"==typeof t.forEach&&t.forEach(function(r,n){r instanceof Array&&2===r.length&&u.call(e,t[n][0],t[n][1])})},y=(""+Object).split("Object"),v=function(){return y[0]+i(this)+y[1]};n(v,v);var w={__proto__:[]}instanceof Array?function(e){e.__proto__=v}:function(e){n(e,v)};return w(a),[f,s,u,c,l].forEach(function(e){n(a.prototype,e),w(e)}),a}(new p),d=Object.create?function(){return Object.create(null)}:function(){return{}};h.createStorage=o,e.WeakMap=h,e.WeakMap&&(e.WeakMap.createStorage=o)}}(function(){return window}()),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,r=(this.document||this.ownerDocument).querySelectorAll(e),n=this;do{for(t=r.length;--t>=0&&r.item(t)!==n;);}while(t<0&&(n=n.parentElement));return n}),Error.prototype.toJSON=function(){var t={},r=this,n=["context","promise","handled"];do{e.reduce(Object.getOwnPropertyNames(r),function(i,o){o in t||e.includes(n,o)||(t[o]=r[o])},{}),r=Object.getPrototypeOf(r)}while(r!==Object.prototype);return t},function(){var e=JSON.stringify;JSON.stringify=function(){return 1===arguments.length?n(arguments[0]):e.apply(JSON,arguments)}}()}),define("paychex.core/Repository",["paychex.core/stores/CookieStorage","paychex.core/stores/SessionStorage","paychex.core/stores/LocalStorage","paychex.core/stores/EmptyStore"],function(e,t,r,n){"use strict";return{cookies:e,session:t,local:r,empty:new n}}),define("paychex.core/Schedulers",["lodash"],function(e){"use strict";return function(t){var r=t||window,n=function(e){r.setTimeout(e)},i=function(){function t(){for(var t;u.length;)t=u.concat(),u.length=0,e.forEach(t,e.attempt),t.length=0,t=null;s=!1}var i,o,a,s=!1,u=[];return"setImmediate"in r?a=function(){r.setImmediate(t)}:"Promise"in r?(i=r.Promise.resolve(),a=function(){i.then(t)}):"MutationObserver"in r?(i=new r.MutationObserver(t),o=document.createElement("span"),r.addEventListener("unload",function(){i.disconnect(),i=null},!1),i.observe(o,{attributes:!0,attributeFilter:["alt"]}),a=function(){o.setAttribute("alt",String("true"!==o.getAttribute("alt")))}):a=function(){n(t)},function(e){u[u.length]=e,s||(s=!0,a())}}();return{nextTick:n,immediate:i}}}),define("paychex.core/signals/AutoResetSignal",["./ManualResetSignal"],function(e){"use strict";function t(t){e.call(this,t)}return t.prototype=new e,t.prototype.constructor=t,t.prototype.signal=function(){this.signaled=!0,this.queued.length&&(this.queued.shift().resolve(),this.reset())},t.prototype.waitOne=function(){var t=e.prototype.waitOne.call(this);return t.isResolved()&&this.reset(),t},t}),define("paychex.core/signals/CountdownSignal",["./ManualResetSignal"],function(e){"use strict";function t(t){Object.defineProperty(this,"counter",{value:Math.max(0,t>>0),writable:!0,enumerable:!1,configurable:!1}),e.call(this,0===this.counter)}return t.prototype=new e,t.prototype.constructor=t,t.prototype.decrement=function(t){var r=Math.max(t>>0,1);this.counter=Math.max(0,this.counter-r),0!==this.counter||this.signaled||e.prototype.signal.call(this)},t.prototype.increment=function(t){this.counter=this.counter+Math.max(t>>0,1),e.prototype.reset.call(this)},t.prototype.signal=function(){},t.prototype.reset=function(){this.decrement(this.counter)},t}),define("paychex.core/signals/ManualResetSignal",["lodash","paychex.core/Errors","paychex.core/Promise"],function(e,t,r){"use strict";function n(e){this.queued=[],this.signaled=!!e}return n.prototype.reset=function(){this.signaled=!1},n.prototype.signal=function(){for(this.signaled&&t.throw(t.Types.Invocation,"Cannot call signal twice."),this.signaled=!0;this.queued.length&&this.signaled;)this.queued.shift().resolve()},n.prototype.waitOne=function(){var e,t;return this.signaled?t=r.resolve():(e=r.defer(),this.queued.push(e),t=e.promise),t},n}),define("paychex.core/StateMachine",["paychex.core/Utils","paychex.core/Errors","paychex.core/Promise","paychex.core/Validator","paychex.core/TriggerMixin"],function(e,t,r,n,i){"use strict";function o(e,t,r){this.from=e,this.to=t,this.criteria=r}function a(t,r,n,i){var o=e.toArray(arguments).slice(4);e([n]).flatten().map(function(r){return e.isString(r)?t.states[r]:r}).map(i).forEach(function(t){e.attempt(e.spread(t.bind(r)),o)})}function s(r){function n(e){return function(){o.current.withinState=e}}e.isString(r)&&!e.isEmpty(r)||t.throw(t.Types.IllegalArgument,"Argument `name` must be provided.");var o=this;o.current={state:null,conditions:{},results:{},executed:[],invocation:null,withinState:!1},o.name=r,o.states={},o.transitions=[],i.apply(this),o.on(s.Events.STATE_ENTER,n(!0)),o.on(s.Events.STATE_LEAVE,n(!1))}function u(){var t=this,r=t.current.state,n=e.clone(t.current.conditions),i=e.filter(t.transitions,{from:r.name}),o=e.find(i,function(e){return e.criteria(n)});return o?t.states[o.to]:null}function c(r,n){var i=["StateMachineError","An error occurred in the state machine.",{machine:r.name,state:r.current.state.name,executed:r.current.executed,conditions:r.current.conditions,handled:!1}];return e.isError(n)?i.unshift(n):i.unshift(t.get(n)),t.get.apply(null,i)}function l(e,t){return e.trigger(s.Events.ERROR_OCCURRED,t),!!t.handled}function f(t){var n=this,i=function(){var e=[].slice.call(arguments);return n.update.apply(n,e)},o=function(){return n.signal()},u=e.merge({},t,{args:n.current.args,results:n.current.results,machine:{name:n.name,update:i,signal:o,conditions:e.clone(n.current.conditions),stop:function(t){n.results=e.merge({},n.results,t||{}),n.current.invocation.resolve(n.results)}}}),f=function i(){return n.current.executed.push(t.name),n.current.executed=e.uniq(n.current.executed),r.call(t.execute.bind(u)).catch(function(e){return r.call(t.retry.bind(u),e).then(i)})},p=function(t){var r=c(n,t);l(n,r)||(a(n,u,n.current.executed,"rollback",t),a(n,u,e.keys(n.states),"failure",t),n.current.invocation.reject(r))},h=function(e){n.current.results[t.name]=e},d=function(){n.trigger(s.Events.STATE_LEAVE,t.name)};return n.current.state=t,n.trigger(s.Events.STATE_ENTER,t.name),r.call(t.init).then(f).tap(h).catch(p).finally(d)}return s.prototype.addState=function(i,o){var a=o;return n.validateArgs([i,o],["string","function|pojo"])||t.throw(t.Types.IllegalArgument,"Method `addState` expects a string and a function or object literal."),i in this.states&&t.throw(t.Types.Invocation,"State already exists.",{stateName:i}),e.isEmpty(i)&&t.throw(t.Types.IllegalArgument,"A state name must be specified."),e.isFunction(a)&&(a=a()),e.isPlainObject(a)||t.throw(t.Types.IllegalArgument,"The state definition function did not return an object."),a.name=i,this.states[i]=e.merge({init:e.noop,execute:e.noop,retry:r.reject,success:e.noop,failure:e.noop,rollback:e.noop},a),this},s.prototype.addStates=function(t){var r=this;return e.forOwn(t,function(e,t){r.addState(t,e)}),r},s.prototype.addTransition=function(r,i,a){var s=a||{};return n.validateArgs([r,i,a],["string","string","pojo?|function?"])||t.throw(t.Types.IllegalArgument,"Method `addTransition` expects 2 strings and an optional function or object literal."),e.isFunction(s)||(s=e.matches(s)),this.transitions[this.transitions.length]=new o(r,i,s),this},s.prototype.start=function(i,o,u){function c(t){a(g,{args:g.current.args,results:g.current.results,machine:{name:g.name,stop:e.noop,update:e.noop,signal:e.noop,conditions:e.clone(g.current.conditions)}},e.keys(g.states),"success",t)}function l(e){g.trigger(s.Events.MACHINE_STOP,e)}var p,h,d,g=this,m=i;return n.validateArgs([i,o,u],["string","array?","number?"])||t.throw(t.Types.IllegalArgument,"Method `start` expects a string and an optional array and timeout."),m=e.sluggify("css",m),h=g.states[m],h||t.throw(t.Types.Invocation,"State does not exist.",{stateName:m}),d=r.defer(),g.current.invocation=d,g.current.args=(o||[]).concat(),p=d.promise,(u||0)>0&&(p=p.timeout(u)),p=p.tap(c).finally(l),g.trigger(s.Events.MACHINE_START,{name:g.name,args:g.current.args,promise:g.current.invocation.promise}),f.call(g,h),p},s.prototype.update=function(i,o){function a(){var e=u.call(l);return e?f.call(l,e):r.resolve()}n.validateArgs([i,o],["pojo","boolean?"])||t.throw(t.Types.IllegalArgument,"Method `update` expects an object literal and optional boolean."),o?this.current.conditions=i:e.merge(this.current.conditions,i);var c,l=this,p=!!l.current.invocation,h=l.current.withinState;return p?h?(c=r.defer(),l.one(s.Events.STATE_LEAVE,function(){a().then(c.resolve,c.reject).catch().done()}),c.promise):a():r.resolve()},s.prototype.signal=function(){return this.update({},!1)},s.prototype.waitForState=function(e){var t,n,i=this;return this.current.state&&this.current.state.name===e?r.resolve(e):(t=r.defer(),n=i.on(s.Events.STATE_ENTER,function(r){r.args[0]===e&&(t.resolve(e),n())}),t.promise)},s.Events={MACHINE_START:"machine-start",MACHINE_STOP:"machine-stop",STATE_ENTER:"state-enter",STATE_LEAVE:"state-leave",ERROR_OCCURRED:"error-occurred"},s}),define("paychex.core/stores/AsyncStore",["lodash","paychex.core/Errors","paychex.core/Validator","paychex.core/stores/Store"],function(e,t,r,n){"use strict";function i(n,i,o,a,s,u,c){r.validateArgs(arguments,["object"].concat(e.fill(new Array(6),"function")))||t.throw(t.Types.IllegalArgument,"AsyncStore requires a Promise and 6 functions to be provided: ready, get, set, remove, clear, items, and observe."),this.ready=n,this.get=i,this.set=o,this.remove=a,this.clear=s,this.items=u,this.observe=c}return i.isAsyncStore=function(t){return n.isStore(t)&&e.hasIn(t,"ready")&&e.hasIn(t,"observe")},i}),define("paychex.core/stores/CookieStorage",["lodash","paychex.core/stores/Store","paychex.core/Errors"],function(e,t,r){"use strict";function n(e){return e.replace(d,"-")}function i(t){return e(t).split("=").head().trim()}function o(t,r,n){var i=n.expires&&new Date(n.expires)<new Date,o=t+"="+(i?"":r);e.forOwn(n,function(e,t){e&&e.length&&(o+=";"+t+"="+e)}),document.cookie=o}function a(t){return e(document.cookie).split(";").filter(function(r){return e.startsWith(r.trim(),t)}).map(function(r){var n,i=r.trim().substring(t.length);return(e.startsWith(i,'"{')||e.startsWith(i,"{"))&&e.startsWith(i,'"')&&(i=i.slice(p,-p).replace(/\\"/g,'"')),n=e.attempt(JSON.parse,i),e.isError(n)?i:n}).head()}function s(t){return e.isString(t)||r.throw(r.Types.IllegalArgument,g.STORE_GET),a(n(t)+"=")}function u(t,i,a){e.isString(t)&&!e.isNil(i)||r.throw(r.Types.IllegalArgument,g.STORE_SET);var s=n(t),u=e.isString(i)?n(i):JSON.stringify(i);s.length&&o(s,u,e.merge({path:"/",domain:h},a))}function c(t,i){e.isString(t)||r.throw(r.Types.IllegalArgument,g.STORE_REMOVE),o(n(t),"",e.merge({path:"/",domain:h,expires:"Thu, 01-Jan-1970 00:00:01 GMT"},i))}function l(){e(document.cookie).split(";").map(i).forEach(c)}function f(){return e(document.cookie).split(";").map(function(e){var t=i(e);return{name:t,value:a(t+"=")}}).filter(function(e){return!!e.name}).value()}var p=1,h="",d=/[=;,\t]+/g,g={STORE_GET:"Store.get requires a name string to be provided.",STORE_SET:"Store.set requires a name string and value to be provided. A null value is not valid; to clear an existing value, call Store.remove() and pass in the name of the item to be removed",STORE_REMOVE:"Store.remove requires a name string to be provided."};return new t(s,u,c,l,f)}),define("paychex.core/stores/EmptyStore",["lodash"],function(e){"use strict";function t(){e.forEach(["get","set","remove","clear"],function(e){this[e]=Function.prototype}.bind(this)),this.items=function(){return[]}}return t.instance=new t,t}),define("paychex.core/stores/HTML5Storage",["lodash","paychex.core/Errors","paychex.core/stores/Store"],function(e,t,r){"use strict"
;var n=/[^(\u0020-\uD7FF)|(\uE000-\uFFFD)|\u0009|\u000A|\u000D]+/g,i={STORE_GET:"Store.get requires a name string to be provided.",STORE_SET:"Store.set requires a name string and value to be provided. A null value is not valid; to clear an existing value, call Store.remove() and pass in the name of the item to be removed",STORE_REMOVE:"Store.remove requires a name string to be provided."};return function(o){function a(e){return e.replace(n,"-")}function s(t){var r=o.getItem(t),n=e.attempt(JSON.parse,r);return e.isError(n)?r:null===n?void 0:n}return new r(function(r){e.isString(r)||t.throw(t.Types.IllegalArgument,i.STORE_GET);var n=a(r);if(n&&n.length)return s(n)},function(r,n){e.isString(r)&&!e.isNil(n)||t.throw(t.Types.IllegalArgument,i.STORE_SET);var s=a(r),u=e.isString(n)?a(n):JSON.stringify(n);s.length&&o.setItem(s,u)},function(r){e.isString(r)||t.throw(t.Types.IllegalArgument,i.STORE_REMOVE);var n=a(r);n&&n.length&&o.removeItem(n)},function(){o.clear()},function(){return e(o.length).range().map(function(e){var t=o.key(e);return{name:t,value:s(t)}}).value()})}}),define("paychex.core/stores/IndexedDBStore",["lodash","lib.rxjs","paychex.core/Errors","paychex.core/Promise","paychex.core/stores/AsyncStore"],function(e,t,r,n,i){"use strict";function o(e,t){if(!(e in window)){var r=e[0].toUpperCase()+e.slice(1);window[e]=window[e]||window["moz"+r]||window["webkit"+r]||window["ms"+r]||t}}return o("indexedDB"),o("IDBKeyRange"),o("IDBTransaction",{READ_WRITE:"readwrite"}),function(o){function a(t,i,a,s){return new n(function(n,u){var c=g.transaction([o.objectStore],t),l=c.objectStore(o.objectStore),f=l[i].apply(l,a);f.onerror=function(){var n=[r.Types.Data,"Could not complete IndexedDB operation.",{mode:t,args:a,method:i}];e.isError(c.error)&&n.unshift(c.error),u(r.get.apply(null,n))},f.onabort=function(e){c.error=e.target.error,f.onerror()},f.onsuccess=function(){e.isFunction(s)?s(n,u,f.result):n(f.result)}})}function s(t,r,i,a){return new n(function(t,n){function s(){u<c.length?a(t,n,{value:c[u++],continue:s}):a(t,n)}var u,c,l=o.objectStore+"-"+v+"-";switch(r){case"get":t(JSON.parse(localStorage.getItem(l+i[0])));break;case"put":localStorage.setItem(l+i[1],JSON.stringify(i[0])),t(i[0]);break;case"delete":t(localStorage.removeItem(l+i[0]));break;case"clear":e(localStorage.length).range().map(localStorage.key.bind(localStorage)).filter(function(t){return e.startsWith(t,l)}).forEach(function(e){localStorage.removeItem(e)}),t();break;case"openCursor":u=0,c=e(localStorage.length).range().map(localStorage.key.bind(localStorage)).filter(function(t){return e.startsWith(t,l)}).map(function(e){return JSON.parse(localStorage.getItem(e))}).value(),s()}})}function u(e){return m("readonly","get",[e])}function c(e,t){return m("readwrite","put",[t,e]).then(function(r){return e in y&&y[e].onNext(t),r})}function l(e){return m("readwrite","delete",[e]).then(function(t){return e in y&&(y[e].onCompleted(),delete y[e]),t})}function f(){return m("readwrite","clear",[]).then(function(t){return e.invokeMap(e.values(y),"onCompleted"),y={},t})}function p(){function e(e,r,n){n?(t.push(n.value),n.continue()):e(t)}var t=[];return m("readonly","openCursor",[],e)}function h(e){return e in y||(y[e]=new t.Subject,u(e).then(function(t){return y[e].onNext(t),t}).catch().done()),y[e].asObservable()}function d(t){var n=window.indexedDB.open(w,v);n.onupgradeneeded=function(t){e.isFunction(o.createUpgrade)||r.throw(r.Types.IllegalArgument,"Missing `createUpgrade` callback when creating a new IndexedDBStore."),o.createUpgrade(t.target.result)},n.onsuccess=function(e){g=e.target.result,m=a,t()},n.onerror=function(){m=s,t()}}e.isUndefined(this)&&r.throw(r.Types.Invocation,"Please use `new` to construct an instance of IndexedDBStore."),e.isObject(o)&&e.isString(o.objectStore)&&!e.isEmpty(o.objectStore.trim())||r.throw(r.Types.IllegalArgument,"Property `objectStore` on `meta` argument is required.");var g,m,y={},v=e.get(o,"version",1),w=e.get(o,"database","Paychex");(!e.isSafeInteger(v)||v<1)&&r.throw(r.Types.IllegalArgument,"Parameter `version` must be a positive integer."),i.call(this,new n(d),u,c,l,f,p,h)}}),define("paychex.core/stores/LocalStorage",["paychex.core/stores/HTML5Storage"],function(e){"use strict";return new e(window.localStorage)}),define("paychex.core/stores/SessionStorage",["paychex.core/stores/HTML5Storage"],function(e){"use strict";var t=new e(window.sessionStorage);return t.abandon=function(){t.clear()},t}),define("paychex.core/stores/Store",["paychex.core/Validator","paychex.core/Errors","lodash"],function(e,t,r){"use strict";function n(r,n,i,o,a){e.validateArgs(arguments,["function","function","function","function","function"])||t.throw(t.Types.IllegalArgument,"Store requires 5 functions to be provided: get, set, remove, clear, and items"),this.get=r,this.set=n,this.remove=i,this.clear=o,this.items=a}return n.isStore=function(e){return!!e&&r.every(["get","set","remove","clear","items"],function(t){return r.isFunction(e[t])})},n}),define("paychex.core/stores/StoreToAsyncStoreWrapper",["lodash","lib.rxjs","paychex.core/Errors","paychex.core/Promise","paychex.core/stores/Store","paychex.core/stores/AsyncStore"],function(e,t,r,n,i,o){"use strict";return function a(s){var u={};this instanceof a||r.throw(r.Types.Invocation,"AsyncStoreWrapper must be invoked with `new`."),i.isStore(s)||r.throw(r.Types.IllegalArgument,"Parameter `store` must be a Store instance."),o.call(this,n.resolve(),function(){return n.resolve(s.get.apply(s,arguments))},function(e,t){return n.resolve(s.set.apply(s,arguments)).then(function(r){return e in u&&u[e].onNext(t),r})},function(e){return n.resolve(s.remove.apply(s,arguments)).then(function(t){return e in u&&(u[e].onCompleted(),delete u[e]),t})},function(){return n.resolve(s.clear.apply(s,arguments)).then(function(t){return e.invokeMap(e.values(u),"onCompleted"),u={},t})},function(){return n.resolve(s.items.apply(s,arguments))},function(e){return e in u||(u[e]=new t.Subject,u[e].onNext(s.get(e))),u[e].asObservable()})}}),define("paychex.core/stores/TemporaryStore",["lodash"],function(e){"use strict";return function(){var t={};this.get=function(e){return t[e]},this.set=function(e,r){t[e]=r},this.remove=function(e){delete t[e]},this.clear=function(){t={}},this.items=function(){return e.map(t,function(e,t){return{name:t,value:e}})}}}),define("paychex.core/SubscriptionManager",["lodash","paychex.core/Errors","paychex.core/Logger","paychex.core/Validator","paychex.core/NotificationData"],function(e,t,r,n,i){"use strict";return function(){var o={},a=!1,s=r.get("paychex.core/SubscriptionManager");return{add:function(r,i,a){var s=[],u=r;return n.isString(u,1)?u=u.toLowerCase():t.throw(t.Types.Type,"Parameter `key` must be a non-empty string."),n.isFunction(i)||t.throw(t.Types.Type,"Parameter `callback` must be a function."),e.forEach(u.split(","),function(r){var a=r.trim(),u=o[a];n.isArray(u)?e.includes(u,i)&&t.throw(t.Types.Invocation,"The callback is already subscribed to this event.",{event:a}):(o[a]=[],u=o[a]),u.push(i),e.includes(s,u)||s.push(u)}),i.misc=a,function(){e.forEach(s,function(t){e.pull(t,i)})}},notify:function(r){var u,c=r;return n.isString(c,1)?c=c.trim().toLowerCase():t.throw(t.Types.Type,"Parameter `key` must be a non-empty string."),u=new i(c,a?[]:o[c],e.tail(arguments)),e.forEach(u.callbacks.concat(),function(t){var r;u.isCanceled()||(r=e.attempt(t,u),e.isError(r)&&s.error(r))}),u},pause:function(){a=!0},resume:function(){a=!1}}}}),window.performance=window.performance||{},window.performance.addEventListener=window.performance.addEventListener||Function.prototype,define("paychex.core/Tracker",["lib.tracking"],function(e){"use strict";return e}),define("paychex.core/TriggerMixin",["paychex.core/SubscriptionManager"],function(e){"use strict";return function(){var t=new e;this.on=function(e,r){return t.add(e,r)},this.one=function(e,r){var n=t.add(e,function(){r.apply(null,[].slice.call(arguments)),n()});return n},this.trigger=function(){t.notify.apply(t,arguments)},this.pause=this.suspend=function(){t.pause()},this.resume=function(){t.resume()}}}),define("paychex.core/UserFeedback",["paychex.core/Errors","paychex.core/Promise","paychex.core/Validator"],function(e,t,r){"use strict";return function(n){function i(e){return r.isTypeMatch([e],["pojo"])?r.isString(e.email,1,/.+@.+\..+/i)?r.isString(e.name,1)?r.isString(e.message,1)?void 0:"Field 'message' is missing or empty.":"Field 'name' is missing or empty.":"Field 'email' is missing or invalid.":"Parameter 'feedback' must be a plain object."}function o(r){var o=i(r);return o&&e.throw(e.Types.IllegalArgument,o),t.call(n,r)}return r.isFunction(n)||e.throw("Argument 'provider' should be a function that accepts a feedback object and returns a promise."),{submit:o}}}),define("paychex.core/Utils",["lodash","paychex.core/Errors","paychex.core/Promise","paychex.core/Validator","lib.safe-json-stringify"],function(e,t,r,n,i){"use strict";return e.mixin({arrayUnionCustomizer:function(t,r){if(e.isArray(t))return e.union(t,r)},arrayConcatCustomizer:function(t,r){if(e.isArray(t))return t.concat(r)},serialize:function(t){var r=typeof t,n="";switch(r){case"object":n=e.reduce(t,function(t,n,i){return t+"["+r+":"+i+e.serialize(n)+"]"},"");break;case"function":n+="["+r+":"+t.toString()+"]";break;default:n+="["+r+":"+t+"]"}return n.replace(/\s/g,"")},hash:function(t){var r=t;return r=e.isPlainObject(r)?e.serialize(r):String(r),e.isEmpty(r)?0:e.reduce(e.toArray(r),function(e,t){return(e<<5)-e+t.charCodeAt(0)|0},0)},cloneTrue:function t(r,n){var i;return!e.isObject(r)||r.constructor!==Object&&r.constructor!==Array?r:e.includes([Date,RegExp,Function,String,Number,Boolean],r.constructor)?new r.constructor(r):r.constructor===Array?[].concat(r):(i=n||new r.constructor,e.forIn(r,function(n,o){i[o]=e.isUndefined(i[o])&&t(r[o])||i[o]}),i)},cross:function(){return e.reduce(arguments,function(t,r){return e.flatten(e.map(t,function(t){return e.map(r,function(e){return t.concat([e])})}))},[[]])},sluggify:function(){n.isTypeMatch(arguments,["string","string"])||t.throw(t.Types.Type,"_.sluggify expects at least 2 string parameters.");var r=/\s+/g,i=/\w\S*/g,o=/[~!@$%^&*()_+=,.\/';:"?><[\\\]{}|`#]+/g,a=Array.prototype.slice.call(arguments),s=a.shift().toLowerCase();return({css:function(){return e.reduce(arguments,function(e,t,n){return e+(0===n?"":"-")+t.toLowerCase().trim().replace(o,"").replace(r,"-")},"")},var:function(){return e.reduce(arguments,function(t,n,a){return t+n.trim().replace(i,function(t,r){return a+r===0?t.toLowerCase():e.upperFirst(t)}).replace(r,"").replace(o,"")},"")}}[s]||e.identity).apply(null,a)},firstDefined:function(){return e.find(arguments,e.negate(e.isUndefined))},stringify:i,invokeIf:function(e,r,i){return n.validateArgs([e,r],["function","function"])||t.throw(t.Types.IllegalArgument,"invokeIf expects 2 function arguments"),function(){return e.apply(null,arguments)?r.apply(null,arguments):i&&i.apply(null,arguments)}},invokeLimitReached:function(e){var r=0;return n.isNumber(e,0)||t.throw(t.Types.IllegalArgument,"invokeLimitReached expects a non-negative number"),function(){return++r>=e}},exponentialFalloff:function(i,o){function a(t,r,n){var o=e.attempt(e.spread(i),n);return e.isError(o)?r(o):t(o)}function s(){return Math.pow(c,u-l)*f}var u=0,c=2,l=1,f=o||250;return n.isFunction(i)||t.throw(t.Types.IllegalArgument,"exponentialFalloff expects a function argument"),function(){return e.isEqual(++u,1)?a(r.resolve,r.reject,arguments):new r(function(e,t){setTimeout(a,s(),e,t,arguments)})}}}),e.isEqual=e.wrap(e.isEqual,function(t,r,n,i){var o=i;return!i&&r&&r.hasOwnProperty("valueOf")&&n&&n.hasOwnProperty("valueOf")&&(o=function(e,t){return e.valueOf()===t.valueOf()}),e.isEqualWith(r,n,o)}),e.indexOf=e.wrap(e.indexOf,function(t,r,n,i){var o=n,a=r;return n&&n.hasOwnProperty("valueOf")&&(o=n.valueOf(),a=e.invokeMap(r,"valueOf")),t(a,o,i)}),e.uniq=e.wrap(e.uniq,function(t,r){return e.uniqWith(r,e.isEqual)}),e.includes=e.wrap(e.includes,function(t,r,n,i){return e.isArray(r)?e.indexOf(r,n,i)>-1:t(r,n,i)}),e.difference=e.wrap(e.difference,function(t,r,n){return e.differenceWith(r,n,e.isEqual)}),e.intersection=e.wrap(e.intersection,function(t,r,n){return e.intersectionWith(r,n,e.isEqual)}),e}),define("paychex.core/utils/FileUtils",["lodash","paychex.core/Errors","paychex.core/Promise","paychex.core/DeviceProfile","paychex.core/lib/pica"],function(e,t,r,n,i){"use strict";function o(e){return e instanceof Blob}function a(e){return e instanceof HTMLCanvasElement}function s(s,u){var p,h=["js"],d=u&&e.isFinite(u.height)?u.height:c,g=u&&e.isFinite(u.width)?u.width:c,m=u&&e.isString(u.mimeType)?u.mimeType:"image/png",y=u&&e.inRange(u.quality,0,l)?u.quality:f,v=document.createElement("canvas"),w=new Image;return n.isIPhone()||h.push("wasm"),n.isInternetExplorer()||h.push("ww"),p=new i({features:h}),v.height=d,v.width=g,new r(function(e,n){w.onload=function(){r.cast(p.resize(w,v)).then(function(t){e(p.toBlob(t,m,y))}).catch(function(e){n(e)}).done()},w.onerror=n,o(s)?w.src=window.URL.createObjectURL(s):a(s)?w.src=s.toDataURL():t.throw(t.IllegalArgument,"image must a blob or canvas")})}function u(n){return new r(function(r,i){var o,a=new FileReader;a.onload=function(){r(a.result)},a.onerror=function(e){i(t.get("FileReaderException","Failed to convert blob to base64",{result:e}))},o=e.attempt(a.readAsDataURL.bind(a,n)),e.isError(o)&&i(t.get("FileReaderException","Failed to convert blob to base64",{result:o}))})}var c=200,l=.99,f=.9;return{resizeImage:s,convertBlobToBase64:u}}),define("paychex.core/utils/Overloader",["lodash"],function(e){"use strict";function t(e){this.methods={},this.methodKeys={},this.context=e||null}return t.prototype.invoke=function(t,r){var n,i,o=r;if(e.isArguments(r)?o=e.toArray(r):e.isArray(r)||(o=e.tail(arguments)),this.methods[t]&&(i=e.find(this.methodKeys[t],function(t){return e.every(t.split("|"),function(e,t){return""===e||typeof o[t]===e||!!window[e]&&o[t]instanceof window[e]})}),n=this.methods[t][i]))return n.apply(this.context,o)},t.prototype.overload=function(t){var r=e.tail(arguments),n=r.pop();e.isString(t)&&!e.isEmpty(t)&&e.isFunction(n)&&(this.methods[t]=this.methods[t]||{},this.methods[t][r.join("|")]=n,this.methodKeys[t]=e.sortBy(e.functions(this.methods[t]),"length").reverse())},t}),define("paychex.core/Validator",["lodash","paychex.core/Errors"],function(e,t){"use strict";function r(){t.throw(t.Types.Invocation,"Class `Validator` is static and should not be instantiated.")}return r.isFunction=r.validateFunctionArgCount=function(n,i){return void 0===i||r.isNumber(i,0)||t.throw(t.Types.IllegalArgument,"Parameter `minArgCount` must be a non-negative number."),e.isFunction(n)&&n.length>=(void 0!==i?i:n.length)},r.isNumber=function(t,r,n){var i=r,o=n;return e.isNumber(r)&&!e.isNaN(r)||(i=Number.MIN_VALUE),e.isNumber(n)&&!e.isNaN(n)||(o=Number.MAX_VALUE),e.isNumber(t)&&t>=i&&t<=o},r.isArray=function(n,i,o){var a,s=i,u=o;return e.isUndefined(u)&&r.isNumber(s,0)&&(u=s,s=void 0),u=u||0,r.isTypeMatch(i,"nonEmptyString|function|undefined")||t.throw(t.Types.IllegalArgument,"If provided, parameter `type` must be a non-empty string or a function."),r.isNumber(u,0)||t.throw(t.Types.IllegalArgument,"If provided, parameter `minLength` must be a non-negative number."),a=e.isString(s)?function(e){return r.isTypeMatch(e,s)}:function(e){return!s||e instanceof s},e.isArray(n)&&n.length>=u&&e.every(n,a)},r.isString=function(n,i,o){var a=o;return void 0===i||r.isNumber(i,0)||t.throw(t.Types.IllegalArgument,"Parameter `minLength` must be a non-negative number."),e.isUndefined(a)||(r.isString(a,1)&&(a=new RegExp(a)),e.isRegExp(a)||t.throw(t.Types.IllegalArgument,"Parameter `rx` must be a non-empty regexp pattern or a regular expression object.")),e.isString(n)&&n.trim().length>=(i||0)&&(!a||a.test(n))},r.isNullOrUndefined=function(t){return e.isNil(t)},r.isArguments=function(t){return e.isArguments(t)},r.isTypeMatch=r.validateArgs=function(n,i){var o=n,a=i;return e.isArray(a)||(a=[a]),e.isEmpty(a)&&t.throw(t.Types.IllegalArgument,"Parameter `types` cannot be an empty array."),r.isArguments(o)&&(o=e.toArray(o)),function(){return!e.isArray(o)||1===a.length&&e.includes(a[0].toLowerCase(),"array")&&!e.isArray(o[0])}()&&(o=[o]),e.isEmpty(o)&&t.throw(t.Types.IllegalArgument,"Parameter `values` cannot be an empty array."),e.every(a,function(e){return r.isString(e,1)})||t.throw(t.Types.IllegalArgument,"Parameter `types` must be a non-empty string or array or non-empty strings."),o.length<a.length&&t.throw(t.Types.IllegalArgument,"Parameter `values` has fewer elements than parameter `types`."),e.every(o,function(n,i){return i>=a.length||e.some(a[i].replace(/\?/g,"|undefined").split("|"),function(e){var i=e.toLowerCase().trim(),o=r.validationMap[i];return r.isFunction(o,1)||t.throw(t.Types.IllegalArgument,"Validation function for type was not found.",{type:i}),o(n)})})},r.validationMap={"*":function(e){return!!e||!0},any:function(t){return!e.isUndefined(t)},null:function(t){return e.isNull(t)},undefined:function(t){return e.isUndefined(t)},string:r.isString,number:e.isNumber,array:r.isArray,function:r.isFunction,arguments:r.isArguments,object:e.isObject,pojo:e.isPlainObject,regexp:e.isRegExp,date:e.isDate,boolean:e.isBoolean,bool:e.isBoolean,nonemptystring:function(e){return r.isString(e,1)}},r}),define("paychex.core/WindowOpener",["lodash","paychex.core/Logger","paychex.core/Promise","paychex.core/Errors"],function(e,t,r,n){"use strict";function i(t,r,i){var o=e.attempt(function(){return r({winRef:window.open.apply(window,t)})});return e.isError(o)?(a.error("Error opening new window: "+o),i(n.get("WindowOpener","failed to open window",{severity:"NONE"}))):o}function o(){a.info("Open new window got called");var t=e.includes(navigator.userAgent.toLowerCase(),"firefox"),n=e.toArray(arguments);return t?new r(function(e,t){setTimeout(i,100,n,e,t)}):i(n,r.resolve,r.reject)}var a=t.get("paychex.core.WindowOpener");return{open:o}}),define("paychex.core/Workflows",["paychex.core/Promise","paychex.core/lib/dag","paychex.core/lib/tsort","paychex.core/Utils","paychex.core/Errors","paychex.core/Logger","paychex.core/Validator","paychex.core/Tracker"],function(e,t,r,n,i,o,a,s){"use strict";var u={},c=1,l="_missing",f=10,p={ADD_SEQUENCE:"Function `addSequence` expects an object literal parameter whose keys represent step names and whose values are either step objects or functions that return step objects.",INJECT_STEP:"Function `injectStep` expects a string, optional array, array, and object or function as parameters.",DISPATCH_ARG_TYPES:"Function `dispatch` expects an optional arguments array, optional timeout in milliseconds, and optional tracking data.",DISPATCH_NEGATIVE_TIMEOUT:"Parameter `timeout` must be a non-negative number. If `timeout` = 0, no timeout will be used."},h=function(){i.throw(i.Types.Invocation,"Workflows is a static class and should not be instantiated.")},d=function(e){a.isString(e,c)||i.throw(i.Types.IllegalArgument,"Workflows must have a name."),u.hasOwnProperty(e)&&i.throw(i.Types.IllegalArgument,"Workflow already exists.",{name:e}),this.log=o.get(e,{level:"INFO"}),this.name=e,this.edges=[],this.fns={},u[e]=this};return h.clear=function(){u={}},h.create=function(e){return new d(e)},h.State={RUNNING:"RUNNING",RESOLVED:"RESOLVED",REJECTED:"REJECTED",CANCELED:"CANCELED"},d.prototype.delete=function(){u.hasOwnProperty(this.name)&&delete u[this.name]},d.prototype.addStep=function(e,t,r){var o=this,s=e,u=t,l=r;return function(){a.isTypeMatch([s,u,l],["string","function|object","undefined"])&&(l=u,u=[]),a.isTypeMatch([s,u,l],["string","array","function|object"])||i.throw(i.Types.IllegalArgument,"Function `addStep` expects a string, optional array, and function or object."),a.isString(s,c)||i.throw(i.Types.IllegalArgument,"A step localName must be provided."),o.fns.hasOwnProperty(s)&&i.throw(i.Types.IllegalArgument,"Step already exists in this workflow.",{step:s}),l instanceof d&&(l=n.partial(function(e){return{execute:function(){return e.dispatch(n.toArray(arguments))}}},l.clone())),a.isTypeMatch(l,"pojo")&&(l=n.partial(function(e){return e},l)),a.isFunction(l)||i.throw(i.Types.IllegalArgument,"Function `addStep` expects a function, POJO, or Workflow instance for parameter `func`.")}(),this.fns[s]=l,this.edges=this.edges.concat(function(){return n.isEmpty(u)?[[null,s]]:n.map(u,function(e){return a.isString(e,c)||i.throw(i.Types.IllegalArgument,"Parameter `depends` must be an array of non-empty strings."),[e,s]})}()),this},d.prototype.clone=function(){var e=function(){};return e.prototype=this,new e},d.prototype.addSequence=function(e,t){var r=this,o=e,s=t;return a.isNullOrUndefined(s)&&(s=e,o=[]),a.isTypeMatch([o,s],["array","pojo"])||i.throw(i.Types.IllegalArgument,p.ADD_SEQUENCE),n.forEach(s,function(e,t){r.addStep(t,o,e),o=[t]}),this},d.prototype.toString=function(){var e=r(this.edges),t=n.memoize(function(e){return n.repeat("  ",e)}),o=n.memoize(function(t){var r=0,i=n.find(e.graph,{id:t});return i&&i.parents.length&&(r=1+n.max(n.map(i.parents,o))),r});if(!e.error)return n.reduce(e.path,function(e,r){return e+["\n",t(o(r)),r].join("")},this.name+":");i.throw(e.error)},d.prototype.injectStep=function(e,t,r,o){var s=this,u=n.isArray(t)&&t||[],c=n.isArray(r)&&r||[],l=n.firstDefined(o,r,t);return a.isTypeMatch([e,u,c,l],["string","array","array","pojo|function"])||i.throw(i.Types.IllegalArgument,p.INJECT_STEP),this.addStep(e,u,l),n.forEach(c,function(t){var r=n.matches({1:t});n.forEach(n.filter(s.edges,r),function(r){r[1]=e,s.edges.push([e,t])})}),this.edges=n.uniqWith(this.edges,n.isEqual),this},d.prototype.removeStep=function(e){return delete this.fns[e],this.edges=n.filter(this.edges,function(t){return!n.includes(t,e)}),this},d.prototype.onMissingStep=function(t){return this[l]=a.isFunction(t)&&t||n.partial(e.reject,"missing step"),this},d.prototype.dispatch=function(r,o,u){function c(){this.cancel=function(e){w.reject(e)}}var d=100,g=n.toArray(arguments),m=n.find(g,n.isPlainObject)||void 0,y=n.find(g,n.isNumber)||0,v=n.find(g,n.isArray)||[],w=e.defer(),b=!1,E=this;return a.isTypeMatch([v,y,m],["array","number","pojo?"])||i.throw(i.Types.IllegalArgument,p.DISPATCH_ARG_TYPES),a.isNumber(y,0)||i.throw(i.Types.IllegalArgument,p.DISPATCH_NEGATIVE_TIMEOUT),n.assign(new e(function(r,o,a){function u(e){return e.name in T||(T[e.name]=n.merge(N,n.omitBy(e,n.isFunction))),T[e.name]}function c(t){return n.merge({name:t,retry:e.reject,execute:n.noop,success:n.noop,failure:n.noop,rollback:n.noop},O[t]())}function p(){return e.settle(n.map(S,function(t){return e.call(n.bind(t.success,u(t)),N.results)})).tap(function(){N.state=h.State.RESOLVED,r(N.results)})}function g(r){var a=r;return N.state===h.State.RUNNING&&(N.state=h.State.REJECTED),n.reduceRight(S,function(t,r){return t.finally(function(){return e.call(n.bind(r.rollback,u(r)),a)})},e.when()).finally(function(){return new e(function(r){var i=[];t(I,f,function(t,r){var o=n.find(S,{name:t});!o&&O.hasOwnProperty(t)&&(o=c(t)),o&&i.push(e.call(n.bind(o.failure,u(o)),a)),r()},function(){e.settle(i).done(function(){r()})})})}).finally(function(){var e={workflow:E.name,executed:n.map(S,"name")};a=n.isError(a)?i.get(r,"WorkflowError","An error occurred during the dispatch",e):i.get("WorkflowError",a,e),o(a)})}function A(){var e=n.matches({state:2});m?(_.children=n.filter(_.children,e),_.stop(n.assignIn({category:"workflows",tags:["workflow"]},m))):_.reset(),_=null,a(d)}function x(t,r,n){return!O.hasOwnProperty(t)&&(E[l]?e.call(E[l],t).then(r,n("onMissingStep handler rejected")).catch().done():n("Step `"+t+"` was not found.")(),!0)}var S=[],T={},O=n.clone(E.fns),I=n.clone(E.edges),_=s.timers.create(E.name),N={log:E.log,workflow:E,results:{},state:h.State.RUNNING};_.start(),a(0),t(I,f,function(t,r){function i(){b||r()}function o(e){return function(t){b||(b=!0,r(t||e))}}if(!x(t,i,o)){var s=c(t),l=u(s);n.includes(S,s)||S.push(s),function r(){var u=function(e){N.results[t]=e,i()},c=function(i){return b||e.call(n.bind(s.retry,l),i).then(r,o(i||"step failed: "+t))},f=_.add(t);return f.start(),e.race([w.promise.catch(function(e){N.state=h.State.CANCELED,o("workflow canceled")(e)}),e.apply(n.bind(s.execute,l),v||[]).then(u,c)]).finally(function(){f.stop(),a(Number((O.length/S.length*d).toFixed(2)))})}(),0!==y&&setTimeout(o("Workflow dispatch timed out."),y)}},n.once(function(e){A(),n.isNil(e)?p():g(e)}))}),new c)},h});
//# sourceMappingURL=paychex.core.min.js.map